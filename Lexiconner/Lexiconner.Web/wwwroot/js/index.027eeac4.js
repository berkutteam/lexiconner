(function(t){function e(e){for(var a,o,i=e[0],c=e[1],l=e[2],u=0,p=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={index:0},s=[];function o(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"57348df5"}[t]+".js"}function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise((function(e,a){r=n[t]=[e,a]}));e.push(r[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=o(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var r=n[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,r[1](l)}n[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},4678:function(t,e,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=s(t);return r(e)}function s(t){if(!r.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=s,t.exports=n,n.id="4678"},"56d7":function(t,e,r){"use strict";r.r(e);r("b0c0"),r("4c53"),r("96cf");var a=r("1da1"),n=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),s=r("ee98"),o=r.n(s),i=r("8e5f"),c=r.n(i),l=r("1881"),u=r.n(l),d=r("f62e"),p=r("859b"),m=r("8832"),f=r.n(m),v=r("f13c"),h=r.n(v),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.privateState.data.isVisible?r("div",{staticClass:"app-fullscreen-loader"},[r("div",{staticClass:"app-loader-strip stripes stripes--animated"}),r("div",{staticClass:"app-loader-content"},[r("div",{staticClass:"content-title"},[t._v(t._s(t.privateState.data.title))]),t.privateState.data.text?r("div",{staticClass:"content-text"},[t._v(t._s(t.privateState.data.text))]):t._e()])]):t._e()},b=[],_=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("53ca")),S=r("ade3"),y=new n["default"];function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var C=null,I={name:"app-fullscreen-loader",components:{},props:{defaultTitle:{type:String,default:"Loading..."},defaultText:{type:String,default:""}},data:function(){return{privateState:{data:E({},C)}}},mounted:function(){C={isVisible:!1,title:this.defaultTitle,text:this.defaultText},this.privateState.data=E({},C),y.$on("update-params",this.updateParams)},methods:{updateParams:function(t){"string"===typeof t&&(t=E({},C,{title:t})),"object"===Object(_["a"])(t)&&(t=E({},C,{},t)),this.privateState.data=E({},t)}}},T=I,w=r("2877"),D=Object(w["a"])(T,g,b,!1,null,null,null),A=D.exports,R={install:function(t,e){t.component("app-fullscreen-loader",A);var r=function(t){y.$emit("update-params",t)};t.appFullscreenLoader=r,t.prototype["$appFullscreenLoader"]=r}},M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid app-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"app-sidebar-parent"},[r("sidebar"),r("div",{staticClass:"col app-page-content"},[r("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light app-navbar no-print"},[r("div",{},[r("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:t.toggleSidebar}},[r("i",{staticClass:"fas fa-align-left"})])])]),t._t("default")],2)],1)])])},j=[],P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-sidebar no-print",attrs:{id:"sidebar"}},[t.sharedState.auth.isAuthenticated?r("div",[t.sharedState.auth.isAuthenticated?r("div",{staticClass:"sidebar-header"},[r("router-link",{staticClass:"sidebar-user",attrs:{to:{name:"user-profile"}}},[r("div",{staticClass:"d-flex justify-content-start align-items-start"},[r("div",{staticClass:"mr-3"},[r("img",{staticClass:"user-image",attrs:{src:"img/user.png",alt:t.sharedState.auth.user.profile.name||t.sharedState.auth.user.profile.given_name}})]),r("div",[r("div",{staticClass:"mb-0"},[r("small",[t._v(t._s(t.sharedState.auth.user.profile.name||t.sharedState.auth.user.profile.given_name))])]),r("div",[r("small",[t._v(t._s(t.sharedState.auth.user.profile.email))])])])])])],1):t._e(),t.sharedState.auth.isAuthenticated?r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"study-items-dashboard"}}},[t._v("Study items")])],1):t._e(),t.sharedState.auth.isAuthenticated?r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"user-films-browse"}}},[t._v("My films")])],1):t._e(),t.sharedState.auth.isAuthenticated?r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"logout"}}},[t._v("Logout")])],1):t._e()]):t._e(),t.sharedState.auth.isAuthenticated?t._e():r("div",[t.sharedState.auth.isAuthenticated?t._e():r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"home"}}},[t._v("Home")])],1),t.sharedState.auth.isAuthenticated?t._e():r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"login"}}},[t._v("Login")])],1)])])},U=[],N=r("2f62"),L=(r("a15b"),r("d4ec")),x=r("bee2"),k=r("dd17"),F=r.n(k),$=r("1632"),Y=(r("d81d"),r("13d5"),r("8468")),G=r("2ef0"),V=r.n(G),H={LOADING_SET:"LOADING_SET",ENUMS_LOAD:"ENUMS_LOAD",ENUMS_SET:"ENUMS_SET",CONFIG_LOAD:"CONFIG_LOAD",CONFIG_SET:"CONFIG_SET",TERMS_OF_USE_LOAD:"TERMS_OF_USE_LOAD",TERMS_OF_USE_SET:"TERMS_OF_USE_SET",COUNTRIES_LOAD:"COUNTRIES_LOAD",COUNTRIES_SET:"COUNTRIES_SET",LANGUAGES_LOAD:"LANGUAGES_LOAD",LANGUAGES_SET:"LANGUAGES_SET",TIMEZONES_LOAD:"TIMEZONES_LOAD",TIMEZONES_SET:"TIMEZONES_SET",AUTH_USER_SET:"AUTH_USER_SET",AUTH_USER_RESET:"AUTH_USER_RESET",USER_INFO_LOAD:"USER_INFO_LOAD",USER_INFO_SET:"USER_INFO_SET",USER_INFO_UPDATE:"USER_INFO_UPDATE",USER_INFO_NOTIFICATIONS_UPDATE:"USER_INFO_NOTIFICATIONS_UPDATE",USER_INFO_TIMEZONE_SET:"USER_INFO_TIMEZONE_SET",USER_INFO_CURRENT_COMPANY_SET:"USER_INFO_CURRENT_COMPANY_SET",STUDY_ITEMS_LOAD:"STUDY_ITEMS_LOAD",STUDY_ITEMS_REQUEST_PARAMS_SET:"STUDY_ITEMS_REQUEST_PARAMS_SET",STUDY_ITEMS_REQUEST_PARAMS_RESET:"STUDY_ITEMS_REQUEST_PARAMS_RESET",STUDY_ITEMS_SET:"STUDY_ITEMS_SET",STUDY_ITEM_LOAD:"STUDY_ITEM_LOAD",STUDY_ITEM_CREATE:"STUDY_ITEM_CREATE",STUDY_ITEM_CREATE_SET:"STUDY_ITEM_CREATE_SET",STUDY_ITEM_UPDATE:"STUDY_ITEM_UPDATE",STUDY_ITEM_UPDATE_SET:"STUDY_ITEM_UPDATE_SET",STUDY_ITEM_DELETE:"STUDY_ITEM_DELETE",STUDY_ITEM_DELETE_SET:"STUDY_ITEM_DELETE_SET",STUDY_ITEM_ADD_TO_FAVOURITES:"STUDY_ITEM_ADD_TO_FAVOURITES",STUDY_ITEM_DELETE_FROM_FAVOURITES:"STUDY_ITEM_DELETE_FROM_FAVOURITES",STUDY_ITEM_IS_FAVOURITE_SET:"STUDY_ITEM_IS_FAVOURITE_SET",STUDY_ITEM_TRAINING_STATS_LOAD:"STUDY_ITEM_TRAINING_STATS_LOAD",STUDY_ITEM_TRAINING_STATS_SET:"STUDY_ITEM_TRAINING_STATS_SET",STUDY_ITEM_TRAINING_FLASHCARDS_START:"STUDY_ITEM_TRAINING_FLASHCARDS_START",STUDY_ITEM_TRAINING_FLASHCARDS_START_SET:"STUDY_ITEM_TRAINING_FLASHCARDS_START_SET",STUDY_ITEM_TRAINING_FLASHCARDS_SAVE:"STUDY_ITEM_TRAINING_FLASHCARDS_SAVE",CUSTOM_COLLECTIONS_LOAD:"CUSTOM_COLLECTIONS_LOAD",CUSTOM_COLLECTIONS_SET:"CUSTOM_COLLECTIONS_SET",CUSTOM_COLLECTION_CURRENT_SET:"CUSTOM_COLLECTION_CURRENT_SET",CUSTOM_COLLECTION_CREATE:"CUSTOM_COLLECTION_CREATE",CUSTOM_COLLECTION_UPDATE:"CUSTOM_COLLECTION_UPDATE",CUSTOM_COLLECTION_DELETE:"CUSTOM_COLLECTION_DELETE",CUSTOM_COLLECTION_DUPLICATE:"CUSTOM_COLLECTION_DUPLICATE",USER_FILMS_LOAD:"USER_FILMS_LOAD",USER_FILMS_REQUEST_PARAMS_SET:"USER_FILMS_REQUEST_PARAMS_SET",USER_FILMS_REQUEST_PARAMS_RESET:"USER_FILMS_REQUEST_PARAMS_RESET",USER_FILMS_SET:"USER_FILMS_SET",USER_FILM_LOAD:"USER_FILM_LOAD",USER_FILM_CREATE:"USER_FILM_CREATE",USER_FILM_CREATE_SET:"USER_FILM_CREATE_SET",USER_FILM_UPDATE:"USER_FILM_UPDATE",USER_FILM_UPDATE_SET:"USER_FILM_UPDATE_SET",USER_FILM_DELETE:"USER_FILM_DELETE",USER_FILM_DELETE_SET:"USER_FILM_DELETE_SET",NAV_VISIBILITY_SET:"NAV_VISIBILITY_SET",ERROR_PAGE_DATA_SET:"ERROR_PAGE_DATA_SET",ERROR_PAGE_DATA_RESET:"ERROR_PAGE_DATA_RESET"},q=(r("99af"),r("d3b7"),r("ac1f"),r("5319"),r("841c"),r("c975"),r("bc3a")),Z=r.n(q),z=function(){function t(){Object(L["a"])(this,t)}return Object(x["a"])(t,null,[{key:"axios",value:function(e){return t._axiosRequest(e)}},{key:"_axiosRequest",value:function(t){if(!t||!t.url)throw new Error("Http request error: config required");return t.method=t.method||"get",t.url&&-1===t.url.indexOf("http")&&-1===t.url.indexOf("https")&&"/"!=t.url[0]&&(t.url="/"+t.url),Z()(t).then((function(t){t.config,t.data,t.headers,t.request,t.status,t.statusText;return t})).catch((function(t){throw console.error("HTTP request error: ",t),t}))}}]),t}(),B=r("99de"),W=r("7e84"),Q=r("262e"),K=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L["a"])(this,t),V.a.assignIn(this,e)},J=K,X=function(t){function e(t){return Object(L["a"])(this,e),Object(B["a"])(this,Object(W["a"])(e).call(this,t))}return Object(Q["a"])(e,t),e}(J),tt=X,et=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L["a"])(this,t),this.config=e.config,this.isAxiosError=e.isAxiosError,this.request=e.request,this.response=null,this.message=e.message,this.stack=e.stack},rt=et,at=function(t){function e(t){return Object(L["a"])(this,e),Object(B["a"])(this,Object(W["a"])(e).call(this,t))}return Object(Q["a"])(e,t),e}(J),nt=at,st=function(t){function e(t){return Object(L["a"])(this,e),Object(B["a"])(this,Object(W["a"])(e).call(this,t))}return Object(Q["a"])(e,t),e}(J),ot=st;function it(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?it(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):it(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!e)throw new Error("endpoint can't be empty");var s=t.replace("<endpoint>",e);if(a&&(s=encodeURI(s)),r&&"object"===Object(_["a"])(r)){var o=0,i=Object.keys(r).reduce((function(t,e,a){return null===r[e]||void 0===r[e]?t:(t+=0===o?"?":"&",t+=n?"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r[e])):"".concat(e,"=").concat(r[e]),o+=1,t)}),"");s="".concat(s).concat(i)}return s}var ut="Bearer";function dt(t){return new Promise((function(e,r){li.getUser().then((function(a){var n=a.access_token;a.id_token,a.refresh_token;t.headers=t.headers||{},t.headers["Authorization"]="".concat(ut," ").concat(n),z.axios(t).then((function(t){t.config,t.data,t.headers,t.request,t.status,t.statusText;e(t)})).catch((function(t){t.config,t.isAxiosError,t.request,t.response,t.message,t.stack;r(t)}))}),(function(t){r(t)}))}))}function pt(t){return new Promise((function(e,r){z.axios(ct({},t)).then((function(t){t.config,t.data,t.headers,t.request,t.status,t.statusText;e(t)})).catch((function(t){t.config,t.isAxiosError,t.request,t.response,t.message,t.stack;r(t)}))}))}function mt(t){return 200!==t.status&&201!==t.status&&ft(t),t.data}function ft(t){t.config,t.isAxiosError,t.request;var e=t.response,r=t.message;t.stack;if(null===e||"Network Error"===r)throw new rt(t);throw e.headers["www-authenticate"]&&console.error("www-authenticate error: ".concat(e.headers["www-authenticate"])),400===e.status?new tt(e):404===e.status?new ot(e):500===e.status?new nt(e):t}var vt,ht,gt=function(){function t(){Object(L["a"])(this,t),this.config=null}return Object(x["a"])(t,[{key:"init",value:function(t){this.config=t}},{key:"configApi",value:function(){var t="".concat("","api/v1/config");return t="http://localhost:5007/api/v1/config",{config:function(){return pt({url:t,method:"get"}).then(mt).catch(ft)}}}},{key:"identity",value:function(){"".concat(this.config.identityExternalUrl,"/api/v1/<endpoint>");return{}}},{key:"webApi",value:function(){var t="".concat(this.config.apiExternalUrl,"/api/v2/<endpoint>");return{getLanguages:function(){return pt({url:lt(t,"languages",{}),method:"get"}).then(mt).catch(ft)},getStudyItems:function(e){var r=e.offset,a=e.limit,n=e.search,s=e.isFavourite,o=e.collectionId;return dt({url:lt(t,"studyitems",{offset:r,limit:a,search:n,isFavourite:s,collectionId:o}),method:"get"}).then(mt).catch(ft)},getStudyItem:function(e){var r=e.studyItemId;return dt({url:lt(t,"studyitems/".concat(r),{}),method:"get"}).then(mt).catch(ft)},createStudyItem:function(e){var r=e.data;return dt({url:lt(t,"studyitems",{}),method:"post",data:ct({},r)}).then(mt).catch(ft)},updateStudyItem:function(e){var r=e.studyItemId,a=e.data;return dt({url:lt(t,"studyitems/".concat(r),{}),method:"put",data:ct({},a)}).then(mt).catch(ft)},deleteStudyItem:function(e){var r=e.studyItemId;return dt({url:lt(t,"studyitems/".concat(r),{}),method:"delete",data:{}}).then(mt).catch(ft)},addStudyItemToFavourites:function(e){var r=e.studyItemId;return dt({url:lt(t,"studyitems/".concat(r,"/favourites"),{}),method:"post",data:{}}).then(mt).catch(ft)},deleteStudyItemFromFavourites:function(e){var r=e.studyItemId;return dt({url:lt(t,"studyitems/".concat(r,"/favourites"),{}),method:"delete",data:{}}).then(mt).catch(ft)},getTrainingStatistics:function(){return dt({url:lt(t,"studyitems/trainings/stats",{}),method:"get"}).then(mt).catch(ft)},flashcardsTrainingStart:function(e){var r=e.collectionId,a=e.limit;return dt({url:lt(t,"studyitems/trainings/flashcards",{collectionId:r,limit:a}),method:"get"}).then(mt).catch(ft)},flashcardsTrainingSave:function(e){var r=e.data;return dt({url:lt(t,"studyitems/trainings/flashcards/save",{}),method:"post",data:ct({},r)}).then(mt).catch(ft)},getCustomCollections:function(){return dt({url:lt(t,"customcollections",{}),method:"get"}).then(mt).catch(ft)},createCustomCollection:function(e){var r=e.data;return dt({url:lt(t,"customcollections",{}),method:"post",data:ct({},r)}).then(mt).catch(ft)},updateCustomCollection:function(e){var r=e.customCollectionId,a=e.data;return dt({url:lt(t,"customcollections/".concat(r),{}),method:"put",data:ct({},a)}).then(mt).catch(ft)},deleteCustomCollection:function(e){var r=e.customCollectionId,a=e.isDeleteItems;return dt({url:lt(t,"customcollections/".concat(r),{isDeleteItems:a}),method:"delete",data:{}}).then(mt).catch(ft)},duplicateCustomCollection:function(e){var r=e.customCollectionId;return dt({url:lt(t,"customcollections/".concat(r,"/duplicate"),{}),method:"post",data:{}}).then(mt).catch(ft)},getUserFilms:function(e){var r=e.offset,a=e.limit,n=e.search;return dt({url:lt(t,"userfilms",{offset:r,limit:a,search:n}),method:"get"}).then(mt).catch(ft)},getUserFilm:function(e){var r=e.userFilmId;return dt({url:lt(t,"userfilms/".concat(r),{}),method:"get"}).then(mt).catch(ft)},createUserFilm:function(e){var r=e.data;return dt({url:lt(t,"userfilms",{}),method:"post",data:ct({},r)}).then(mt).catch(ft)},updateUserFilm:function(e){var r=e.userFilmId,a=e.data;return dt({url:lt(t,"userfilms/".concat(r),{}),method:"put",data:ct({},a)}).then(mt).catch(ft)},deleteUserFilm:function(e){var r=e.userFilmId;return dt({url:lt(t,"userfilms/".concat(r),{}),method:"delete",data:{}}).then(mt).catch(ft)}}}}]),t}(),bt=new gt;function _t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function St(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}n["default"].use(N["a"]);var yt=new N["a"].Store({state:{loading:{},config:{clientAuth:null,urls:null},enums:null,termsOfUse:null,countries:null,languages:null,timeZones:null,auth:{isAuthenticated:!1,isRegistrationCompleted:!1,user:null,registrationInfo:null,preRegistrationUser:null,myPermissions:null,scopedPermissions:{permissions:[],roles:[]},userScopedPermissions:{}},userAccount:null,userInfo:null,company:null,companyDepartments:{},companyDepartment:{},companyUsers:{},departmentUsers:{},companyUser:{},companyUserInvitation:{},myCompanyInvitations:null,studyItemsRequestParamsDefault:{search:null,isFavourite:null},studyItemsRequestParams:{search:null,isFavourite:null},studyItemsPaginationResult:null,trainingStats:null,trainingFlashcards:null,customCollectionsResult:null,currentCustomCollection:null,userFilmsRequestParamsDefault:{search:null},userFilmsRequestParams:{search:null},userFilmsPaginationResult:null,nav:{isVisible:!0},errorPage:{title:null,text:null}},getters:{isAnyLoading:function(t,e){var r=Object.keys(t.loading).reduce((function(e,r,a){return e||t.loading[r]}),!1);return r},userId:function(t,e){return t.auth.user?t.auth.user.profile.sub:null},tokens:function(t,e){if(!t.auth.user)return{};var r=t.auth.user,a=r.access_token,n=r.id_token,s=r.refresh_token;return{access_token:a,id_token:n,refresh_token:s}},currentCustomCollectionId:function(t,e){return t.currentCustomCollection?t.currentCustomCollection.id:null}},mutations:(vt={},Object(S["a"])(vt,H.LOADING_SET,(function(t,e){var r=e.target,a=e.loading;t.loading=St({},a,Object(S["a"])({},r,a))})),Object(S["a"])(vt,H.CONFIG_SET,(function(t,e){var r=e.config;t.config=r})),Object(S["a"])(vt,H.LANGUAGES_SET,(function(t,e){var r=e.data;t.languages=r})),Object(S["a"])(vt,H.AUTH_USER_SET,(function(t,e){var r=e.user;t.auth.isAuthenticated=!!r,t.auth.user=St({},r)})),Object(S["a"])(vt,H.AUTH_USER_RESET,(function(t){t.auth.isAuthenticated=!1,t.auth.user=null})),Object(S["a"])(vt,H.AUTH_REGISTRATION_INFO_SET,(function(t,e){var r=e.registrationInfo;t.auth.registrationInfo=r})),Object(S["a"])(vt,H.AUTH_PREREGISTRATION_USER_SET,(function(t,e){var r=e.data;t.auth.preRegistrationUser=r})),Object(S["a"])(vt,H.AUTH_MY_PERMISSIONS_SET,(function(t,e){var r=e.myPermissions;t.auth.myPermissions=r})),Object(S["a"])(vt,H.AUTH_SCOPED_PERMISSIONS_SET,(function(t,e){var r=e.data;t.auth.scopedPermissions=r})),Object(S["a"])(vt,H.AUTH_USER_SCOPED_PERMISSIONS_SET,(function(t,e){var r=e.scopeId,a=e.userId,n=e.data,s=St({},t.auth.userScopedPermissions||{});t.auth.userScopedPermissions=St({},s,Object(S["a"])({},r,St({},s[r]||{},Object(S["a"])({},a,n))))})),Object(S["a"])(vt,H.AUTH_USER_ACCOUNT_SET,(function(t,e){var r=e.data;t.userAccount=r})),Object(S["a"])(vt,H.STUDY_ITEMS_REQUEST_PARAMS_SET,(function(t,e){var r=e;t.studyItemsRequestParams=St({},t.studyItemsRequestParams,{},r)})),Object(S["a"])(vt,H.STUDY_ITEMS_REQUEST_PARAMS_RESET,(function(t,e){t.studyItemsRequestParams=St({},t.studyItemsRequestParamsDefault)})),Object(S["a"])(vt,H.STUDY_ITEMS_SET,(function(t,e){var r=e.data;t.studyItemsPaginationResult=r})),Object(S["a"])(vt,H.STUDY_ITEM_CREATE_SET,(function(t,e){var r=e.data;null!==t.studyItemsPaginationResult&&t.studyItemsPaginationResult.items.unshift(St({},r))})),Object(S["a"])(vt,H.STUDY_ITEM_UPDATE_SET,(function(t,e){var r=e.data;null!==t.studyItemsPaginationResult&&(t.studyItemsPaginationResult.items=t.studyItemsPaginationResult.items.map((function(t){return t.id===r.id?St({},r):t})))})),Object(S["a"])(vt,H.STUDY_ITEM_DELETE_SET,(function(t,e){var r=e.studyItemId;null!==t.studyItemsPaginationResult&&(t.studyItemsPaginationResult.items=t.studyItemsPaginationResult.items.filter((function(t){return t.id!==r})))})),Object(S["a"])(vt,H.STUDY_ITEM_IS_FAVOURITE_SET,(function(t,e){var r=e.studyItemId,a=e.isFavourite;null!==t.studyItemsPaginationResult&&(t.studyItemsPaginationResult.items=t.studyItemsPaginationResult.items.map((function(t){return t.id===r?St({},t,{isFavourite:a}):t})))})),Object(S["a"])(vt,H.STUDY_ITEM_TRAINING_STATS_SET,(function(t,e){var r=e.data;t.trainingStats=r})),Object(S["a"])(vt,H.STUDY_ITEM_TRAINING_FLASHCARDS_START_SET,(function(t,e){var r=e.data;t.trainingFlashcards=r})),Object(S["a"])(vt,H.CUSTOM_COLLECTIONS_SET,(function(t,e){var r=e.data;t.customCollectionsResult=r})),Object(S["a"])(vt,H.CUSTOM_COLLECTION_CURRENT_SET,(function(t,e){var r=e.customCollection;t.currentCustomCollection=St({},r)})),Object(S["a"])(vt,H.USER_FILMS_REQUEST_PARAMS_SET,(function(t,e){var r=e;t.userFilmsRequestParams=St({},t.userFilmsRequestParams,{},r)})),Object(S["a"])(vt,H.USER_FILMS_REQUEST_PARAMS_RESET,(function(t,e){t.userFilmsRequestParams=St({},t.userFilmsRequestParamsDefault)})),Object(S["a"])(vt,H.USER_FILMS_SET,(function(t,e){var r=e.data;t.userFilmsPaginationResult=r})),Object(S["a"])(vt,H.USER_FILM_CREATE_SET,(function(t,e){var r=e.data;null!==t.userFilmsPaginationResult&&t.userFilmsPaginationResult.items.unshift(St({},r))})),Object(S["a"])(vt,H.USER_FILM_UPDATE_SET,(function(t,e){var r=e.data;null!==t.userFilmsPaginationResult&&(t.userFilmsPaginationResult.items=t.userFilmsPaginationResult.items.map((function(t){return t.id===r.id?St({},r):t})))})),Object(S["a"])(vt,H.USER_FILM_DELETE_SET,(function(t,e){var r=e.userFilmId;null!==t.userFilmsPaginationResult&&(t.userFilmsPaginationResult.items=t.userFilmsPaginationResult.items.filter((function(t){return t.id!==r})))})),Object(S["a"])(vt,H.NAV_VISIBILITY_SET,(function(t,e){var r=e.isVisible;t.nav.isVisible=r})),Object(S["a"])(vt,H.ERROR_PAGE_DATA_SET,(function(t,e){var r=e.data;t.errorPage=St({},t.errorPage,{},r)})),Object(S["a"])(vt,H.ERROR_PAGE_DATA_RESET,(function(t){t.errorPage={}})),vt),actions:(ht={},Object(S["a"])(ht,H.CONFIG_LOAD,(function(t){var e=t.commit;t.dispatch,t.getters,t.state;return e(H.LOADING_SET,{target:H.CONFIG_LOAD,loading:!0}),bt.configApi().config().then((function(t){var r=t.data;t.ok;return e(H.LOADING_SET,{target:H.CONFIG_LOAD,loading:!1}),e(H.CONFIG_SET,{config:r}),r})).catch((function(t){throw e(H.LOADING_SET,{target:H.CONFIG_LOAD,loading:!1}),t}))})),Object(S["a"])(ht,H.LANGUAGES_LOAD,(function(t){var e=t.commit;t.dispatch,t.getters;return e(H.LOADING_SET,{target:H.LANGUAGES_LOAD,loading:!0}),bt.webApi().getLanguages().then((function(t){var r=t.data;t.ok;return e(H.LOADING_SET,{target:H.LANGUAGES_LOAD,loading:!1}),e(H.LANGUAGES_SET,{data:r}),r})).catch((function(t){throw e(H.LOADING_SET,{target:H.LANGUAGES_LOAD,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_INFO_LOAD,(function(t,e){Object(Y["a"])(e);var r=t.commit;t.dispatch,t.getters;return r(H.LOADING_SET,{target:H.USER_INFO_LOAD,loading:!0}),bt.accountManager().getUserInfo().then((function(t){var e=t.data;t.ok;return r(H.LOADING_SET,{target:H.USER_INFO_LOAD,loading:!1}),r(H.USER_INFO_SET,{userInfo:e}),e})).catch((function(t){throw r(H.LOADING_SET,{target:H.USER_INFO_LOAD,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_INFO_UPDATE,(function(t,e){var r=e.data,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.USER_INFO_UPDATE,loading:!0}),bt.accountManager().updateUserInfo(r).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.USER_INFO_UPDATE,loading:!1}),a(H.USER_INFO_SET,{userInfo:e}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.USER_INFO_UPDATE,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_INFO_NOTIFICATIONS_UPDATE,(function(t,e){var r=e.data,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.USER_INFO_NOTIFICATIONS_UPDATE,loading:!0}),bt.accountManager().updateUserInfoNotifications(r).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.USER_INFO_NOTIFICATIONS_UPDATE,loading:!1}),a(H.USER_INFO_SET,{userInfo:e}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.USER_INFO_NOTIFICATIONS_UPDATE,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_INFO_TIMEZONE_SET,(function(t,e){var r=e.timeZoneId,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.USER_INFO_TIMEZONE_SET,loading:!0}),bt.accountManager().setUserInfoTimeZone({timeZoneId:r}).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.USER_INFO_TIMEZONE_SET,loading:!1}),a(H.USER_INFO_SET,{userInfo:e}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.USER_INFO_TIMEZONE_SET,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_INFO_CURRENT_COMPANY_SET,(function(t,e){var r=e.companyId,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.USER_INFO_CURRENT_COMPANY_SET,loading:!0}),bt.accountManager().setCurrentUserCompany({companyId:r}).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.USER_INFO_CURRENT_COMPANY_SET,loading:!1}),a(H.USER_INFO_SET,{userInfo:e}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.USER_INFO_CURRENT_COMPANY_SET,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEMS_LOAD,(function(t,e){var r=t.commit,a=(t.dispatch,t.state),n=t.getters;return r(H.LOADING_SET,{target:H.STUDY_ITEMS_LOAD,loading:!0}),bt.webApi().getStudyItems(St({collectionId:n.currentCustomCollectionId},e,{},a.studyItemsRequestParams)).then((function(t){var e=t.data;t.ok;return r(H.LOADING_SET,{target:H.STUDY_ITEMS_LOAD,loading:!1}),r(H.STUDY_ITEMS_SET,{data:e}),e})).catch((function(t){throw r(H.LOADING_SET,{target:H.STUDY_ITEMS_LOAD,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_CREATE,(function(t,e){var r=e.data,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_CREATE,loading:!0}),bt.webApi().createStudyItem({data:r}).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.STUDY_ITEM_CREATE,loading:!1}),a(H.STUDY_ITEM_CREATE_SET,{data:e}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_CREATE,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_UPDATE,(function(t,e){var r=e.studyItemId,a=e.data,n=t.commit;t.dispatch,t.getters;return n(H.LOADING_SET,{target:H.STUDY_ITEM_UPDATE,loading:!0}),bt.webApi().updateStudyItem({studyItemId:r,data:a}).then((function(t){var e=t.data;t.ok;return n(H.LOADING_SET,{target:H.STUDY_ITEM_UPDATE,loading:!1}),n(H.STUDY_ITEM_UPDATE_SET,{data:e}),e})).catch((function(t){throw n(H.LOADING_SET,{target:H.STUDY_ITEM_UPDATE,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_DELETE,(function(t,e){var r=e.studyItemId,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE,loading:!0}),bt.webApi().deleteStudyItem({studyItemId:r}).then((function(t){t.data,t.ok;a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE,loading:!1}),a(H.STUDY_ITEM_DELETE_SET,{studyItemId:r})})).catch((function(t){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_ADD_TO_FAVOURITES,(function(t,e){var r=e.studyItemId,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_ADD_TO_FAVOURITES,loading:!0}),bt.webApi().addStudyItemToFavourites({studyItemId:r}).then((function(t){t.data,t.ok;a(H.LOADING_SET,{target:H.STUDY_ITEM_ADD_TO_FAVOURITES,loading:!1}),a(H.STUDY_ITEM_IS_FAVOURITE_SET,{studyItemId:r,isFavourite:!0})})).catch((function(t){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_ADD_TO_FAVOURITES,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_DELETE_FROM_FAVOURITES,(function(t,e){var r=e.studyItemId,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE_FROM_FAVOURITES,loading:!0}),bt.webApi().deleteStudyItemFromFavourites({studyItemId:r}).then((function(t){t.data,t.ok;a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE_FROM_FAVOURITES,loading:!1}),a(H.STUDY_ITEM_IS_FAVOURITE_SET,{studyItemId:r,isFavourite:!1})})).catch((function(t){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE_FROM_FAVOURITES,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_TRAINING_STATS_LOAD,(function(t,e){var r=t.commit;t.dispatch,t.getters;return r(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_STATS_LOAD,loading:!0}),bt.webApi().getTrainingStatistics().then((function(t){var e=t.data;t.ok;return r(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_STATS_LOAD,loading:!1}),r(H.STUDY_ITEM_TRAINING_STATS_SET,{data:e}),e})).catch((function(t){throw r(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_STATS_LOAD,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_TRAINING_FLASHCARDS_START,(function(t,e){var r=t.commit;t.dispatch,t.getters;return r(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_FLASHCARDS_START,loading:!0}),bt.webApi().flashcardsTrainingStart(St({},e)).then((function(t){var e=t.data;t.ok;return r(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_FLASHCARDS_START,loading:!1}),r(H.STUDY_ITEM_TRAINING_FLASHCARDS_START_SET,{data:e}),e})).catch((function(t){throw r(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_FLASHCARDS_START,loading:!1}),t}))})),Object(S["a"])(ht,H.STUDY_ITEM_TRAINING_FLASHCARDS_SAVE,(function(t,e){var r=e.data,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_FLASHCARDS_SAVE,loading:!0}),bt.webApi().flashcardsTrainingSave({data:r}).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_FLASHCARDS_SAVE,loading:!1}),a(H.STUDY_ITEM_TRAINING_FLASHCARDS_START_SET,{data:null}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_TRAINING_FLASHCARDS_SAVE,loading:!1}),t}))})),Object(S["a"])(ht,H.CUSTOM_COLLECTIONS_LOAD,(function(t,e){var r=t.commit;t.dispatch,t.getters;return r(H.LOADING_SET,{target:H.CUSTOM_COLLECTIONS_LOAD,loading:!0}),bt.webApi().getCustomCollections(e).then((function(t){var e=t.data;t.ok;return r(H.LOADING_SET,{target:H.CUSTOM_COLLECTIONS_LOAD,loading:!1}),r(H.CUSTOM_COLLECTIONS_SET,{data:e}),e})).catch((function(t){throw r(H.LOADING_SET,{target:H.CUSTOM_COLLECTIONS_LOAD,loading:!1}),t}))})),Object(S["a"])(ht,H.CUSTOM_COLLECTION_CREATE,(function(t,e){var r=e.data,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_CREATE,loading:!0}),bt.webApi().createCustomCollection({data:r}).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_CREATE,loading:!1}),a(H.CUSTOM_COLLECTIONS_SET,{data:e}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_CREATE,loading:!1}),t}))})),Object(S["a"])(ht,H.CUSTOM_COLLECTION_UPDATE,(function(t,e){var r=e.customCollectionId,a=e.data,n=t.commit;t.dispatch,t.getters;return n(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_UPDATE,loading:!0}),bt.webApi().updateCustomCollection({customCollectionId:r,data:a}).then((function(t){var e=t.data;t.ok;return n(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_UPDATE,loading:!1}),n(H.CUSTOM_COLLECTIONS_SET,{data:e}),e})).catch((function(t){throw n(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_UPDATE,loading:!1}),t}))})),Object(S["a"])(ht,H.CUSTOM_COLLECTION_DELETE,(function(t,e){var r=e.customCollectionId,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_DELETE,loading:!0}),bt.webApi().deleteCustomCollection({customCollectionId:r}).then((function(t){var e=t.data;t.ok;a(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_DELETE,loading:!1}),a(H.CUSTOM_COLLECTIONS_SET,{data:e})})).catch((function(t){throw a(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_DELETE,loading:!1}),t}))})),Object(S["a"])(ht,H.CUSTOM_COLLECTION_DUPLICATE,(function(t,e){var r=e.customCollectionId,a=e.isDeleteItems,n=t.commit;t.dispatch,t.getters;return n(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_DUPLICATE,loading:!0}),bt.webApi().duplicateCustomCollection({customCollectionId:r,isDeleteItems:a}).then((function(t){var e=t.data;t.ok;n(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_DUPLICATE,loading:!1}),n(H.CUSTOM_COLLECTIONS_SET,{data:e})})).catch((function(t){throw n(H.LOADING_SET,{target:H.CUSTOM_COLLECTION_DUPLICATE,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_FILMS_LOAD,(function(t,e){var r=t.commit,a=(t.dispatch,t.state);t.getters;return r(H.LOADING_SET,{target:H.USER_FILMS_LOAD,loading:!0}),bt.webApi().getUserFilms(St({},e,{},a.userFilmsRequestParams)).then((function(t){var e=t.data;t.ok;return r(H.LOADING_SET,{target:H.USER_FILMS_LOAD,loading:!1}),r(H.USER_FILMS_SET,{data:e}),e})).catch((function(t){throw r(H.LOADING_SET,{target:H.USER_FILMS_LOAD,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_FILM_CREATE,(function(t,e){var r=e.data,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.USER_FILM_CREATE,loading:!0}),bt.webApi().createUserFilm({data:r}).then((function(t){var e=t.data;t.ok;return a(H.LOADING_SET,{target:H.USER_FILM_CREATE,loading:!1}),a(H.USER_FILM_CREATE_SET,{data:e}),e})).catch((function(t){throw a(H.LOADING_SET,{target:H.USER_FILM_CREATE,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_FILM_UPDATE,(function(t,e){var r=e.userFilmId,a=e.data,n=t.commit;t.dispatch,t.getters;return n(H.LOADING_SET,{target:H.USER_FILM_UPDATE,loading:!0}),bt.webApi().updateUserFilm({userFilmId:r,data:a}).then((function(t){var e=t.data;t.ok;return n(H.LOADING_SET,{target:H.USER_FILM_UPDATE,loading:!1}),n(H.USER_FILM_UPDATE_SET,{data:e}),e})).catch((function(t){throw n(H.LOADING_SET,{target:H.USER_FILM_UPDATE,loading:!1}),t}))})),Object(S["a"])(ht,H.USER_FILM_DELETE,(function(t,e){var r=e.userFilmId,a=t.commit;t.dispatch,t.getters;return a(H.LOADING_SET,{target:H.USER_FILM_DELETE,loading:!0}),bt.webApi().deleteUserFilm({userFilmId:r}).then((function(t){t.data,t.ok;a(H.LOADING_SET,{target:H.USER_FILM_DELETE,loading:!1}),a(H.USER_FILM_DELETE_SET,{userFilmId:r})})).catch((function(t){throw a(H.LOADING_SET,{target:H.USER_FILM_DELETE,loading:!1}),t}))})),ht)}),Ot=r("8c4f"),Et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home-wrapper"},[t._v(" Test 1 ")])},Ct=[];function It(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?It(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):It(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var wt={name:"home",components:{},data:function(){return{privateState:{}}},computed:Tt({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Dt=wt,At=Object(w["a"])(Dt,Et,Ct,!1,null,null,null),Rt=At.exports,Mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"error-page-wrapper"},[r("h3",[t._v(t._s(t.title))]),r("p",[t._v(t._s(t.text))]),r("img",{staticClass:"error-image",attrs:{src:"img/error-robot.png",alt:""}})])},jt=[];function Pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Nt={name:"error",data:function(){return{privateState:{}}},computed:Ut({},Object(N["b"])({sharedState:function(t){return t},title:function(t){return t.errorPage.title||"Something went wrong!"},text:function(t){return t.errorPage.text||"Try again or contact support."}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){this.$store.commit(H.ERROR_PAGE_DATA_RESET)}},Lt=Nt,xt=Object(w["a"])(Lt,Mt,jt,!1,null,null,null),kt=xt.exports,Ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"terms-of-use-page-wrapper"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.TERMS_OF_USE_LOAD]}}),t.sharedState.termsOfUse?r("div",[r("div",{domProps:{innerHTML:t._s(t.sharedState.termsOfUse.text)}})]):t._e()],1)},$t=[],Yt=(r("b383"),function(){function t(){Object(L["a"])(this,t)}return Object(x["a"])(t,[{key:"isNetworkError",value:function(t){return t instanceof rt}},{key:"isServerErrorResponse",value:function(t){return!!(t instanceof J&&t.config&&V.a.isObject(t.config)&&t.data&&V.a.isObject(t.data)&&t.headers&&V.a.isObject(t.headers)&&t.request&&V.a.isObject(t.request)&&V.a.isInteger(t.status)&&V.a.isString(t.statusText))}},{key:"showNetworkError",value:function(){n["default"].notify({group:"error",type:"error",title:"Network error",text:"Check your internet connection or try later."})}},{key:"showDefaultError",value:function(){n["default"].notify({group:"error",type:"error",title:":( Opps. Something went wrong...",text:"You can try again or contact support."})}},{key:"showErrorIfServerErrorResponse",value:function(t){if(this.isServerErrorResponse(t)){t.config;var e=t.data,r=(t.header,t.request,t.status,t.statusText,e.errors),a=e.title;if(!r)return;var s=a||"Error",o="Something went wrong. Please try again.",i=Object.keys(r).filter((function(t){return"debugStackTrace"!==t}));if(i.length>0){var c=i.map((function(t,e){if(V.a.isArray(r[t])){var a=r[t].join("<br/>");return"".concat(r[t].length>1&&0!==e?"<br/>":"").concat(a)}return V.a.isString(r[t])?r[t]:""}));o=c.join("<br/>")}n["default"].notify({group:"error",type:"error",title:s,text:o})}}},{key:"showErrorIfServerErrorResponseOrDefaultError",value:function(t){this.isServerErrorResponse(t)?this.showErrorIfServerErrorResponse(t):this.isNetworkError(t)?this.showNetworkError():this.showDefaultError()}}]),t}()),Gt=new Yt,Vt=function(){function t(){Object(L["a"])(this,t)}return Object(x["a"])(t,[{key:"waitAsync",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise((function(e,r){setTimeout((function(){e()}),t)}))}}]),t}(),Ht=new Vt,qt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.visible?r("div",{staticClass:"app-row-loader"},[r("i",{staticClass:"fas fa-circle-notch fa-spin fa-spin--1s fa-3x loader-spinner"})]):t._e()},Zt=[],zt={name:"row-loader",props:{visible:Boolean},components:{},data:function(){return{privateState:{}}},computed:{},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Bt=zt,Wt=Object(w["a"])(Bt,qt,Zt,!1,null,"ce1f76a8",null),Qt=Wt.exports,Kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"btn app-loading-button",class:{"app-loading-button--loading":t.loading},attrs:{type:t.computedType}},[r("span",{staticClass:"button-flex-wrapper"},[r("span",{staticClass:"button-content"},[t._t("default")],2),t.loading?r("span",{staticClass:"loading-icon-wrapper"},[r("i",{staticClass:"fas fa-circle-notch fa-spin fa-spin--1s loading-icon"})]):t._e()])])},Jt=[],Xt={name:"loading-button",props:{type:String,loading:Boolean},components:{},data:function(){return{privateState:{}}},computed:{computedType:function(){return this.type||"button"}},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},te=Xt,ee=Object(w["a"])(te,Kt,Jt,!1,null,"4b084372",null),re=ee.exports;function ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var se={name:"terms-of-use",components:{RowLoader:Qt},data:function(){return{privateState:{storeTypes:H}}},computed:ne({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.sharedState.termsOfUse||this.$store.dispatch(H.TERMS_OF_USE_LOAD,{}).then((function(t){})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){}},oe=se,ie=Object(w["a"])(oe,Ft,$t,!1,null,null,null),ce=ie.exports,le=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ue=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-wrapper"},[r("i",{staticClass:"fas fa-circle-notch fa-spin loader"})])}],de={name:"login",created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Login.vue created"),t.next=3,li.isAuthenticated();case 3:if(t.t0=t.sent,!1!==t.t0){t.next=6;break}li.login();case 6:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){console.log("Login.vue mounted")},updated:function(){console.log("Login.vue updated")},destroyed:function(){console.log("Login.vue destroyed")}},pe=de,me=Object(w["a"])(pe,le,ue,!1,null,null,null),fe=me.exports,ve=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"register-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-4"},[t.globalLoading?r("div",[r("row-loader",{attrs:{visible:t.globalLoading}})],1):t._e(),t.globalLoading?t._e():r("div",["invitation-validating"===t.privateState.currentStep?r("div",[r("div",[t._v(" Validating invitation... ")])]):t._e(),"invitation-invalid"===t.privateState.currentStep?r("div",[r("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" Your invitation is invalid or expired. ")])]):t._e(),"phone-enter"===t.privateState.currentStep?r("div",[t.sharedState.auth.isRegistrationCompleted?t._e():r("div",[r("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t._v(" You should complete registration proccess. ")])]),r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmitPhoneEnterStep(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPhone"}},[t._v("Phone number")]),r("vue-tel-input",{attrs:{mode:"international",disabledFetchingCountry:!1,disabledFormatting:!1,enabledCountryCode:!0,inputClasses:[],enabledFlags:!0,required:!0},model:{value:t.privateState.model.phoneNumber,callback:function(e){t.$set(t.privateState.model,"phoneNumber",e)},expression:"privateState.model.phoneNumber"}}),r("small",{staticClass:"form-text text-muted"},[t._v("Phone number is used for confirmation.")])],1),r("loading-button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.AUTH_REGISTRATION_SMS_TOKEN_SEND]}},[t._v("Next")])],1)]):t._e(),"phone-validate"===t.privateState.currentStep?r("div",[r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmitPhoneValidateStep(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputConfiramtionCode"}},[t._v("Confirmation code")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.model.phoneNumberConfirmationToken,expression:"privateState.model.phoneNumberConfirmationToken"}],staticClass:"form-control",attrs:{type:"text",id:"inputConfiramtionCode","aria-describedby":"confiramtionCodeHelp",placeholder:"Confirmation code"},domProps:{value:t.privateState.model.phoneNumberConfirmationToken},on:{input:function(e){e.target.composing||t.$set(t.privateState.model,"phoneNumberConfirmationToken",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"confiramtionCodeHelp"}},[t._v("Code was sent to "+t._s(t.privateState.model.phoneNumber)+".")])]),r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.goToStep("phone-enter")}}},[t._v("Back")]),t._v(" "),r("loading-button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.AUTH_REGISTRATION_SMS_TOKEN_VALIDATE]}},[t._v("Next")])],1)]):t._e(),"registration-data-enter"===t.privateState.currentStep?r("div",[r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmitRegistrationDataEnterStep(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputEmail"}},[t._v("Email address")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.model.email,expression:"privateState.model.email"}],staticClass:"form-control",attrs:{disabled:t.privateState.isEmailInputDisabled,type:"email",id:"inputEmail","aria-describedby":"emailHelp",placeholder:"Enter email",autocomplete:"username"},domProps:{value:t.privateState.model.email},on:{input:function(e){e.target.composing||t.$set(t.privateState.model,"email",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("Email is your username.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPassword"}},[t._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.model.password,expression:"privateState.model.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword","aria-describedby":"passwordHelp",placeholder:"Password",autocomplete:"new-password"},domProps:{value:t.privateState.model.password},on:{input:function(e){e.target.composing||t.$set(t.privateState.model,"password",e.target.value)}}}),t.registrationInfo&&t.registrationInfo.passwordSuggestions?r("small",{staticClass:"form-text text-muted password-suggestion-list",attrs:{id:"passwordHelp"}},t._l(t.registrationInfo.passwordSuggestions,(function(e){return r("p",{key:e.id,staticClass:"list-item"},[t._v(" "+t._s(e)+" ")])})),0):t._e()]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPasswordConfirm"}},[t._v("Confirm password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.model.passwordConfirm,expression:"privateState.model.passwordConfirm"}],staticClass:"form-control",attrs:{type:"password",id:"inputPasswordConfirm","aria-describedby":"passwordConfirmHelp",placeholder:"Confirm password",autocomplete:"new-password"},domProps:{value:t.privateState.model.passwordConfirm},on:{input:function(e){e.target.composing||t.$set(t.privateState.model,"passwordConfirm",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputName"}},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.model.name,expression:"privateState.model.name"}],staticClass:"form-control",attrs:{type:"text",id:"inputName","aria-describedby":"nameHelp",placeholder:"Enter display name"},domProps:{value:t.privateState.model.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.model,"name",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[t._v("E.g. John Doe.")])]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.model.isAcceptTermsOfUse,expression:"privateState.model.isAcceptTermsOfUse"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inputAcceptTermsOfUse"},domProps:{checked:Array.isArray(t.privateState.model.isAcceptTermsOfUse)?t._i(t.privateState.model.isAcceptTermsOfUse,null)>-1:t.privateState.model.isAcceptTermsOfUse},on:{change:function(e){var r=t.privateState.model.isAcceptTermsOfUse,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.model,"isAcceptTermsOfUse",r.concat([s])):o>-1&&t.$set(t.privateState.model,"isAcceptTermsOfUse",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.model,"isAcceptTermsOfUse",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"inputAcceptTermsOfUse"}},[t._v(" I accept the "),r("router-link",{attrs:{to:{name:"terms-of-use"},target:"_blank"}},[t._v("Terms Of Use")])],1)]),r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){e.preventDefault(),t.goToStep("phone-validate")}}},[t._v("Back")]),t._v(" "),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.AUTH_REGISTER_AS_INTERNAL_USER]}},[t._v("Register")])],1)]):t._e(),"registration-completed"===t.privateState.currentStep?r("div",[r("div",{staticClass:"user-registered-wrapper"},[r("i",{staticClass:"fas fa-user-check user-registered-icon"}),r("h5",[t._v("You have beed registered!")]),r("div",[r("router-link",{attrs:{to:{name:"login"}}},[t._v("Login")]),t._v(" now and start working. ")],1)])]):t._e()])])])])},he=[];r("7db0");function ge(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function be(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ge(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _e={name:"register",components:{RowLoader:Qt,LoadingButton:re},props:{query:{invitationId:String}},data:function(){return{privateState:{storeTypes:H,currentStep:"phone-enter",model:{phoneNumber:"",phoneNumberConfirmationToken:"",email:"",password:"",passwordConfirm:"",name:"",isAcceptTermsOfUse:!1},isEmailInputDisabled:!1}}},computed:be({},Object(N["b"])({sharedState:function(t){return t},registrationInfo:function(t){return t.auth.registrationInfo||null},invitation:function(t){return this.query.invitationId&&t.companyUserInvitation[this.query.invitationId]?t.companyUserInvitation[this.query.invitationId]:null},globalLoading:function(t){return t.loading[H.COMPANY_USER_INVITATION_VALIDATE]||t.loading[H.COMPANY_USER_INVITATION_LOAD]||t.loading[H.AUTH_PREREGISTRATION_USER_LOAD]||t.loading[H.AUTH_REGISTRATION_TOKENS_REFRESH]}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,this.query.invitationId&&(this.privateState.currentStep="invitation-validating",this.$store.dispatch(H.COMPANY_USER_INVITATION_VALIDATE,{invitationId:this.query.invitationId}).then((function(t){!0===t?(r.privateState.currentStep="phone-enter",r.$store.dispatch(H.COMPANY_USER_INVITATION_LOAD,{invitationId:r.query.invitationId}).then((function(t){e.privateState.model.email=t.email,e.privateState.isEmailInputDisabled=!0})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))):r.privateState.currentStep="invitation-invalid"})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))),this.query.preRegistrationUserId&&this.$store.dispatch(H.AUTH_PREREGISTRATION_USER_LOAD,{preRegistrationUserId:this.query.preRegistrationUserId}).then((function(t){t?(e.privateState.model.phoneNumber=(t.claims.find((function(t){return"phone_number"===t.type}))||{}).value||e.privateState.model.phoneNumber,e.privateState.model.email=(t.claims.find((function(t){return"email"===t.type}))||{}).value||e.privateState.model.email,e.privateState.model.name=(t.claims.find((function(t){return"name"===t.type}))||{}).value||e.privateState.model.name):r.handleAfterRegistrationForExternalUser()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.$store.dispatch(H.AUTH_REGISTRATION_INFO_LOAD,{}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{goToStep:function(t){this.privateState.currentStep=t},onSubmitPhoneEnterStep:function(t){var e=this;console.log("onSubmitPhoneEnterStep. model - ",this.privateState.model),this.$store.dispatch(H.AUTH_REGISTRATION_SMS_TOKEN_SEND,{phoneNumber:this.privateState.model.phoneNumber,preRegistrationUserId:this.query.preRegistrationUserId||null}).then((function(){e.privateState.currentStep="phone-validate"})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onSubmitPhoneValidateStep:function(t){var e=this;console.log("onSubmitPhoneValidateStep. model - ",this.privateState.model),this.$store.dispatch(H.AUTH_REGISTRATION_SMS_TOKEN_VALIDATE,{phoneNumber:this.privateState.model.phoneNumber,token:this.privateState.model.phoneNumberConfirmationToken,preRegistrationUserId:this.query.preRegistrationUserId||null}).then((function(t){t?e.privateState.currentStep="registration-data-enter":e.$notify({group:"error",type:"error",title:"Invalid phone confirmation code",text:""})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onSubmitRegistrationDataEnterStep:function(t){var e=this;console.log("onSubmitRegistrationDataEnterStep. model - ",this.privateState.model);var r=be({},this.privateState.model,{clientId:this.sharedState.config.clientAuth.clientId,invitationId:this.query.invitationId||null,preRegistrationUserId:this.query.preRegistrationUserId||null});this.$store.dispatch(H.AUTH_REGISTER_AS_INTERNAL_USER,{user:r}).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.query.preRegistrationUserId?e.handleAfterRegistrationForExternalUser():e.privateState.currentStep="registration-completed";case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},handleAfterRegistrationForExternalUser:function(){var t=this;this.query.preRegistrationUserId&&(this.$notify({group:"app",type:"success",title:"You have beed registered!",text:"Logging you in..."}),this.$store.commit(H.LOADING_SET,{target:H.AUTH_REGISTRATION_TOKENS_REFRESH,loading:!0}),li.refreshTokens({withFullscreenLoader:!0}).then((function(){t.$router.push({name:"dashboard-home"}),t.$store.commit(H.LOADING_SET,{target:H.AUTH_REGISTRATION_TOKENS_REFRESH,loading:!1})})).catch((function(e){console.error(e),t.$store.commit(H.LOADING_SET,{target:H.AUTH_REGISTRATION_TOKENS_REFRESH,loading:!1}),t.$notify({group:"error",type:"error",title:"Can't login after registration.",text:"Try to refresh the page."})})))}}},Se=_e,ye=Object(w["a"])(Se,ve,he,!1,null,null,null),Oe=ye.exports,Ee=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ce=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"logout-wrapper"},[r("i",{staticClass:"fas fa-circle-notch fa-spin loader"})])}],Ie={name:"logout",created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Logout.vue created"),li.logout();case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){console.log("Logout.vue mounted")},updated:function(){console.log("Logout.vue updated")},destroyed:function(){console.log("Logout.vue destroyed")}},Te=Ie,we=Object(w["a"])(Te,Ee,Ce,!1,null,null,null),De=we.exports,Ae=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dashboard-wrapper"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.STUDY_ITEM_TRAINING_STATS_LOAD]}}),r("custom-collections"),r("div",{staticClass:"mb-2"},[t.trainingStats?r("div",[r("div",{staticClass:"card mb-4"},[r("div",{staticClass:"card-body"},[r("h4",[t._v("Training stats")]),r("hr"),r("div",{staticClass:"d-flex mb-3"},[r("div",{staticClass:"h5"},[r("span",[t._v("Total")]),r("span",{staticClass:"badge badge-secondary ml-1"},[t._v(t._s(t.trainingStats.totalItemCount))])]),r("div",{staticClass:"h5 ml-2"},[r("span",[t._v("Trained")]),r("span",{staticClass:"badge badge-success ml-1"},[t._v(t._s(t.trainingStats.trainedItemCount))])]),r("div",{staticClass:"h5 ml-2"},[r("span",[t._v("On training")]),r("span",{staticClass:"badge badge-info ml-1"},[t._v(t._s(t.trainingStats.onTrainingItemCount))])])]),r("div",[r("ul",t._l(t.trainingStats.trainingStats,(function(e){return r("li",{key:"key-training-"+e.trainingType},[r("span",{staticClass:"badge badge-secondary"},[t._v(t._s(e.trainingTypeFormatted))]),r("span",{staticClass:"ml-1"},[r("span",[t._v("Trained")]),r("span",{staticClass:"badge badge-success ml-1"},[t._v(t._s(e.trainedItemCount))])]),r("span",{staticClass:"ml-1"},[r("span",[t._v("On training")]),r("span",{staticClass:"badge badge-info ml-1"},[t._v(t._s(e.onTrainingItemCount))])])])})),0)])])])]):t._e()]),r("div",{staticClass:"app-card-nav"},[r("div",{staticClass:"app-card-nav-item",style:{"background-image":"url(img/app-card-nav/icons8-browse-folder-96.png)"}},[r("router-link",{staticClass:"app-card-nav-link",attrs:{to:{name:"study-items-browse",params:{}}}},[r("span",[t._v("Browse items")])])],1),r("div",{staticClass:"app-card-nav-item",style:{"background-image":"url(img/app-card-nav/icons8-red-card-80.png)"}},[r("router-link",{staticClass:"app-card-nav-link",attrs:{to:{name:"study-items-learn-falshcards",params:{}}}},[r("span",[t._v("Flash cards")])])],1),r("div",{staticClass:"app-card-nav-item",style:{"background-image":"url(img/app-card-nav/icons8-rich-text-converter-96.png)"}},[r("router-link",{staticClass:"app-card-nav-link",attrs:{to:{name:"study-items-learn-falshcards",params:{}}}},[r("span",[t._v("Word meaning")])])],1),r("div",{staticClass:"app-card-nav-item",style:{"background-image":"url(img/app-card-nav/icons8-dictionary-64.png)"}},[r("router-link",{staticClass:"app-card-nav-link",attrs:{to:{name:"study-items-learn-falshcards",params:{}}}},[r("span",[t._v("Meaning of a word")])])],1)])],1)},Re=[],Me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.sharedState.customCollectionsResult?r("div",[r("folder-tree-view",{attrs:{treeItem:t.customCollectionsTree,activeTreeItemId:t.$store.getters.currentCustomCollectionId,onFolderClick:t.onFolderClick,onCreateFolder:t.onCreateFolder,onUpdateFolder:t.onUpdateFolder,onCreateFolderItem:t.onCreateFolderItem,onDuplicateFolder:t.onDuplicateFolder,onDeleteFolder:t.onDeleteFolder}}),r("modal",{attrs:{name:"custom-collection-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},["create"===t.privateState.modalMode?r("span",[t._v("Create collection")]):t._e(),"edit"===t.privateState.modalMode?r("span",[t._v("Edit collection")]):t._e()]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("custom-collection-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createEditCustomCollection(t.privateState.modalMode)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"customCollectionModel__name"}},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.customCollectionModel.name,expression:"privateState.customCollectionModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"customCollectionModel__name",placeholder:"Name"},domProps:{value:t.privateState.customCollectionModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.customCollectionModel,"name",e.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.CUSTOM_COLLECTION_CREATE]||t.sharedState.loading[t.privateState.storeTypes.CUSTOM_COLLECTION_UPDATE]}},[t._v("Save")])],1)])])]),r("modal",{attrs:{name:"custom-collection-delete",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[r("span",[t._v("Delete collection")])]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("custom-collection-delete")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.deleteCustomCollection(t.privateState.modalMode)}}},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.customCollectionDeleteModel.isDeleteItems,expression:"privateState.customCollectionDeleteModel.isDeleteItems"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"customCollectionDeleteModel_isDeleteItems",id:"customCollectionDeleteModel_isDeleteItems"},domProps:{checked:Array.isArray(t.privateState.customCollectionDeleteModel.isDeleteItems)?t._i(t.privateState.customCollectionDeleteModel.isDeleteItems,null)>-1:t.privateState.customCollectionDeleteModel.isDeleteItems},on:{change:function(e){var r=t.privateState.customCollectionDeleteModel.isDeleteItems,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.customCollectionDeleteModel,"isDeleteItems",r.concat([s])):o>-1&&t.$set(t.privateState.customCollectionDeleteModel,"isDeleteItems",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.customCollectionDeleteModel,"isDeleteItems",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"customCollectionDeleteModel_isDeleteItems"}},[t._v(" Move items to parent collection ")]),r("small",{staticClass:"form-text text-muted"},[t._v("If not checked the items in collection will be deleted.")])]),r("loading-button",{staticClass:"btn btn-outline-danger btn-block mt-3",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.CUSTOM_COLLECTION_DELETE]}},[t._v("Delete")])],1)])])])],1):t._e()},je=[],Pe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.treeItem?r("ul",{staticClass:"folder-tree-view",class:{"folder-tree-view--root":t.treeItem.isRoot}},[r("li",[r("div",{staticClass:"tree-item",class:{"font-weight-bold":!1}},[t.hasChildren?r("span",{staticClass:"tree-item-toggle mr-1",on:{click:t.toggle}},[t.privateState.isOpen?t._e():r("i",{staticClass:"fas fa-chevron-down"}),t.privateState.isOpen?r("i",{staticClass:"fas fa-chevron-up"}):t._e()]):t._e(),r("span",{staticClass:"tree-item-name",on:{click:function(e){return t.folderClicked(t.treeItem)}}},[t.hasChildren?r("i",{staticClass:"fas fa-folder mr-1"}):t._e(),t.hasChildren?t._e():r("i",{staticClass:"far fa-folder mr-1"}),r("span",{class:{"font-weight-bold":t.treeItem.id===t.activeTreeItemId}},[t._v(" "+t._s(t.treeItem.name)+" ")])]),r("span",{staticClass:"dropdown ml-2"},[t._m(0),r("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuLink"}},[r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.createFolder(t.treeItem)}}},[r("i",{staticClass:"fas fa-folder-plus text-secondary mr-1",staticStyle:{width:"20px"}}),r("span",[t._v("Create collection")])]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.updateFolder(t.treeItem)}}},[r("i",{staticClass:"fas fa-edit text-secondary mr-1",staticStyle:{width:"20px"}}),r("span",[t._v("Edit collection")])]),r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.createFolderItem(t.treeItem)}}},[r("i",{staticClass:"fas fa-plus-square text-secondary mr-1",staticStyle:{width:"20px"}}),r("span",[t._v("Add item")])]),t.treeItem.isRoot?t._e():r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.duplicateFolder(t.treeItem)}}},[r("i",{staticClass:"far fa-copy text-secondary mr-1",staticStyle:{width:"20px"}}),r("span",[t._v("Duplicate collection")])]),t.treeItem.isRoot?t._e():r("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(e){return t.deleteFolder(t.treeItem)}}},[r("i",{staticClass:"fas fa-folder-minus text-secondary mr-1",staticStyle:{width:"20px"}}),r("span",[t._v("Delete collection")])])])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.privateState.isOpen,expression:"privateState.isOpen"}]},t._l(t.treeItem.children,(function(e){return r("folder-tree-view",{key:e.id,attrs:{treeItem:e,activeTreeItemId:t.$store.getters.currentCustomCollectionId,onFolderClick:t.folderClicked,onCreateFolder:t.createFolder,onUpdateFolder:t.updateFolder,onCreateFolderItem:t.createFolderItem,onDuplicateFolder:t.duplicateFolder,onDeleteFolder:t.deleteFolder}})})),1)])]):t._e()},Ue=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("a",{staticClass:"dropdown-toggle text-secondary",attrs:{href:"#",role:"button",id:"dropdownMenuLink","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("i",{staticClass:"fas fa-sliders-h"})])}];function Ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var xe={name:"folder-tree-view",props:{treeItem:{type:Object,required:!0},activeTreeItemId:{required:!1,default:null},onFolderClick:{type:Function,required:!1,default:null},onCreateFolder:{type:Function,required:!1,default:null},onUpdateFolder:{type:Function,required:!1,default:null},onCreateFolderItem:{type:Function,required:!1,default:null},onDuplicateFolder:{type:Function,required:!1,default:null},onDeleteFolder:{type:Function,required:!1,default:null}},components:{},data:function(){return{privateState:{storeTypes:H,isOpen:!1}}},computed:Le({hasChildren:function(){return this.treeItem.children&&this.treeItem.children.length>0}},Object(N["b"])({sharedState:function(t){return t}})),created:function(){this.treeItem&&(this.privateState.isOpen=!0===this.treeItem.isRoot)},mounted:function(){},updated:function(){},destroyed:function(){},methods:{toggle:function(){this.privateState.isOpen=!this.privateState.isOpen},folderClicked:function(t){this.onFolderClick&&this.onFolderClick(t)},createFolder:function(t){this.onCreateFolder&&this.onCreateFolder(t)},updateFolder:function(t){this.onUpdateFolder&&this.onUpdateFolder(t)},createFolderItem:function(t){this.onCreateFolderItem&&this.onCreateFolderItem(t)},duplicateFolder:function(t){this.onDuplicateFolder&&this.onDuplicateFolder(t)},deleteFolder:function(t){this.onDeleteFolder&&this.onDeleteFolder(t)}}},ke=xe,Fe=Object(w["a"])(ke,Pe,Ue,!1,null,"0c48d744",null),$e=Fe.exports;function Ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ge(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ve={name:null,parentCollectionId:null},He={customCollectionId:null,isDeleteItems:null},qe={name:"custom-collections",props:{onSelectedCollectionChange:{type:Function,required:!1,default:null}},components:{LoadingButton:re,FolderTreeView:$e},data:function(){return{privateState:{storeTypes:H,customCollectionModel:V.a.cloneDeep(Ve),customCollectionDeleteModel:V.a.cloneDeep(He),modalMode:"create"}}},computed:Ge({},Object(N["b"])({sharedState:function(t){return t},customCollectionsTree:function(t){return t.customCollectionsResult.asTree},customCollectionsList:function(t){return t.customCollectionsResult.asList}})),created:function(){this.$store.dispatch(H.CUSTOM_COLLECTIONS_LOAD,{}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},mounted:function(){},updated:function(){},destroyed:function(){},methods:{onFolderClick:function(t){this.onSelectedCollectionChange&&this.onSelectedCollectionChange(t.id),this.$store.commit(H.CUSTOM_COLLECTION_CURRENT_SET,{customCollection:t})},onCreateFolder:function(t){this.privateState.modalMode="create",this.privateState.customCollectionModel.parentCollectionId=t.id,this.$modal.show("custom-collection-edit")},onUpdateFolder:function(t){this.privateState.modalMode="edit";var e=this.customCollectionsList.find((function(e){return e.id===t.id}));this.privateState.customCollectionModel=Ge({id:e.id},e),this.$modal.show("custom-collection-edit")},onCreateFolderItem:function(t){},onDuplicateFolder:function(t){var e=this;this.$store.dispatch(H.CUSTOM_COLLECTION_DUPLICATE,{customCollectionId:t.id}).then((function(){e.$notify({group:"app",type:"success",title:"Collection has been duplicated!",text:"",duration:5e3})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onDeleteFolder:function(t){this.privateState.customCollectionDeleteModel={customCollectionId:t.id,isDeleteItems:!1},this.$modal.show("custom-collection-delete")},createEditCustomCollection:function(t){"create"===t?this.createCustomCollection():"edit"===t&&this.updateCustomCollection()},createCustomCollection:function(){var t=this;this.$store.dispatch(H.CUSTOM_COLLECTION_CREATE,{data:Ge({},this.privateState.customCollectionModel)}).then((function(){t.$notify({group:"app",type:"success",title:"Collection '".concat(t.privateState.customCollectionModel.name,"' has been created!"),text:"",duration:5e3}),t.$modal.hide("custom-collection-edit"),t.privateState.customCollectionModel=V.a.cloneDeep(Ve)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},updateCustomCollection:function(){var t=this;this.$store.dispatch(H.CUSTOM_COLLECTION_UPDATE,{customCollectionId:this.privateState.customCollectionModel.id,data:Ge({},this.privateState.customCollectionModel)}).then((function(){t.$notify({group:"app",type:"success",title:"Collection '".concat(t.privateState.customCollectionModel.name,"' has been updated!"),text:"",duration:5e3}),t.$modal.hide("custom-collection-edit"),t.privateState.customCollectionModel=V.a.cloneDeep(Ve)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteCustomCollection:function(){var t=this;this.$store.dispatch(H.CUSTOM_COLLECTION_DELETE,{customCollectionId:this.privateState.customCollectionDeleteModel.customCollectionId,isDeleteItems:this.privateState.customCollectionDeleteModel.isDeleteItems}).then((function(){t.$notify({group:"app",type:"success",title:"Collection has been deleted!",text:"",duration:5e3}),t.$modal.hide("custom-collection-delete"),t.privateState.customCollectionDeleteModel=V.a.cloneDeep(He)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Ze=qe,ze=Object(w["a"])(Ze,Me,je,!1,null,"037d1dee",null),Be=ze.exports;function We(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Qe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?We(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):We(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ke={name:"study-items-dashboard",components:{RowLoader:Qt,CustomCollections:Be},data:function(){return{privateState:{storeTypes:H}}},computed:Qe({},Object(N["b"])({sharedState:function(t){return t},trainingStats:function(t){return t.trainingStats}})),created:function(){this.loadTrainingsStats()},mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadTrainingsStats:function(){return this.$store.dispatch(H.STUDY_ITEM_TRAINING_STATS_LOAD,{}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Je=Ke,Xe=Object(w["a"])(Je,Ae,Re,!1,null,null,null),tr=Xe.exports,er=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",[r("custom-collections",{attrs:{onSelectedCollectionChange:t.onSelectedCollectionChange}})],1),t.studyItems?r("div",{staticClass:"study-items-wrapper"},[r("h5",{staticClass:"mb-3"},[t._v("Study items:")]),r("div",{staticClass:"btn-toolbar mb-3",attrs:{role:"toolbar","aria-label":"Toolbar with button groups"}},[r("div",{staticClass:"btn-group mr-2",attrs:{role:"group","aria-label":"View toggle"}},[r("button",{staticClass:"btn",class:{"btn-primary":"list"===t.privateState.currentView,"btn-secondary":"list"!==t.privateState.currentView},attrs:{type:"button"},on:{click:t.toggleView}},[r("i",{staticClass:"fas fa-list"})]),r("button",{staticClass:"btn",class:{"btn-primary":"cards"===t.privateState.currentView,"btn-secondary":"cards"!==t.privateState.currentView},attrs:{type:"button"},on:{click:t.toggleView}},[r("i",{staticClass:"fas fa-th"})])]),r("div",{staticClass:"btn-group mr-2",attrs:{role:"group","aria-label":"Create a new item"}},[r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.onCreateStudyItem}},[r("i",{staticClass:"fas fa-plus"})])])]),r("study-items-filters",{attrs:{onChange:t.loadStudyItems}}),r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.STUDY_ITEMS_LOAD]}}),r("div",[r("pagination-wrapper",{attrs:{paginationResult:t.sharedState.studyItemsPaginationResult,loadItemsF:t.loadStudyItems,showGoToButtons:!0}},["list"===t.privateState.currentView?r("div",{staticClass:"list-group study-items-list"},t._l(t.studyItems,(function(e){return r("a",{key:"list-"+e.id,staticClass:"list-group-item list-group-item-action flex-column align-items-start study-item",attrs:{href:"#"}},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("h6",{staticClass:"mb-1"},[t._v(t._s(e.title))]),r("div",[r("span",{staticClass:"badge badge-info mr-1"},[t._v(t._s(e.languageCode))]),t._l(e.tags,(function(e){return r("span",{key:e,staticClass:"badge badge-secondary mr-1"},[t._v(t._s(e))])})),r("span",{staticClass:"cursor-pointer",on:{click:function(r){return t.onStudyItemFavoriteClick(e)}}},[e.isFavourite?r("i",{staticClass:"fas fa-star text-warning"}):r("i",{staticClass:"far fa-star text-warning"})]),r("span",{staticClass:"ml-2 mr-2"},[t._v("|")]),r("span",[r("span",{staticClass:"badge badge-secondary mr-1 cursor-pointer",on:{click:function(r){return t.onUpdateStudyItem(e.id)}}},[r("i",{staticClass:"fas fa-pencil-alt"})]),r("span",{staticClass:"badge badge-secondary cursor-pointer",on:{click:function(r){return t.onDeleteStudyItem(e.id)}}},[r("i",{staticClass:"fas fa-times"})])])],2)]),r("div",[r("small",[t._v(t._s(e.description))])]),r("div",{staticClass:"text-secondary"},t._l(e.exampleTexts,(function(a,n){return r("div",{key:"card-"+e.id+"-exampleText-"+n},[r("small",[r("em",[t._v(t._s(a))])])])})),0)])})),0):t._e(),"cards"===t.privateState.currentView?r("div",{staticClass:"items-card-list"},t._l(t.studyItems,(function(e){return r("div",{key:"card-"+e.id,staticClass:"card bg-light item-card"},[e.image?r("img",{staticClass:"card-img-top item-card-image",attrs:{src:e.image.url,alt:e.title}}):r("img",{staticClass:"card-img-top item-card-image",attrs:{src:"/img/empty-image.png"}}),r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("span",[t._v(t._s(e.title))])])]),r("div",{staticClass:"card-text small mb-1"},[r("div",[t._v(t._s(e.description))])]),r("div",{staticClass:"card-text text-secondary mb-1"},t._l(e.exampleTexts,(function(a,n){return r("div",{key:"card-"+e.id+"-exampleText-"+n},[r("small",[r("em",[t._v(t._s(a))])])])})),0),r("div",{staticClass:"card-text"},[r("span",{staticClass:"badge badge-info mr-1"},[t._v(t._s(e.languageCode))]),t._l(e.tags,(function(e){return r("span",{key:e,staticClass:"badge badge-secondary mr-1"},[t._v(t._s(e))])}))],2)]),r("div",{staticClass:"card-bottom-controls"},[r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return t.onStudyItemFavoriteClick(e)}}},[e.isFavourite?r("i",{staticClass:"fas fa-star text-warning"}):r("i",{staticClass:"far fa-star text-warning"})]),r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return t.onUpdateStudyItem(e.id)}}},[r("i",{staticClass:"fas fa-pencil-alt"})]),r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return t.onDeleteStudyItem(e.id)}}},[r("i",{staticClass:"fas fa-times"})])])])})),0):t._e()])],1)],1):t._e(),r("modal",{attrs:{name:"study-item-create-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},["create"===t.privateState.modalMode?r("span",[t._v("Create item")]):t._e(),"edit"===t.privateState.modalMode?r("span",[t._v("Edit item")]):t._e()]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("study-item-create-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createEditStudyItem(t.privateState.modalMode)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"studyItemModel__title"}},[t._v("Title")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.studyItemModel.title,expression:"privateState.studyItemModel.title"}],staticClass:"form-control",attrs:{type:"text",id:"studyItemModel__title",placeholder:"Title"},domProps:{value:t.privateState.studyItemModel.title},on:{input:function(e){e.target.composing||t.$set(t.privateState.studyItemModel,"title",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"studyItemModel__description"}},[t._v("Description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.privateState.studyItemModel.description,expression:"privateState.studyItemModel.description"}],staticClass:"form-control",attrs:{type:"text",id:"studyItemModel__description",placeholder:"Description"},domProps:{value:t.privateState.studyItemModel.description},on:{input:function(e){e.target.composing||t.$set(t.privateState.studyItemModel,"description",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"studyItemModel__exampleText"}},[t._v("Example text")]),t._l(t.privateState.studyItemModel.exampleTexts,(function(e,a){return r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.privateState.studyItemModel.exampleTexts[a],expression:"privateState.studyItemModel.exampleTexts[exampleTextIndex]"}],key:"study-item-exampleText-"+a,staticClass:"form-control mb-1",attrs:{placeholder:"Example text "+(a+1),type:"text",id:"studyItemModel__exampleText"},domProps:{value:t.privateState.studyItemModel.exampleTexts[a]},on:{input:function(e){e.target.composing||t.$set(t.privateState.studyItemModel.exampleTexts,a,e.target.value)}}})})),t._v(" "),r("div",{staticClass:"btn-group",attrs:{role:"group"}},[r("button",{staticClass:"btn btn-secondary mr-0",attrs:{type:"button"},on:{click:t.onAddStudyItemExampleText}},[r("i",{staticClass:"fas fa-plus"})]),r("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.onRemoveStudyItemExampleText}},[r("i",{staticClass:"fas fa-minus"})])])],2),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.studyItemModel.isFavourite,expression:"privateState.studyItemModel.isFavourite"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"studyItemModel__isFavourite"},domProps:{checked:Array.isArray(t.privateState.studyItemModel.isFavourite)?t._i(t.privateState.studyItemModel.isFavourite,null)>-1:t.privateState.studyItemModel.isFavourite},on:{change:function(e){var r=t.privateState.studyItemModel.isFavourite,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.studyItemModel,"isFavourite",r.concat([s])):o>-1&&t.$set(t.privateState.studyItemModel,"isFavourite",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.studyItemModel,"isFavourite",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"studyItemModel__isFavourite"}},[t._v(" Favourite ")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Language")]),r("language-code-select",{model:{value:t.privateState.studyItemModel.languageCode,callback:function(e){t.$set(t.privateState.studyItemModel,"languageCode",e)},expression:"privateState.studyItemModel.languageCode"}})],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Tags")]),r("tags-multiselect",{model:{value:t.privateState.studyItemModel.tags,callback:function(e){t.$set(t.privateState.studyItemModel,"tags",e)},expression:"privateState.studyItemModel.tags"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.STUDY_ITEM_CREATE]||t.sharedState.loading[t.privateState.storeTypes.STUDY_ITEM_UPDATE]}},[t._v("Save")])],1)])])])],1)])])},rr=[],ar=r("7f45"),nr=r.n(ar),sr=function(){function t(){Object(L["a"])(this,t)}return Object(x["a"])(t,[{key:"formatToISO",value:function(t){var e="YYYY-MM-DDTHH:mm:ssZ";return nr()(t).format(e)}},{key:"_getInUserTimeZoneOrUTC",value:function(t){return this.userTimeZoneId?(console.log(this.userTimeZoneId),nr()(t).tz(this.userTimeZoneId)):nr()(t).utcOffset(0)}},{key:"getInDateInUTC",value:function(t){return nr()(t).utcOffset(0).format("YYYY-MM-DD")}},{key:"getInTimeInUTC",value:function(t){return nr()(t).utcOffset(0).format("HH:mm")}},{key:"formatInUserTimeZone",value:function(t){return this._getInUserTimeZoneOrUTC(t).format()}},{key:"formatToUserDisplayTime",value:function(t){var e=((yt.userInfo||{}).formatSettings||{}).timeFormat||"HH:mm";return this._getInUserTimeZoneOrUTC(t).format(e)}},{key:"formatToUserDisplayDate",value:function(t){var e=((yt.userInfo||{}).formatSettings||{}).dateFormat||"YYYY-MM-DD";return this._getInUserTimeZoneOrUTC(t).format(e)}},{key:"formatToUserDisplayDateTime",value:function(t){var e=((yt.userInfo||{}).formatSettings||{}).dateTimeFormat||"YYYY-MM-DD HH:mm";return this._getInUserTimeZoneOrUTC(t).format(e)}},{key:"formatToDefaultDisplayShortDateTimeInWeek",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var e="ddd HH:mm";return this._getInUserTimeZoneOrUTC(t).format(e)}},{key:"formatToDefaultDisplayShortDateTimeInMonth",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var e="MMM Do HH:mm";return this._getInUserTimeZoneOrUTC(t).format(e)}},{key:"formatAccordingToInterval",value:function(t,e,r){var a=nr.a.duration(this._getInUserTimeZoneOrUTC(r).diff(this._getInUserTimeZoneOrUTC(e))),n=a.asHours(),s=a.asDays(),o=a.asMonths();return n<=24?this.formatToUserDisplayTime(t):s<=7?this.formatToDefaultDisplayShortDateTimeInWeek(t):o<=1?this.formatToDefaultDisplayShortDateTimeInMonth(t):this.formatToUserDisplayDateTime(t)}},{key:"userTimeZoneId",get:function(){return yt.state.userInfo&&yt.state.userInfo.timeZone&&yt.state.userInfo.timeZone.timeZoneId?yt.state.userInfo.timeZone.timeZoneId:null}}]),t}(),or=new sr,ir=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-pagination-wrapper"},[r("div",{attrs:{id:t.scrollTopElId}}),t.showGoToButtons?r("div",{staticClass:"scroll-to-button",on:{click:t.scrollBottom}},[r("i",{staticClass:"fas fa-angle-double-down"})]):t._e(),t._t("default"),t.showGoToButtons?r("div",{staticClass:"scroll-to-button",on:{click:t.scrollTop}},[r("i",{staticClass:"fas fa-angle-double-up"})]):t._e(),0!==t.pageCount?r("div",{staticClass:"d-flex justify-content-center mt-4"},[r("paginate",{attrs:{"page-count":t.pageCount,"page-range":3,"margin-pages":2,"click-handler":t.pageChangeCallback,"prev-text":"Prev","next-text":"Next","container-class":"app-pagination","page-class":"page-item","page-link-class":"page-item-link","prev-class":"page-item","prev-link-class":"page-item-link","next-class":"page-item","next-link-class":"page-item-link","break-view-class":"break-view","break-view-link-class":"break-view-link","active-class":"page-item-active","disabled-class":"page-item-disabled","first-last-button":!0,"first-button-text":"First","last-button-text":"Last","hide-prev-next":!1},model:{value:t.privateState.currentPage,callback:function(e){t.$set(t.privateState,"currentPage",e)},expression:"privateState.currentPage"}})],1):t._e(),r("div",{attrs:{id:t.scrollBottomElId}})],2)},cr=[],lr={name:"pagination-wrapper",props:{paginationResult:Object,loadItemsF:Function,onPageChanged:Function,showGoToButtons:{type:Boolean,required:!1,default:!1}},components:{},data:function(){return{privateState:{currentPage:1,scrollRequired:!1}}},computed:{scrollTopElId:function(){return"paginationTop_".concat(this._uid||+new Date)},scrollBottomElId:function(){return"paginationBottom_".concat(this._uid||+new Date)},pageCount:function(){return this.paginationResult?Math.ceil(this.paginationResult.pagination.totalCount/this.pageSize):0},pageSize:function(){return this.paginationResult?this.paginationResult.pagination.limit:100}},created:function(){},mounted:function(){},updated:function(){this.$nextTick((function(){}))},destroyed:function(){},methods:{pageChangeCallback:function(t){console.log(this.$el.sele),this.onPageChanged&&this.onPageChanged(t);var e=this.pageSize,r=Math.max(this.privateState.currentPage-1,0)*e;this.scrollTo(),this.loadItemsF({offset:r,limit:e}).then((function(){}))},scrollTo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",e="#".concat("top"===t?this.scrollTopElId:this.scrollBottomElId);this.$scrollTo(e)},scrollBottom:function(){this.$scrollTo("#".concat(this.scrollBottomElId))},scrollTop:function(){this.$scrollTo("#".concat(this.scrollTopElId))}}},ur=lr,dr=Object(w["a"])(ur,ir,cr,!1,null,"429c99f0",null),pr=dr.exports,mr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("multiselect",{attrs:{options:t.languageList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,"custom-label":t.languageLabel,"track-by":"iso639_1_Code",placeholder:"Select language",loading:t.isLoading,disabled:!1},on:{input:t.onInput},model:{value:t.privateState.selectedLanguageOption,callback:function(e){t.$set(t.privateState,"selectedLanguageOption",e)},expression:"privateState.selectedLanguageOption"}})},fr=[];function vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function hr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vr(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var gr={name:"language-code-select",props:{value:{required:!0,default:null}},components:{},data:function(){return{privateState:{storeTypes:H,selectedLanguageOption:null}}},computed:hr({},Object(N["b"])({sharedState:function(t){return t},isLoading:function(t){return t.loading[H.LANGUAGES_LOAD]},languageList:function(t){return t.languages||[]}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,null==e.sharedState.languageList&&e.$store.dispatch(H.LANGUAGES_LOAD,{}).then((function(){e.preselectLanguage()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),e.preselectLanguage();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{preselectLanguage:function(){var t=this;this.value&&this.languageList&&(this.privateState.selectedLanguageOption=this.languageList.find((function(e){return e.iso639_1_Code===t.value}))||null)},languageLabel:function(t){return"".concat(t.iso639_1_Code," - ").concat(t.isoLanguageName," (").concat(t.nativeName,")")},onInput:function(t,e){t.isoLanguageName;var r=t.iso639_1_Code;this.$emit("input",r)}}},br=gr,_r=Object(w["a"])(br,mr,fr,!1,null,"320565e7",null),Sr=_r.exports,yr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("multiselect",{attrs:{"tag-placeholder":"Add this as new tag",placeholder:t.placeholder,label:"name","track-by":"id",options:t.privateState.options,multiple:!0,searchable:!0,taggable:!0},on:{input:t.onInput,tag:t.addTag},model:{value:t.privateState.selectedTags,callback:function(e){t.$set(t.privateState,"selectedTags",e)},expression:"privateState.selectedTags"}})},Or=[],Er=r("2909");function Cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ir(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cr(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Tr={name:"tags-multiselect",props:{value:{required:!0,default:[]},placeholder:{type:String,required:!1,default:"Search or add a tag"}},components:{},data:function(){return{privateState:{storeTypes:H,options:[],selectedTags:[]}}},computed:Ir({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this,this.value&&Array.isArray(this.value)&&(e=this.value.map((function(t){return{id:t.substring(0,2)+"_"+Math.floor(1e7*Math.random()),name:t}})),this.privateState.options=Object(Er["a"])(e),this.privateState.selectedTags=Object(Er["a"])(e));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{onInput:function(t,e){var r=t;this.$emit("input",r.map((function(t){return t.name})))},addTag:function(t){var e={id:t.substring(0,2)+"_"+Math.floor(1e7*Math.random()),name:t};this.privateState.options.push(e),this.privateState.selectedTags.push(e),this.onInput(Object(Er["a"])(this.privateState.selectedTags),null)}}},wr=Tr,Dr=Object(w["a"])(wr,yr,Or,!1,null,"2fe38a98",null),Ar=Dr.exports,Rr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("form",{staticClass:"form-inline",on:{submit:function(t){t.preventDefault()}}},[r("div",{staticClass:"form-group mr-2"},[r("label",{staticClass:"sr-only",attrs:{for:"studyItemsRequestParams__search"}},[t._v("Search")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"studyItemsRequestParams__search",placeholder:"Search"},domProps:{value:t.sharedState.studyItemsRequestParams.search},on:{input:t.onSearchChange}})]),r("div",{staticClass:"form-group mr-2 cursor-pointer text-warning"},[r("i",{staticClass:"fas fa-star-half-alt mr-1",class:{"text-primary":null===t.sharedState.studyItemsRequestParams.isFavourite},on:{click:function(e){return t.setIsFavorite(null)}}}),r("i",{staticClass:"fas fa-star mr-1",class:{"text-primary":!0===t.sharedState.studyItemsRequestParams.isFavourite},on:{click:function(e){return t.setIsFavorite(!0)}}}),r("i",{staticClass:"far fa-star",class:{"text-primary":!1===t.sharedState.studyItemsRequestParams.isFavourite},on:{click:function(e){return t.setIsFavorite(!1)}}})]),r("div",{staticClass:"form-group mr-2"},[r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.reload}},[r("i",{staticClass:"fas fa-sync-alt"})])]),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.resetRequestParams}},[r("i",{staticClass:"fas fa-times"})])])])])},Mr=[];r("f206");function jr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Pr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?jr(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ur={name:"study-items-filters",props:{onChange:{type:Function,required:!1,default:null}},components:{},data:function(){return{privateState:{storeTypes:H}}},computed:Pr({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){this.resetRequestParams()},methods:{callOnChange:function(){this.onChange&&this.onChange()},callOnChangeDebounce:V.a.debounce((function(){this.onChange&&this.onChange()}),500),onSearchChange:function(t){this.$store.commit(H.STUDY_ITEMS_REQUEST_PARAMS_SET,{search:t.target.value}),this.callOnChangeDebounce()},setIsFavorite:function(t){this.$store.commit(H.STUDY_ITEMS_REQUEST_PARAMS_SET,{isFavourite:t}),this.callOnChange()},reload:function(){this.callOnChange()},resetRequestParams:function(){this.$store.commit(H.STUDY_ITEMS_REQUEST_PARAMS_RESET,{}),this.callOnChange()}}},Nr=Ur,Lr=Object(w["a"])(Nr,Rr,Mr,!1,null,"10644e98",null),xr=Lr.exports;function kr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Fr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kr(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $r={title:null,description:null,exampleTexts:[""],isFavourite:!1,languageCode:"en",tags:[]},Yr={name:"study-items-browse",components:{RowLoader:Qt,LoadingButton:re,PaginationWrapper:pr,LanguageCodeSelect:Sr,TagsMultiselect:Ar,CustomCollections:Be,StudyItemsFilters:xr},data:function(){return{privateState:{storeTypes:H,currentView:"list",studyItemModel:V.a.cloneDeep($r),modalMode:"create"}}},computed:Fr({},Object(N["b"])({sharedState:function(t){return t},studyItems:function(t){return t.studyItemsPaginationResult?t.studyItemsPaginationResult.items:null}})),created:function(){var t=this;this.loadStudyItems({}),this.unwatch=this.$store.watch((function(t,e){return e.currentCustomCollectionId}),(function(e,r){t.loadStudyItems({})}))},mounted:function(){},updated:function(){},beforeDestroy:function(){this.unwatch()},destroyed:function(){},methods:{loadStudyItems:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.offset,r=void 0===e?0:e,a=t.limit,n=void 0===a?50:a;return this.$store.dispatch(H.STUDY_ITEMS_LOAD,{offset:r,limit:n}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onSelectedCollectionChange:function(t){},toggleView:function(){this.privateState.currentView="list"===this.privateState.currentView?"cards":"list"},onCreateStudyItem:function(){this.privateState.modalMode="create",this.privateState.studyItemModel=V.a.cloneDeep($r),this.$modal.show("study-item-create-edit")},onUpdateStudyItem:function(t){this.privateState.modalMode="edit";var e=this.studyItems.find((function(e){return e.id===t}));this.privateState.studyItemModel=Fr({id:e.id},e),this.$modal.show("study-item-create-edit")},onAddStudyItemExampleText:function(){this.privateState.studyItemModel.exampleTexts.push("")},onRemoveStudyItemExampleText:function(){this.privateState.studyItemModel.exampleTexts.pop()},onDeleteStudyItem:function(t){confirm("Are you sure?")&&this.deleteStudyItem(t)},onStudyItemFavoriteClick:function(t){t.isFavourite?this.deleteStudyItemFromFavourites(t.id):this.addStudyItemToFavourites(t.id)},createEditStudyItem:function(t){"create"===t?this.createStudyItem():"edit"===t&&this.updateStudyItem()},createStudyItem:function(){var t=this;this.$store.dispatch(H.STUDY_ITEM_CREATE,{data:Fr({},this.privateState.studyItemModel)}).then((function(){t.$notify({group:"app",type:"success",title:"Item '".concat(t.privateState.studyItemModel.title,"' has been created!"),text:"",duration:5e3}),t.$modal.hide("study-item-create-edit"),t.privateState.studyItemModel=V.a.cloneDeep($r)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},updateStudyItem:function(){var t=this;this.$store.dispatch(H.STUDY_ITEM_UPDATE,{studyItemId:this.privateState.studyItemModel.id,data:Fr({},this.privateState.studyItemModel)}).then((function(){t.$notify({group:"app",type:"success",title:"Item '".concat(t.privateState.studyItemModel.title,"' has been updated!"),text:"",duration:5e3}),t.$modal.hide("study-item-create-edit"),t.privateState.studyItemModel=V.a.cloneDeep($r)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteStudyItem:function(t){var e=this;this.$store.dispatch(H.STUDY_ITEM_DELETE,{studyItemId:t}).then((function(){e.$notify({group:"app",type:"success",title:"Item has been deleted!",text:"",duration:5e3});var t=3;e.studyItems.length<=t&&e.loadStudyItems()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},addStudyItemToFavourites:function(t){this.$store.dispatch(H.STUDY_ITEM_ADD_TO_FAVOURITES,{studyItemId:t}).then((function(){})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteStudyItemFromFavourites:function(t){this.$store.dispatch(H.STUDY_ITEM_DELETE_FROM_FAVOURITES,{studyItemId:t}).then((function(){})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Gr=Yr,Vr=Object(w["a"])(Gr,er,rr,!1,null,null,null),Hr=Vr.exports,qr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.STUDY_ITEM_TRAINING_FLASHCARDS_START]}}),r("div",{staticClass:"study-items-learn-flash-cards-wrapper"},[r("h5",{staticClass:"mb-3"},[t._v("Flash cards")]),t.isAllTrained?r("div",[r("div",{staticClass:"alert alert-secondary",attrs:{role:"alert"}},[t._v(" Everyting is already trained! ")])]):t._e(),!t.isAllTrained&&t.currentItem?r("div",{staticClass:"card bg-light training-card"},[t.currentItem.image?r("img",{staticClass:"card-img-top training-image",attrs:{src:t.currentItem.image.url,alt:t.currentItem.title}}):r("img",{staticClass:"card-img-top",attrs:{src:"/img/empty-image.png"}}),r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("span",[t._v(t._s(t.currentItem.title))])])]),t.privateState.isShowCurrentItemDetails?r("div",{staticClass:"card-text small mb-1"},[r("div",[t._v(t._s(t.currentItem.description))])]):t._e(),t.privateState.isShowCurrentItemDetails?r("div",{staticClass:"card-text small text-secondary mb-1"},t._l(t.currentItem.exampleTexts,(function(e,a){return r("div",{key:"card-"+t.currentItem.id+"-exampleText-"+a},[r("small",[r("em",[t._v(t._s(e))])])])})),0):t._e()]),r("div",{staticClass:"card-bottom-controls"},[r("span",{staticClass:"card-bottom-control-item",on:{click:function(e){return t.onPrevClick()}}},[r("i",{staticClass:"fas fa-chevron-left"})]),r("span",{staticClass:"card-bottom-control-item text-danger",on:{click:function(e){return t.onShowClick()}}},[r("i",{staticClass:"fas fa-question"})]),r("span",{staticClass:"card-bottom-control-item text-success",on:{click:function(e){return t.onNextClick()}}},[r("i",{staticClass:"fas fa-chevron-right"})])])]):t._e(),r("div",{staticClass:"mt-2"},[r("small",[r("div",{staticClass:"text-center"},[r("span",[t._v(t._s(t.privateState.summary.trainedItemsCount)+" / "+t._s(t.privateState.summary.totalItemsCount))])]),r("div",[r("span",[t._v(" Correct: "),r("span",{staticClass:"badge badge-success"},[t._v(t._s(t.privateState.summary.correctItemsCount))])]),r("span",{staticClass:"ml-1"},[t._v(" Incorrect: "),r("span",{staticClass:"badge badge-danger"},[t._v(t._s(t.privateState.summary.incorrectItemsCount))])])]),t.privateState.isTrainingFinished?r("div",{staticClass:"mt-2"},[r("div",[r("router-link",{staticClass:"btn btn-secondary btn-sm text-white",attrs:{to:{name:"study-items-dashboard",params:{}}}},[r("i",{staticClass:"fas fa-chevron-left mr-1"}),r("span",[t._v("Back")])]),r("button",{staticClass:"btn btn-success btn-sm ml-1",attrs:{type:"button"},on:{click:t.startTraining}},[t._v(" Train next "),r("i",{staticClass:"fas fa-play ml-1"})])],1)]):t._e()])])])],1)])])},Zr=[];r("45fc");function zr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Br(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zr(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Wr={name:"study-items-learn-flash-cards",components:{RowLoader:Qt},data:function(){return{privateState:{storeTypes:H,currentItemIndex:0,isShowCurrentItemDetails:!1,itemResults:[],isTrainingFinished:!1,summary:{totalItemsCount:0,trainedItemsCount:0,correctItemsCount:0,incorrectItemsCount:0}}}},computed:Br({isAllTrained:function(){return null!==this.trainingFlashcards&&0===this.trainingFlashcards.items.length},currentItem:function(){return null===this.trainingFlashcards||0===this.trainingFlashcards.items.length?null:this.trainingFlashcards.items[this.privateState.currentItemIndex]},totalItemsCount:function(){return null===this.trainingFlashcards?0:this.trainingFlashcards.items.length}},Object(N["b"])({sharedState:function(t){return t},trainingFlashcards:function(t){return t.trainingFlashcards}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.startTraining();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadTraining:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.limit,r=void 0===e?10:e;return this.$store.dispatch(H.STUDY_ITEM_TRAINING_FLASHCARDS_START,{collectionId:this.$store.getters.currentCustomCollectionId,limit:r}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},startTraining:function(){this.privateState.currentItemIndex=0,this.privateState.isShowCurrentItemDetails=0,this.privateState.itemResults=[],this.privateState.isTrainingFinished=!1,this.loadTraining()},goToCard:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(null!==this.trainingFlashcards){var e=this.trainingFlashcards.items.length;t!==e?(t=Math.min(t,e-1),t=Math.max(t,0),this.privateState.currentItemIndex=t,this.privateState.isShowCurrentItemDetails=!1):this.saveTraining()}},onPrevClick:function(){this.goToCard(this.privateState.currentItemIndex-1)},onShowClick:function(){this.handleItemResponse({itemId:this.currentItem.id,isCorrect:!1}),this.privateState.isShowCurrentItemDetails=!0},onNextClick:function(){this.handleItemResponse({itemId:this.currentItem.id,isCorrect:!0}),this.goToCard(this.privateState.currentItemIndex+1)},handleItemResponse:function(t){var e=t.itemId,r=t.isCorrect,a=this.privateState.itemResults.some((function(t){return t.itemId===e}));a||(this.privateState.itemResults.push({itemId:e,isCorrect:r}),this.privateState.summary={totalItemsCount:this.totalItemsCount,trainedItemsCount:this.privateState.summary.trainedItemsCount+1,correctItemsCount:r?this.privateState.summary.correctItemsCount+1:this.privateState.summary.correctItemsCount,incorrectItemsCount:r?this.privateState.summary.incorrectItemsCount:this.privateState.summary.incorrectItemsCount+1})},saveTraining:function(){return this.privateState.isTrainingFinished=!0,this.$store.dispatch(H.STUDY_ITEM_TRAINING_FLASHCARDS_SAVE,{data:{trainingType:this.trainingFlashcards.trainingType,itemsResults:Object(Er["a"])(this.privateState.itemResults)}}).then((function(){})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Qr=Wr,Kr=Object(w["a"])(Qr,qr,Zr,!1,null,null,null),Jr=Kr.exports,Xr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[t.userFilms?r("div",{staticClass:"user-films-wrapper"},[r("h5",{staticClass:"mb-3"},[t._v("My films:")]),r("div",{staticClass:"btn-toolbar mb-3",attrs:{role:"toolbar","aria-label":"Toolbar with button groups"}},[r("div",{staticClass:"btn-group mr-2",attrs:{role:"group","aria-label":"View toggle"}},[r("button",{staticClass:"btn",class:{"btn-primary":"list"===t.privateState.currentView,"btn-secondary":"list"!==t.privateState.currentView},attrs:{type:"button"},on:{click:t.toggleView}},[r("i",{staticClass:"fas fa-list"})]),r("button",{staticClass:"btn",class:{"btn-primary":"cards"===t.privateState.currentView,"btn-secondary":"cards"!==t.privateState.currentView},attrs:{type:"button"},on:{click:t.toggleView}},[r("i",{staticClass:"fas fa-th"})])]),r("div",{staticClass:"btn-group mr-2",attrs:{role:"group","aria-label":"Create a new item"}},[r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.onCreateUserFilm}},[r("i",{staticClass:"fas fa-plus"})])])]),r("user-films-filters",{attrs:{onChange:t.loadUserFilms}}),r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.USER_FILMS_LOAD]}}),r("div",[r("pagination-wrapper",{attrs:{paginationResult:t.sharedState.userFilmsPaginationResult,loadItemsF:t.loadUserFilms,showGoToButtons:!0}},["list"===t.privateState.currentView?r("div",{staticClass:"list-group user-items-list"},t._l(t.userFilms,(function(e){return r("a",{key:"list-"+e.id,staticClass:"list-group-item list-group-item-action flex-column align-items-start user-item",attrs:{href:"#"}},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("h6",{staticClass:"mb-1"},[r("strong",[t._v(t._s(e.title))])]),r("div",[r("span",{staticClass:"badge badge-info mr-1"},[t._v(t._s(e.languageCode))]),r("span",{staticClass:"ml-2 mr-2"},[t._v("|")]),r("span",[r("span",{staticClass:"badge badge-secondary mr-1 cursor-pointer",on:{click:function(r){return t.onUpdateUserFilm(e.id)}}},[r("i",{staticClass:"fas fa-pencil-alt"})]),r("span",{staticClass:"badge badge-secondary cursor-pointer",on:{click:function(r){return t.onDeleteUserFilm(e.id)}}},[r("i",{staticClass:"fas fa-times"})])])])]),r("div",{staticClass:"small"},[e.myRating?r("div",[r("i",{staticClass:"fas fa-award text-danger mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(e.myRating))])]):t._e(),e.watchedAt?r("div",[r("i",{staticClass:"far fa-eye text-secondary mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(t.moment(e.watchedAt).format("YYYY-MM-DD")))])]):t._e(),e.releaseYear?r("div",[r("i",{staticClass:"fas fa-calendar text-secondary mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(e.releaseYear))])]):t._e(),e.genres&&e.genres.length>0?r("div",[r("i",{staticClass:"fas fa-film"}),t._v(" "+t._s(e.genres.join(", "))+" ")]):t._e(),e.comment?r("div",[r("i",{staticClass:"fas fa-comment text-secondary mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(e.comment))])]):t._e()])])})),0):t._e(),"cards"===t.privateState.currentView?r("div",{staticClass:"items-card-list"},t._l(t.userFilms,(function(e){return r("div",{key:"card-"+e.id,staticClass:"card bg-light item-card"},[e.details&&e.details.image?r("img",{staticClass:"card-img-top item-card-image",attrs:{src:e.details.image.posterUrl}}):r("img",{staticClass:"card-img-top item-card-image",attrs:{src:"/img/empty-image.png"}}),r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("strong",[t._v(t._s(e.title))])])]),r("div",{staticClass:"card-text"},[r("div",{staticClass:"small"},[e.myRating?r("div",[r("i",{staticClass:"fas fa-award text-danger mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(e.myRating))])]):t._e(),e.watchedAt?r("div",[r("i",{staticClass:"far fa-eye text-secondary mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(t.moment(e.watchedAt).format("YYYY-MM-DD")))])]):t._e(),e.releaseYear?r("div",[r("i",{staticClass:"fas fa-calendar text-secondary mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(e.releaseYear))])]):t._e(),e.genres&&e.genres.length>0?r("div",[r("i",{staticClass:"fas fa-film"}),t._v(" "+t._s(e.genres.join(", "))+" ")]):t._e(),e.comment?r("div",[r("i",{staticClass:"fas fa-comment text-secondary mr-1"}),r("span",{staticClass:"mr-1"},[t._v(t._s(e.comment))])]):t._e()])])]),r("div",{staticClass:"card-bottom-controls"},[r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return t.onUpdateUserFilm(e.id)}}},[r("i",{staticClass:"fas fa-pencil-alt"})]),r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return t.onDeleteUserFilm(e.id)}}},[r("i",{staticClass:"fas fa-times"})])])])})),0):t._e()])],1)],1):t._e(),r("modal",{attrs:{name:"user-film-create-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},["create"===t.privateState.modalMode?r("span",[t._v("Create film")]):t._e(),"edit"===t.privateState.modalMode?r("span",[t._v("Edit film")]):t._e()]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("user-film-create-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createEditUserFilm(t.privateState.modalMode)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"userFilmModel__title"}},[t._v("Title")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.userFilmModel.title,expression:"privateState.userFilmModel.title"}],staticClass:"form-control",attrs:{type:"text",id:"userFilmModel__title",placeholder:"Title"},domProps:{value:t.privateState.userFilmModel.title},on:{input:function(e){e.target.composing||t.$set(t.privateState.userFilmModel,"title",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"userFilmModel__myRating"}},[t._v("My rating")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.userFilmModel.myRating,expression:"privateState.userFilmModel.myRating"}],staticClass:"form-control",attrs:{type:"number",step:"0.1",id:"userFilmModel__myRating",placeholder:"My rating"},domProps:{value:t.privateState.userFilmModel.myRating},on:{input:function(e){e.target.composing||t.$set(t.privateState.userFilmModel,"myRating",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"userFilmModel__watchedAt"}},[t._v("Watched at")]),r("datetime",{attrs:{type:"date",placeholder:"Watched at","input-class":"form-control app-datetime-input","value-zone":"UTC",zone:"local",format:"yyyy-MM-dd"},on:{input:function(t){}},model:{value:t.privateState.userFilmModel.watchedAt,callback:function(e){t.$set(t.privateState.userFilmModel,"watchedAt",e)},expression:"privateState.userFilmModel.watchedAt"}})],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"userFilmModel__releaseYear"}},[t._v("Release year")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.userFilmModel.releaseYear,expression:"privateState.userFilmModel.releaseYear"}],staticClass:"form-control",attrs:{type:"number",step:"1",id:"userFilmModel__releaseYear",placeholder:"Release year"},domProps:{value:t.privateState.userFilmModel.releaseYear},on:{input:function(e){e.target.composing||t.$set(t.privateState.userFilmModel,"releaseYear",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Genres")]),r("tags-multiselect",{attrs:{placeholder:"Genres"},model:{value:t.privateState.userFilmModel.genres,callback:function(e){t.$set(t.privateState.userFilmModel,"genres",e)},expression:"privateState.userFilmModel.genres"}})],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"userFilmModel__comment"}},[t._v("Comment")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.userFilmModel.comment,expression:"privateState.userFilmModel.comment"}],staticClass:"form-control",attrs:{type:"text",id:"userFilmModel__comment",placeholder:"Comment"},domProps:{value:t.privateState.userFilmModel.comment},on:{input:function(e){e.target.composing||t.$set(t.privateState.userFilmModel,"comment",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Language "),r("small",{staticClass:"text-muted"},[t._v("(of entered data, not a film)")])]),r("language-code-select",{model:{value:t.privateState.userFilmModel.languageCode,callback:function(e){t.$set(t.privateState.userFilmModel,"languageCode",e)},expression:"privateState.userFilmModel.languageCode"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.USER_FILM_CREATE]||t.sharedState.loading[t.privateState.storeTypes.USER_FILM_UPDATE]}},[t._v("Save")])],1)])])])],1)])])},ta=[],ea=r("c1df"),ra=r.n(ea),aa=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mb-3"},[r("form",{staticClass:"form-inline",on:{submit:function(t){t.preventDefault()}}},[r("div",{staticClass:"form-group mr-2"},[r("label",{staticClass:"sr-only",attrs:{for:"userFilmsRequestParams__search"}},[t._v("Search")]),r("input",{staticClass:"form-control",attrs:{type:"text",id:"userFilmsRequestParams__search",placeholder:"Search"},domProps:{value:t.sharedState.userFilmsRequestParams.search},on:{input:t.onSearchChange}})]),r("div",{staticClass:"form-group mr-2"},[r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.reload}},[r("i",{staticClass:"fas fa-sync-alt"})])]),r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.resetRequestParams}},[r("i",{staticClass:"fas fa-times"})])])])])},na=[];function sa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function oa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sa(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ia={name:"study-items-filters",props:{onChange:{type:Function,required:!1,default:null}},components:{},data:function(){return{privateState:{storeTypes:H}}},computed:oa({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){this.resetRequestParams()},methods:{callOnChange:function(){this.onChange&&this.onChange()},callOnChangeDebounce:V.a.debounce((function(){this.onChange&&this.onChange()}),500),onSearchChange:function(t){this.$store.commit(H.USER_FILMS_REQUEST_PARAMS_SET,{search:t.target.value}),this.callOnChangeDebounce()},reload:function(){this.callOnChange()},resetRequestParams:function(){this.$store.commit(H.USER_FILMS_REQUEST_PARAMS_RESET,{}),this.callOnChange()}}},ca=ia,la=Object(w["a"])(ca,aa,na,!1,null,"01da5ed4",null),ua=la.exports;function da(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function pa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?da(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):da(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ma={title:null,myRating:null,watchedAt:ra()().utc().format(),releaseYear:null,genres:[],comment:null,languageCode:"en"},fa={name:"user-films-browse",components:{RowLoader:Qt,LoadingButton:re,PaginationWrapper:pr,LanguageCodeSelect:Sr,TagsMultiselect:Ar,UserFilmsFilters:ua},data:function(){return{moment:ra.a,privateState:{storeTypes:H,currentView:"list",userFilmModel:V.a.cloneDeep(ma),modalMode:"create"}}},computed:pa({},Object(N["b"])({sharedState:function(t){return t},userFilms:function(t){return t.userFilmsPaginationResult?t.userFilmsPaginationResult.items:null}})),created:function(){this.loadUserFilms({})},mounted:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},methods:{loadUserFilms:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.offset,r=void 0===e?0:e,a=t.limit,n=void 0===a?50:a;return this.$store.dispatch(H.USER_FILMS_LOAD,{offset:r,limit:n}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},toggleView:function(){this.privateState.currentView="list"===this.privateState.currentView?"cards":"list"},onCreateUserFilm:function(){this.privateState.modalMode="create",this.privateState.userFilmModel=V.a.cloneDeep(ma),this.$modal.show("user-film-create-edit")},onUpdateUserFilm:function(t){this.privateState.modalMode="edit";var e=this.userFilms.find((function(e){return e.id===t}));this.privateState.userFilmModel=pa({id:e.id},e),this.$modal.show("user-film-create-edit")},onDeleteUserFilm:function(t){confirm("Are you sure?")&&this.deleteUserFilm(t)},createEditUserFilm:function(t){"create"===t?this.createUserFilm():"edit"===t&&this.updateUserFilm()},createUserFilm:function(){var t=this;this.$store.dispatch(H.USER_FILM_CREATE,{data:pa({},this.privateState.userFilmModel)}).then((function(){t.$notify({group:"app",type:"success",title:"Film '".concat(t.privateState.userFilmModel.title,"' has been created!"),text:"",duration:5e3}),t.$modal.hide("user-film-create-edit"),t.privateState.userFilmModel=V.a.cloneDeep(ma)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},updateUserFilm:function(){var t=this;this.$store.dispatch(H.USER_FILM_UPDATE,{userFilmId:this.privateState.userFilmModel.id,data:pa({},this.privateState.userFilmModel)}).then((function(){t.$notify({group:"app",type:"success",title:"Film '".concat(t.privateState.userFilmModel.title,"' has been updated!"),text:"",duration:5e3}),t.$modal.hide("user-film-create-edit"),t.privateState.userFilmModel=V.a.cloneDeep(ma)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteUserFilm:function(t){var e=this;this.$store.dispatch(H.USER_FILM_DELETE,{userFilmId:t}).then((function(){e.$notify({group:"app",type:"success",title:"Film has been deleted!",text:"",duration:5e3});var t=3;e.userFilms.length<=t&&e.loadUserFilms()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},va=fa,ha=Object(w["a"])(va,Xr,ta,!1,null,null,null),ga=ha.exports,ba=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dashboard-wrapper"},[r("div",[r("current-company-control")],1),t.$store.getters.currentCompanyId?r("div",[r("ul",{staticClass:"nav nav-tabs app-nav-tabs",attrs:{id:"myTab",role:"tablist"}},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-home"===t.$router.currentRoute.name},attrs:{to:{name:"dashboard-home",params:{}}}},[t._v("Dashboard")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-gateways"===t.$router.currentRoute.name},attrs:{to:{name:"dashboard-gateways",params:{companyId:t.$store.getters.currentCompanyId}}}},[t._v("Gateways")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-sensors"===t.$router.currentRoute.name},attrs:{to:{name:"dashboard-sensors",params:{companyId:t.$store.getters.currentCompanyId}}}},[t._v("Sensors")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-departments"===t.$router.currentRoute.name},attrs:{to:{name:"dashboard-departments",params:{companyId:t.$store.getters.currentCompanyId}}}},[t._v("Departments")])],1),t.$store.getters.isUserHasPermissions(["CompanyUserRead"],t.$store.getters.currentCompanyId)?r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-users"===t.$router.currentRoute.name},attrs:{to:{name:"dashboard-users",params:{companyId:t.$store.getters.currentCompanyId}}}},[t._v("Users")])],1):t._e()]),t.sharedState.userInfo?r("div",{staticClass:"tab-content app-tab-content",attrs:{id:"myTabContent"}},[r("div",{staticClass:"tab-pane fade show active",attrs:{id:"",role:"","aria-labelledby":""}},[r("router-view")],1)]):t._e()]):t._e()])},_a=[],Sa=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.sharedState.userInfo?r("div",{staticClass:"user-company-control-wrapper"},[t.sharedState.userInfo.companies?r("div",[r("h5",[t._v("Current company:")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col col-md-4"},[r("div",{staticClass:"d-flex justify-content-start align-items-start company-select-wrapper"},[r("multiselect",{attrs:{options:t.sharedState.userInfo.companies,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","track-by":"id",placeholder:"Select company",loading:t.isLoading,disabled:t.isLoading},on:{input:t.onCurrentCompanyChange},model:{value:t.privateState.selectedCompany,callback:function(e){t.$set(t.privateState,"selectedCompany",e)},expression:"privateState.selectedCompany"}}),t.$store.getters.isUserHasPermissions(["CompanyUpdate"],t.$store.getters.currentCompanyId)?r("button",{staticClass:"btn btn-outline-secondary ml-2",attrs:{type:"button"},on:{click:function(e){return t.onManageCompanyClick()}}},[r("i",{staticClass:"fas fa-cog"})]):t._e(),t.$store.getters.isUserHasPermissions(["CompanyCreate"],null)?r("button",{staticClass:"btn btn-outline-success ml-2",attrs:{type:"button"},on:{click:function(e){return t.onCreateCompanyClick(e)}}},[r("i",{staticClass:"fas fa-plus"})]):t._e(),t.$store.getters.currentCompanyId?r("loading-button",{staticClass:"btn btn-outline-danger ml-2",attrs:{type:"button",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_LEAVE]},nativeOn:{click:function(e){return t.leaveCurrentCompany()}}},[r("i",{staticClass:"fas fa-user-minus"})]):t._e()],1)])])]):t._e()]):t._e()},ya=[],Oa=function(){function t(){Object(L["a"])(this,t)}return Object(x["a"])(t,[{key:"handleUserConfirmationFlow",value:function(t){var e=t.actionF;return this._handleUserConfirmationFlow({actionF:e,userConfirmationRequest:null})}},{key:"_handleUserConfirmationFlow",value:function(t){var e=this,r=t.actionF,a=t.userConfirmationRequest,n=void 0===a?null:a,s=!!n||window.confirm("Are you sure?");return s?r({userConfirmation:n}).then((function(t){var r=t,a=(r.data,r.userConfirmation),n=a||{},s=n.isProcessed,o=n.confirmations,i=n.processedConfirmations,c=n.notifications;if(o&&0!==o.length){var l=o.map((function(t){var e=t.confirmationId,r=t.confirmationText,a=window.confirm(r);return{confirmationId:e,isConfirmed:a}})),u={confirmations:[].concat(Object(Er["a"])(i),Object(Er["a"])(l))};return{userConfirmationRequest:u,isProcessed:s}}return s?e._showNotifications(c,"success"):e._showNotifications(c,"information"),{userConfirmationRequest:null,isProcessed:s}})).then((function(t){var a=t.userConfirmationRequest,n=void 0===a?null:a,s=t.isProcessed,o=void 0!==s&&s;return n?e._handleUserConfirmationFlow({actionF:r,userConfirmationRequest:n}):{isProcessed:o}})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})):Promise.resolve({isProcessed:!1})}},{key:"_showNotifications",value:function(t,e){t&&0!==t.length&&e&&t.map((function(t){var r=t.title,a=t.text;n["default"].notify({group:"app-important",type:e,title:r,text:a})}))}}]),t}(),Ea=new Oa;function Ca(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ia(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ca(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ca(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ta={name:"current-company-control",props:{},components:{LoadingButton:re},data:function(){return{privateState:{storeTypes:H,selectedCompany:null}}},computed:Ia({},Object(N["b"])({sharedState:function(t){return t},isLoading:function(t){return t.loading[H.USER_INFO_LOAD]}})),created:function(){var t=this;this.setSelectedCompany(),this.$store.subscribe((function(e,r){var a=e.type;e.payload;a===H.USER_INFO_SET&&t.setSelectedCompany()}))},mounted:function(){},updated:function(){},destroyed:function(){},methods:{setSelectedCompany:function(){if(this.sharedState.userInfo){var t=this.sharedState.userInfo.companies.find((function(t){return t.isCurrent}));this.privateState.selectedCompany=t?Ia({},t):null}},onCurrentCompanyChange:function(t){var e=this,r=this.privateState.selectedCompany.id;this.$appFullscreenLoader({isVisible:!0,title:"Switching company..."}),this.$store.dispatch(H.USER_INFO_CURRENT_COMPANY_SET,{companyId:r}).then((function(){return li.refreshTokens({withFullscreenLoader:!1})})).then((function(){e.$appFullscreenLoader({isVisible:!1})})).catch((function(t){e.$appFullscreenLoader({isVisible:!1}),console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onManageCompanyClick:function(){this.$router.push({name:"company-manage",params:{companyId:this.$store.getters.currentCompanyId}})},onCreateCompanyClick:function(t){this.$router.push({name:"company-create"})},leaveCurrentCompany:function(){var t=this;Ea.handleUserConfirmationFlow({actionF:function(e){var r=e.userConfirmation;return t.$store.dispatch(H.COMPANY_LEAVE,{companyId:t.$store.getters.currentCompanyId,userConfirmation:r})}}).then((function(e){var r=e.isProcessed;r&&t.$store.dispatch(H.USER_INFO_LOAD,{})})).catch((function(t){console.error(t)}))}}},wa=Ta,Da=Object(w["a"])(wa,Sa,ya,!1,null,"2b8aada4",null),Aa=Da.exports;function Ra(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ra(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ja={name:"dashboard",components:{CurrentCompanyControl:Aa},data:function(){return{privateState:{storeTypes:H}}},computed:Ma({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Pa=ja,Ua=Object(w["a"])(Pa,ba,_a,!1,null,null,null),Na=Ua.exports,La=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},xa=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("img",{attrs:{src:"img/logo.png",alt:""}})])}];r("b20f");function ka(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Fa(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ka(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ka(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $a={name:"dashboard-home",components:{},data:function(){return{privateState:{storeTypes:H}}},computed:Fa({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){}},Ya=$a,Ga=Object(w["a"])(Ya,La,xa,!1,null,null,null),Va=Ga.exports,Ha=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("row-loader",{staticClass:"mb-3",attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.GATEWAYS_LOAD]}}),t.sharedState.gatewaysData?r("div",[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},t._l(t.sharedState.gatewaysData.data,(function(e){return r("div",{key:e.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center"},[r("h6",{staticClass:"card-title"},[t._v(" "+t._s(e.name)+" ")]),e.isOnline?r("span",{staticClass:"badge badge-success align-self-start ml-1"},[t._v("Online")]):t._e(),e.isOnline?t._e():r("span",{staticClass:"badge badge-danger align-self-start ml-1"},[t._v("Offline")])]),r("div",{staticClass:"card-text small"},[r("div",[t._v("Serial: "+t._s(e.serial))]),r("div",[t._v("Last IP: "+t._s(e.lastIP))]),r("div",[t._v("Sensors: "+t._s(e.sensors?e.sensors.length:0))])])])])})),0)]):t._e()],1)},qa=[];function Za(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function za(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Za(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ba={name:"dashboard-gateways",components:{RowLoader:Qt},props:{companyId:String},data:function(){return{privateState:{storeTypes:H}}},computed:za({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.companyId&&this.$store.dispatch(H.GATEWAYS_LOAD,{companyId:this.companyId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){}},Wa=Ba,Qa=Object(w["a"])(Wa,Ha,qa,!1,null,null,null),Ka=Qa.exports,Ja=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("row-loader",{staticClass:"mb-3",attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.SENSORS_LOAD]}}),t.sharedState.sensors?r("div",[r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-md-3 col-sm-12"},[r("div",{staticClass:"d-flex"},[r("multiselect",{attrs:{id:"selectedDepartment",options:t.departmentList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","track-by":"id",placeholder:"Select department",loading:t.isDepartmentsLoading,disabled:t.isDepartmentsLoading},on:{input:t.onDepartmentChange},model:{value:t.privateState.selectedDepartment,callback:function(e){t.$set(t.privateState,"selectedDepartment",e)},expression:"privateState.selectedDepartment"}})],1)])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col"},[r("pagination-wrapper",{attrs:{paginationResult:t.sharedState.sensors,loadItemsF:t.loadSensors}},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},t._l(t.sharedState.sensors.data,(function(e){return r("div",{key:e.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("router-link",{attrs:{to:{name:"sensor-telemetry",params:{sensorId:e.id}}}},[t._v(t._s(e.name))])],1),r("div",{},[e.isOnline?r("span",{staticClass:"badge badge-success align-self-start ml-1"},[t._v("Online")]):t._e(),e.isOnline?t._e():r("span",{staticClass:"badge badge-danger align-self-start ml-1"},[t._v("Offline")]),r("router-link",{staticClass:"badge badge-secondary align-self-start ml-1",attrs:{to:{name:"sensor-manage",params:{companyId:t.$store.getters.currentCompanyId,sensorId:e.id}}}},[r("i",{staticClass:"fas fa-cog"})])],1)]),r("div",{staticClass:"card-text small"},[r("div",[t._v("Serial: "+t._s(e.serial))]),r("div",[t._v("Type: "+t._s(e.type))]),r("div",[t._v("Last IP: "+t._s(e.lastIP))])])])])})),0)])],1)])]):t._e()],1)},Xa=[];function tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function en(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var rn={name:"dashboard-sensors",components:{RowLoader:Qt,PaginationWrapper:pr},props:{companyId:String},data:function(){return{privateState:{storeTypes:H,selectedDepartment:null}}},computed:en({},Object(N["b"])({sharedState:function(t){return t},isDepartmentsLoading:function(t){return t.loading[H.COMPANY_DEPARTMENTS_LOAD]},departmentList:function(t){var e=t.companyDepartments[this.companyId]||[];return[{id:null,name:"All departments"}].concat(Object(Er["a"])(e))}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.companyId&&this.$store.dispatch(H.COMPANY_DEPARTMENTS_LOAD,{companyId:this.companyId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.loadSensors();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadSensors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.offset,r=void 0===e?0:e,a=t.limit,n=void 0===a?100:a;this.companyId&&this.$store.dispatch(H.SENSORS_LOAD,{companyId:this.companyId,departmentId:(this.privateState.selectedDepartment||{}).id||null,offset:r,limit:n}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onDepartmentChange:function(t){this.loadSensors()}}},an=rn,nn=Object(w["a"])(an,Ja,Xa,!1,null,null,null),sn=nn.exports,on=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("row-loader",{staticClass:"mb-3",attrs:{visible:t.isLoading}}),t.departments?r("div",[r("div",{staticClass:"mb-3"},[t.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],t.$store.getters.currentCompanyId)?r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.onCreateDepartment}},[r("i",{staticClass:"fas fa-building"}),t._m(0)]):t._e()]),r("div",{class:{"block-disabled":t.isLoading}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},t._l(t.departments,(function(e){return r("div",{key:e.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[t.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],t.$store.getters.currentCompanyId)?r("router-link",{attrs:{to:{name:"company-department",params:{companyId:t.companyId,departmentId:e.id}}}},[t._v(t._s(e.name))]):t._e(),t.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],t.$store.getters.currentCompanyId)?t._e():r("span",[t._v(t._s(e.name))])],1),r("div",{staticClass:"ml-2"},[t.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],t.$store.getters.currentCompanyId)?r("span",{staticClass:"text-secondary cursor-pointer",on:{click:function(r){return t.deleteDepartment(e.id)}}},[r("i",{staticClass:"fas fa-times"})]):t._e()])]),r("div",{staticClass:"card-text small"})])])})),0)])])]),r("modal",{attrs:{name:"create-department",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[t._v("Create department")]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("create-department")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.createDepartment()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"departmentModel__name"}},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.departmentModel.name,expression:"privateState.departmentModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"departmentModel__name",placeholder:"Name"},domProps:{value:t.privateState.departmentModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.departmentModel,"name",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:""}},[t._v("Department name must be unique across the company.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Manager user")]),r("company-user-select",{attrs:{companyId:this.companyId,departmentId:null},model:{value:t.privateState.departmentModel.managerId,callback:function(e){t.$set(t.privateState.departmentModel,"managerId",e)},expression:"privateState.departmentModel.managerId"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_DEPARTMENT_CREATE]}},[t._v("Create")])],1)])])])],1):t._e()],1)},cn=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("small",[r("i",{staticClass:"fas fa-plus"})])}],ln=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("multiselect",{attrs:{options:t.companyUserList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":t.userLabel,"track-by":"id",placeholder:"Select user",loading:t.isLoading,disabled:!1},on:{input:t.onInput,"search-change":t.onSearchChange},model:{value:t.privateState.selectedUserOption,callback:function(e){t.$set(t.privateState,"selectedUserOption",e)},expression:"privateState.selectedUserOption"}})},un=[];function dn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function pn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dn(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var mn={name:"company-user-select",props:{value:{required:!0,default:null},companyId:{type:String,required:!0,default:null},departmentId:{type:String,required:!1,default:null},excludedDepartmentIds:{type:Array,required:!1,default:function(){return[]}}},components:{},data:function(){return{privateState:{storeTypes:H,selectedUserOption:null}}},computed:pn({},Object(N["b"])({sharedState:function(t){return t},isLoading:function(t){return t.loading[H.COMPANY_USERS_LOAD]},companyUserList:function(t){return(t.companyUsers[this.companyId]||{}).data||[]}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,e.$store.subscribe((function(t,r){var a=t.type;t.payload;if(a===H.COMPANY_USER_SET&&!e.privateState.selectedUserOption&&e.value){var n=r.companyUser[e.companyId][e.value];n&&(e.privateState.selectedUserOption=n)}})),e.value&&e.$store.dispatch(H.COMPANY_USER_LOAD,{companyId:e.companyId,userId:e.value}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),e.companyId&&e.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:e.companyId,offset:0,limit:20,search:null,excludedDepartmentIds:e.excludedDepartmentIds}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{userLabel:function(t){return"".concat(t.name||"No name"," (").concat(t.email,")")},onInput:function(t,e){this.$emit("input",t.id)},onSearchChange:function(t,e){this.loadCompanyUsers({search:t})},loadCompanyUsers:V.a.debounce((function(t){var e=t.search,r=void 0===e?null:e;this.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:this.companyId,offset:0,limit:20,search:r,excludedDepartmentIds:this.excludedDepartmentIds}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}),1500)}},fn=mn,vn=Object(w["a"])(fn,ln,un,!1,null,"6ff7d29c",null),hn=vn.exports;function gn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function bn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gn(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var _n={name:null,managerId:null},Sn={name:"dashboard-departments",components:{RowLoader:Qt,LoadingButton:re,CompanyUserSelect:hn},props:{companyId:String},data:function(){return{privateState:{storeTypes:H,departmentModel:bn({},_n)}}},computed:bn({},Object(N["b"])({sharedState:function(t){return t},isLoading:function(t){return t.loading[H.COMPANY_DEPARTMENTS_LOAD]||t.loading[H.COMPANY_DEPARTMENT_CREATE]||t.loading[H.COMPANY_DEPARTMENT_UPDATE]||t.loading[H.COMPANY_DEPARTMENT_DELETE]},departments:function(t){return t.userInfo&&t.userInfo.currentCompany&&t.companyDepartments[t.userInfo.currentCompany.id]||null}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadData();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadData:function(){this.companyId&&this.$store.dispatch(H.COMPANY_DEPARTMENTS_LOAD,{companyId:this.companyId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onCreateDepartment:function(){this.$modal.show("create-department")},createDepartment:function(){var t=this;this.$store.dispatch(H.COMPANY_DEPARTMENT_CREATE,{companyId:this.companyId,data:{name:this.privateState.departmentModel.name,managerId:this.privateState.departmentModel.managerId}}).then((function(){t.$notify({group:"app",type:"success",title:"Department '".concat(t.privateState.departmentModel.name,"' has been created!"),text:"",duration:5e3}),t.$modal.hide("create-department"),t.privateState.departmentModel=bn({},_n)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteDepartment:function(t){var e=this;window.confirm("Delete department?")&&this.$store.dispatch(H.COMPANY_DEPARTMENT_DELETE,{companyId:this.companyId,departmentId:t}).then((function(){e.$notify({group:"app",type:"information",title:"Department has been deleted!",text:"",duration:5e3})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},yn=Sn,On=Object(w["a"])(yn,on,cn,!1,null,null,null),En=On.exports,Cn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("row-loader",{attrs:{visible:t.isLoading}}),t.companyUsers?r("div",[r("div",{staticClass:"mb-3"},[t.$store.getters.isUserHasPermissions(["CompanyUserInvite"],t.$store.getters.currentCompanyId)?r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(e){return t.onInviteUserShowClick(e)}}},[r("i",{staticClass:"fas fa-user-plus"})]):t._e()]),r("div",{class:{"block-disabled":t.isLoading}},[r("pagination-wrapper",{attrs:{paginationResult:t.companyUsers,loadItemsF:t.loadData}},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},t._l(t.companyUsers.data,(function(e){return r("div",{key:e.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("router-link",{attrs:{to:{name:"company-user-profile",params:{companyId:t.companyId,userId:e.id}}}},[t._v(" "+t._s(e.name)+" ")])],1),r("div",{staticClass:"ml-2"},[e.id===t.$store.getters.userId?r("small",{staticClass:"badge badge-info mr-1"},[t._v("(You)")]):t._e(),e.id!==t.$store.getters.userId&&t.$store.getters.isUserHasPermissions(["CompanyUserManage"],t.$store.getters.currentCompanyId)?r("span",{staticClass:"text-secondary cursor-pointer",on:{click:function(r){return t.deleteUserFromCompany(e.id)}}},[r("i",{staticClass:"fas fa-times"})]):t._e()])]),r("div",{staticClass:"card-text small"},[r("div",[t._v("Email: "+t._s(e.email))]),r("div",[t._v("Phone Number: "+t._s(e.phoneNumber))])])])])})),0)]),r("modal",{attrs:{name:"invite-company-user",height:"auto",width:"400px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[t._v("Invite user to the company")]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("invite-company-user")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.onInviteUser(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputEmail"}},[t._v("Email address")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.invitationModel.email,expression:"privateState.invitationModel.email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail","aria-describedby":"emailHelp",placeholder:"Enter email",autocomplete:"username"},domProps:{value:t.privateState.invitationModel.email},on:{input:function(e){e.target.composing||t.$set(t.privateState.invitationModel,"email",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("Invitation email will be sent to specified address.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Initial permissions")]),r("multiselect",{attrs:{options:t.permissionList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":t.permissionLabel,"track-by":"permission",placeholder:"Select permissions",loading:t.isPermissionsLoading,disabled:t.isPermissionsLoading},model:{value:t.privateState.invitationModel.permissions,callback:function(e){t.$set(t.privateState.invitationModel,"permissions",e)},expression:"privateState.invitationModel.permissions"}})],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("Initial roles")]),r("multiselect",{attrs:{options:t.roleList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":t.roleLabel,"track-by":"role",placeholder:"Select roles",loading:t.isPermissionsLoading,disabled:t.isPermissionsLoading},model:{value:t.privateState.invitationModel.roles,callback:function(e){t.$set(t.privateState.invitationModel,"roles",e)},expression:"privateState.invitationModel.roles"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_USER_INVITE]}},[t._v("Invite")])],1)])])])],1)]):t._e()],1)},In=[];function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function wn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Dn={email:"",permissions:[],roles:[]},An={name:"dashboard-users",components:{RowLoader:Qt,LoadingButton:re,PaginationWrapper:pr},props:{companyId:String},data:function(){return{privateState:{storeTypes:H,invitationModel:wn({},Dn)}}},computed:wn({},Object(N["b"])({sharedState:function(t){return t},isLoading:function(t){return t.loading[H.COMPANY_USERS_LOAD]||t.loading[H.COMPANY_USER_DELETE]},companyUsers:function(t){return t.companyUsers[this.companyId]||null},isPermissionsLoading:function(t){return t.loading[H.AUTH_SCOPED_PERMISSIONS_LOAD]},permissionList:function(t){return t.auth.scopedPermissions.permissions||[]},roleList:function(t){return t.auth.scopedPermissions.roles||[]}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadData();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{permissionLabel:function(t){return"".concat(t.groupName," - ").concat(t.name)},roleLabel:function(t){return"".concat(t.name)},loadData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.offset,r=void 0===e?0:e,a=t.limit,n=void 0===a?100:a;return this.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:this.companyId,offset:r,limit:n}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onInviteUserShowClick:function(t){0===this.permissionList.length&&this.$store.dispatch(H.AUTH_SCOPED_PERMISSIONS_LOAD,{scopeId:this.$store.getters.currentCompanyId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.$modal.show("invite-company-user")},onInviteUser:function(t){var e=this;this.$store.dispatch(H.COMPANY_USER_INVITE,{companyId:this.companyId,email:this.privateState.invitationModel.email,permissions:this.privateState.invitationModel.permissions.map((function(t){return t.permission})),roles:this.privateState.invitationModel.roles.map((function(t){return t.role}))}).then((function(){e.$notify({group:"app",type:"success",title:"Invite has been sent to ".concat(e.privateState.invitationModel.email,"!"),text:"",duration:5e3}),e.$modal.hide("invite-company-user"),e.privateState.invitationModel=wn({},Dn)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteUserFromCompany:function(t){var e=this;window.confirm("Delete user from company?")&&this.$store.dispatch(H.COMPANY_USER_DELETE,{companyId:this.companyId,userId:t}).then((function(){e.loadData()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Rn=An,Mn=Object(w["a"])(Rn,Cn,In,!1,null,null,null),jn=Mn.exports,Pn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.AUTH_MY_PERMISSIONS_LOAD]}}),t.myPermissions?r("div",[t.$store.getters.isUserHasPermissions(["ScopedPermissionManage"],this.$store.getters.currentCompanyId)?r("div",{staticClass:"mb-3"},[r("router-link",{attrs:{to:{name:"manage-company-permissions",params:{companyId:this.$store.getters.currentCompanyId}}}},[t._v("Manage company permissions")])],1):t._e(),r("div",[r("h5",{staticClass:"mb-3"},[t._v("My permissions")]),r("div",[t.myPermissions.global?r("div",{staticClass:"mb-3"},[r("div",[r("user-scoped-permissions",{attrs:{userId:t.$store.getters.userId,userPermissions:t.myPermissions.global}})],1)]):t._e(),t.myPermissions.scoped?r("div",{staticClass:"mb-1"},t._l(t.myPermissions.scoped,(function(e){return r("div",{key:e.scopeId},[r("div",[r("user-scoped-permissions",{attrs:{userId:t.$store.getters.userId,userPermissions:e}})],1)])})),0):t._e()])])]):t._e()],1)])])},Un=[],Nn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-scoped-permissions-wrapper"},[t.userPermissions?r("div",[r("div",[r("div",{staticClass:"mb-1"},[r("h6",[r("strong",[t._v(t._s(t.userPermissions.scopeName)+":")]),"global"===t.userPermissions.scopeId&&t.$store.getters.isUserHasPermissions(["GlobalPermissionManage"],t.userPermissions.scopeId)?r("small",{staticClass:"mb-3"}):t._e(),"global"!==t.userPermissions.scopeId&&t.$store.getters.isUserHasPermissions(["ScopedPermissionManage"],t.userPermissions.scopeId)?r("small",{staticClass:"mb-3"},[t._v(" ("),r("router-link",{attrs:{to:{name:"manage-company-user-permissions",params:{companyId:t.userPermissions.scopeId,userId:t.userId}}}},[t._v("Manage")]),t._v(") ")],1):t._e()]),r("div",{staticClass:"list-group mb-1"},[r("li",{staticClass:"list-group-item list-group-item-primary"},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[t._m(0),r("small",[t._v("("+t._s(t.userPermissions.permissions.length)+")")])]),t._l(t.userPermissions.permissions,(function(e){return r("p",{key:"scope-"+t.userPermissions.scopeId+"-"+e.permission,staticClass:"mb-0"},[r("small",[t._v(" "+t._s(e.name)+" / "+t._s(e.description)+" ")])])}))],2)]),r("div",{staticClass:"list-group"},t._l(t.userPermissions.roles,(function(e){return r("li",{key:"global-"+e.name,staticClass:"list-group-item list-group-item-info mb-1"},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("h5",{staticClass:"mb-1"},[t._v("'"+t._s(e.name)+"' role")]),r("small",[t._v("("+t._s(e.permissions.length)+")")])]),t._m(1,!0),t._l(e.permissions,(function(e){return r("p",{key:"global-"+e.permission,staticClass:"mb-0"},[r("small",[t._v(" "+t._s(e.name)+" / "+t._s(e.description)+" ")])])}))],2)})),0)])])]):t._e()])},Ln=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"mb-1"},[r("small",[r("strong",[t._v("Permissions:")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"mb-0"},[r("small",[r("strong",[t._v("Permissions:")])])])}];function xn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function kn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xn(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Fn={name:"user-scoped-permissions",props:{userId:String,userPermissions:Object},components:{},data:function(){return{privateState:{}}},computed:kn({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},$n=Fn,Yn=Object(w["a"])($n,Nn,Ln,!1,null,"6f159881",null),Gn=Yn.exports;function Vn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Hn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vn(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var qn={name:"my-permissions",components:{RowLoader:Qt,UserScopedPermissions:Gn},data:function(){return{privateState:{storeTypes:H}}},computed:Hn({},Object(N["b"])({sharedState:function(t){return t},myPermissions:function(t){return t.auth.myPermissions}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Zn=qn,zn=Object(w["a"])(Zn,Pn,Un,!1,null,null,null),Bn=zn.exports,Wn=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"manage-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.COMPANY_USERS_LOAD]}}),t.companyUsers?r("div",[r("div",{staticClass:"mb-3"},[r("router-link",{attrs:{to:{name:"my-permissions"}}},[t._v("My permissions")])],1),r("div",[r("h5",{staticClass:"mb-3"},[t._v("Manage users' permissions")]),t.companyUsers?r("div",[r("div",{staticClass:"list-group"},t._l(t.companyUsers.data,(function(e){return r("router-link",{key:e.id,staticClass:"list-group-item list-group-item-action",attrs:{to:{name:"manage-company-user-permissions",params:{companyId:t.$store.getters.currentCompanyId,userId:e.id}}}},[r("p",{staticClass:"mb-1"},[t._v(" "+t._s(e.name)+" "),e.id===t.$store.getters.userId?r("small",{staticClass:"badge badge-info"},[t._v("(You)")]):t._e()]),r("p",{staticClass:"mb-0"},[r("small",[t._v(t._s(e.id))])]),r("p",{staticClass:"mb-0"},[r("small",[t._v(t._s(e.email))])])])})),1)]):t._e()])]):t._e()],1)])])},Qn=[];function Kn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Jn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Kn(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Xn={name:"manage-permissions",components:{RowLoader:Qt},data:function(){return{privateState:{storeTypes:H}}},computed:Jn({},Object(N["b"])({sharedState:function(t){return t},companyUsers:function(t){return t.userInfo&&t.userInfo.currentCompany&&t.companyUsers[t.userInfo.currentCompany.id]||null}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.companyUsers||this.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:this.$store.getters.currentCompanyId,offset:0,limit:500}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},ts=Xn,es=Object(w["a"])(ts,Wn,Qn,!1,null,null,null),rs=es.exports,as=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"manage-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"mb-3"},[r("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.$router.go(-1)}}},[r("i",{staticClass:"fas fa-long-arrow-alt-left"}),t._v(" Back")])]),r("div",[t.userPermissions?r("h5",{staticClass:"mb-3"},[t._v("Manage "+t._s(t.userPermissions.name)+" permissions")]):t._e(),r("div",{staticClass:"mb-2"},[t._m(0),r("multiselect",{attrs:{options:t.permissionList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":t.permissionLabel,"track-by":"permission",placeholder:"Select permissions",loading:t.isPermissionsLoading,disabled:t.isPermissionsLoading},on:{input:t.onScopedPermissionsChange},model:{value:t.privateState.selectedPermissions,callback:function(e){t.$set(t.privateState,"selectedPermissions",e)},expression:"privateState.selectedPermissions"}})],1),r("div",{staticClass:"mb-2"},[t._m(1),r("multiselect",{attrs:{options:t.roleList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":t.roleLabel,"track-by":"role",placeholder:"Select roles",loading:t.isPermissionsLoading,disabled:t.isPermissionsLoading},on:{input:t.onScopedRolesChange},model:{value:t.privateState.selectedRoles,callback:function(e){t.$set(t.privateState,"selectedRoles",e)},expression:"privateState.selectedRoles"}})],1)])])])])},ns=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("strong",[t._v("Permissions:")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("strong",[t._v("Roles:")])])}];function ss(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function os(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ss(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ss(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var is={name:"manage-user-permissions",components:{},props:{companyId:String,userId:String},data:function(){return{privateState:{storeTypes:H,selectedPermissions:[],selectedRoles:[]}}},computed:os({},Object(N["b"])({sharedState:function(t){return t},isPermissionsLoading:function(t){return t.loading[H.AUTH_SCOPED_PERMISSIONS_LOAD]||t.loading[H.AUTH_USER_SCOPED_PERMISSIONS_LOAD]||t.loading[H.AUTH_USER_SCOPED_PERMISSIONS_UPDATE]},permissionList:function(t){return t.auth.scopedPermissions.permissions||[]},roleList:function(t){return t.auth.scopedPermissions.roles||[]},userPermissions:function(t){return t.auth.userScopedPermissions[this.companyId]&&t.auth.userScopedPermissions[this.companyId][this.userId]?t.auth.userScopedPermissions[this.companyId][this.userId]:null}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadInitialData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{permissionLabel:function(t){return"".concat(t.groupName," - ").concat(t.name)},roleLabel:function(t){return"".concat(t.name)},loadInitialData:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:0===this.permissionList.length&&this.$store.dispatch(H.AUTH_SCOPED_PERMISSIONS_LOAD,{scopeId:this.$store.getters.currentCompanyId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.$store.dispatch(H.AUTH_USER_SCOPED_PERMISSIONS_LOAD,{scopeId:this.$store.getters.currentCompanyId,userId:this.userId}).then((function(t){e.privateState.selectedPermissions=t.permissions,e.privateState.selectedRoles=t.roles})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updatePermissions:V.a.debounce((function(t){var e=this,r=t.permissions,a=void 0===r?[]:r,n=t.roles,s=void 0===n?[]:n;this.$store.dispatch(H.AUTH_USER_SCOPED_PERMISSIONS_UPDATE,{scopeId:this.$store.getters.currentCompanyId,userId:this.userId,permissions:a.map((function(t){return t.permission})),roles:s.map((function(t){return t.role}))}).then((function(t){})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t),e.loadInitialData()}))}),1500),onScopedPermissionsChange:function(t){this.updatePermissions({permissions:this.privateState.selectedPermissions,roles:this.privateState.selectedRoles})},onScopedRolesChange:function(t){this.updatePermissions({permissions:this.privateState.selectedPermissions,roles:this.privateState.selectedRoles})}}},cs=is,ls=Object(w["a"])(cs,as,ns,!1,null,null,null),us=ls.exports,ds=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-profile-wrapper"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.AUTH_USER_ACCOUNT_LOAD]||t.sharedState.loading[t.privateState.storeTypes.USER_INFO_LOAD]}}),t.sharedState.auth.user&&t.sharedState.auth.user.profile?r("div",[r("h5",[t._v("Main info")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.updateUser(e)}}},[r("div",[r("div",{staticClass:"media"},[r("div",{staticClass:"media-body"},[r("div",[r("div",{staticClass:"form-group"},[t._m(0),r("div",[t._v(t._s(t.sharedState.auth.user.profile.sub))])]),r("div",{staticClass:"form-group"},[t._m(1),r("div",[t._v(t._s(t.sharedState.auth.user.profile.email))])]),r("div",{staticClass:"form-group"},[t._m(2),r("div",[t._v(t._s(t.sharedState.auth.user.profile.given_name))])]),r("div",{staticClass:"form-group"},[t._m(3),r("vue-tel-input",{attrs:{mode:"international",disabledFetchingCountry:!1,disabledFormatting:!1,enabledCountryCode:!0,inputClasses:[],enabledFlags:!0,required:!0},on:{validate:t.onPhoneNumberValidate},model:{value:t.privateState.userAccountModel.phoneNumber,callback:function(e){t.$set(t.privateState.userAccountModel,"phoneNumber",e)},expression:"privateState.userAccountModel.phoneNumber"}})],1),t.isPhoneChanged?r("div",{staticClass:"form-group"},[r("div",[t._m(4),r("loading-button",{staticClass:"btn btn-outline-secondary btn-sm ml-2",attrs:{type:"button",loading:t.sharedState.loading[t.privateState.storeTypes.AUTH_USER_ACCOUNT_PHONE_CHANGE_SMS_TOKEN_SEND]},nativeOn:{click:function(e){return t.sendSmsPhoneNumberChangeToken(e)}}},[t._v("Send confirmation code")])],1),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.userAccountModel.phoneNumberConfirmationToken,expression:"privateState.userAccountModel.phoneNumberConfirmationToken"}],staticClass:"form-control",attrs:{id:"userInfoModel__phoneNumberConfirmationToken",type:"text"},domProps:{value:t.privateState.userAccountModel.phoneNumberConfirmationToken},on:{input:function(e){e.target.composing||t.$set(t.privateState.userAccountModel,"phoneNumberConfirmationToken",e.target.value)}}})]):t._e()])])])]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.AUTH_USER_ACCOUNT_UPDATE]}},[t._v("Save")])],1)])])])])])]),r("h5",[t._v("Additional info")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.updateUserInfo(e)}}},[r("div",{staticClass:"form-group"},[t._m(5),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.userInfoModel.name,expression:"privateState.userInfoModel.name"}],staticClass:"form-control",attrs:{id:"userInfoModel__name",type:"text"},domProps:{value:t.privateState.userInfoModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.userInfoModel,"name",e.target.value)}}})]),r("div",{staticClass:"form-group"},[t._m(6),r("multiselect",{attrs:{id:"userInfoModel__language",options:t.languageList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","custom-label":t.languageLabel,"track-by":"code",placeholder:"Select language",loading:t.isLanguagesLoading,disabled:t.isLanguagesLoading},on:{input:t.onLanguageChange},model:{value:t.privateState.userInfoModel.language,callback:function(e){t.$set(t.privateState.userInfoModel,"language",e)},expression:"privateState.userInfoModel.language"}})],1),r("div",{staticClass:"form-group"},[t._m(7),r("multiselect",{attrs:{id:"userInfoModel__country",options:t.countryList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","custom-label":t.countryLabel,"track-by":"code",placeholder:"Select country",loading:t.isCountriesLoading,disabled:t.isCountriesLoading},on:{input:t.onCountryChange},model:{value:t.privateState.userInfoModel.country,callback:function(e){t.$set(t.privateState.userInfoModel,"country",e)},expression:"privateState.userInfoModel.country"}})],1),r("div",{staticClass:"form-group"},[t._m(8),r("multiselect",{attrs:{id:"userInfoModel__timeZone",options:t.timeZoneList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"timeZoneId","custom-label":t.timeZoneLabel,"track-by":"timeZoneId",placeholder:"Select timezone",loading:t.isTimeZonesLoading,disabled:t.isTimeZonesLoading},on:{input:t.onTimeZoneChange},model:{value:t.privateState.userInfoModel.timeZone,callback:function(e){t.$set(t.privateState.userInfoModel,"timeZone",e)},expression:"privateState.userInfoModel.timeZone"}}),t._m(9)],1),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.USER_INFO_UPDATE]}},[t._v("Save")])],1)])])])])])]),r("h5",[t._v("Notifications")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.updateNotifications(e)}}},[r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.notificationsModel.isAlarmEnabled,expression:"privateState.notificationsModel.isAlarmEnabled"}],staticClass:"form-check-input",attrs:{id:"isAlarmEnabled",type:"checkbox"},domProps:{checked:Array.isArray(t.privateState.notificationsModel.isAlarmEnabled)?t._i(t.privateState.notificationsModel.isAlarmEnabled,null)>-1:t.privateState.notificationsModel.isAlarmEnabled},on:{change:function(e){var r=t.privateState.notificationsModel.isAlarmEnabled,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.notificationsModel,"isAlarmEnabled",r.concat([s])):o>-1&&t.$set(t.privateState.notificationsModel,"isAlarmEnabled",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.notificationsModel,"isAlarmEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"isAlarmEnabled"}},[t._v("Alarm enabled")])]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.notificationsModel.isAlarmSoundEnabled,expression:"privateState.notificationsModel.isAlarmSoundEnabled"}],staticClass:"form-check-input",attrs:{id:"isAlarmSoundEnabled",type:"checkbox"},domProps:{checked:Array.isArray(t.privateState.notificationsModel.isAlarmSoundEnabled)?t._i(t.privateState.notificationsModel.isAlarmSoundEnabled,null)>-1:t.privateState.notificationsModel.isAlarmSoundEnabled},on:{change:function(e){var r=t.privateState.notificationsModel.isAlarmSoundEnabled,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.notificationsModel,"isAlarmSoundEnabled",r.concat([s])):o>-1&&t.$set(t.privateState.notificationsModel,"isAlarmSoundEnabled",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.notificationsModel,"isAlarmSoundEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"isAlarmSoundEnabled"}},[t._v("Alarm sound")])]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.notificationsModel.isDoNotDisturbEnabled,expression:"privateState.notificationsModel.isDoNotDisturbEnabled"}],staticClass:"form-check-input",attrs:{id:"isDoNotDisturbEnabled",type:"checkbox"},domProps:{checked:Array.isArray(t.privateState.notificationsModel.isDoNotDisturbEnabled)?t._i(t.privateState.notificationsModel.isDoNotDisturbEnabled,null)>-1:t.privateState.notificationsModel.isDoNotDisturbEnabled},on:{change:function(e){var r=t.privateState.notificationsModel.isDoNotDisturbEnabled,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.notificationsModel,"isDoNotDisturbEnabled",r.concat([s])):o>-1&&t.$set(t.privateState.notificationsModel,"isDoNotDisturbEnabled",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.notificationsModel,"isDoNotDisturbEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"isDoNotDisturbEnabled"}},[t._v("Do not disturb")])]),t.privateState.notificationsModel.isDoNotDisturbEnabled?r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"doNotDisturbFrom"}},[t._v("From")]),r("time-input",{model:{value:t.privateState.notificationsModel.doNotDisturbFrom,callback:function(e){t.$set(t.privateState.notificationsModel,"doNotDisturbFrom",e)},expression:"privateState.notificationsModel.doNotDisturbFrom"}})],1)]),r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"doNotDisturbTo"}},[t._v("To")]),r("time-input",{model:{value:t.privateState.notificationsModel.doNotDisturbTo,callback:function(e){t.$set(t.privateState.notificationsModel,"doNotDisturbTo",e)},expression:"privateState.notificationsModel.doNotDisturbTo"}})],1)])])]):t._e(),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.USER_INFO_NOTIFICATIONS_UPDATE]}},[t._v("Save")])],1)])])])])])]),r("h5",[t._v("Security")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[t._m(10),r("hr"),r("form",{on:{submit:function(e){return e.preventDefault(),t.changePassword(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPassword"}},[t._v("Old password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.passwordChangeModel.passwordOld,expression:"privateState.passwordChangeModel.passwordOld"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Old password",autocomplete:"new-password"},domProps:{value:t.privateState.passwordChangeModel.passwordOld},on:{input:function(e){e.target.composing||t.$set(t.privateState.passwordChangeModel,"passwordOld",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPassword"}},[t._v("New password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.passwordChangeModel.passwordNew,expression:"privateState.passwordChangeModel.passwordNew"}],staticClass:"form-control",attrs:{type:"password",placeholder:"New password",autocomplete:"new-password"},domProps:{value:t.privateState.passwordChangeModel.passwordNew},on:{input:function(e){e.target.composing||t.$set(t.privateState.passwordChangeModel,"passwordNew",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPasswordConfirm"}},[t._v("Confirm new password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.passwordChangeModel.passwordNewConfirm,expression:"privateState.passwordChangeModel.passwordNewConfirm"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Confirm new password",autocomplete:"new-password"},domProps:{value:t.privateState.passwordChangeModel.passwordNewConfirm},on:{input:function(e){e.target.composing||t.$set(t.privateState.passwordChangeModel,"passwordNewConfirm",e.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.AUTH_USER_PASSWORD_CHANGE]}},[t._v("Change password")])],1)])])])])])]),r("h5",[t._v("Danger Zone")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-danger"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center"},[t._m(11),r("loading-button",{staticClass:"btn-danger",attrs:{type:"button",loading:t.sharedState.loading[t.privateState.storeTypes.AUTH_USER_ACCOUNT_DELETE]},nativeOn:{click:function(e){return t.deleteAccount()}}},[t._v("Delete")])],1)])])])])]):t._e()],1)},ps=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:""}},[r("strong",[t._v("#id")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:""}},[r("strong",[t._v("Email")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:""}},[r("strong",[t._v("Given name (username)")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"userInfoModel__phone"}},[r("strong",[t._v("Phone")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"userInfoModel__phoneNumberConfirmationToken"}},[r("strong",[t._v("Phone confirmation")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"userInfoModel__name"}},[r("strong",[t._v("Name")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"userInfoModel__language"}},[r("strong",[t._v("Language")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"userInfoModel__country"}},[r("strong",[t._v("Country")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"userInfoModel__timeZone"}},[r("strong",[t._v("Timezone")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("small",[t._v("UTC is used by default if timezone isn't set.")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("strong",[t._v("Change password")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"text-danger"},[r("div",[r("strong",[t._v("Delete account")])]),r("div",[r("small",[t._v("You account and all related data will be deleted!")])]),r("div",[r("small",[t._v("NB: This action is irreversible!")])])])}],ms=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("datetime",{attrs:{type:"time",placeholder:"To","input-class":"form-control app-datetime-input","value-zone":"UTC",zone:"local",format:"HH:mm"},on:{input:t.onChange},model:{value:t.privateState.selectedDateTime,callback:function(e){t.$set(t.privateState,"selectedDateTime",e)},expression:"privateState.selectedDateTime"}})},fs=[];r("1276");function vs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function hs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vs(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var gs={name:"time-input",props:{value:{type:String,required:!0,default:null}},components:{},data:function(){return{privateState:{storeTypes:H,selectedDateTime:null}}},computed:hs({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){if(this.value){var t=this.value.split(":"),e=parseInt(t[0]),r=parseInt(t[1]),a=parseInt(t[2]);this.privateState.selectedDateTime=ra()().set("hour",e).set("minute",r).set("second",a).format(),console.log(t,this.privateState.selectedDateTime)}},mounted:function(){},updated:function(){},destroyed:function(){},methods:{onChange:function(t,e){var r=t,a=ra()(r).format("HH:mm");this.$emit("input",a)}}},bs=gs,_s=Object(w["a"])(bs,ms,fs,!1,null,"60eaab36",null),Ss=_s.exports;function ys(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Os(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ys(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ys(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Es,Cs,Is={phoneNumber:null,phoneNumberConfirmationToken:null},Ts={name:null,language:null,country:null,timeZone:null},ws={isAlarmEnabled:!1,isAlarmSoundEnabled:!1,isDoNotDisturbEnabled:!1,doNotDisturbFrom:null,doNotDisturbTo:null},Ds={passwordOld:"",passwordNew:"",passwordNewConfirm:""},As={name:"user-profile",components:{RowLoader:Qt,LoadingButton:re,TimeInput:Ss},props:{},data:function(){return{privateState:{storeTypes:H,userAccountModel:Os({},Is),userInfoModel:Os({},Ts),notificationsModel:Os({},ws),passwordChangeModel:Os({},Ds)}}},computed:Os({},Object(N["b"])({sharedState:function(t){return t},isLanguagesLoading:function(t){return t.loading[H.LANGUAGES_LOAD]},isCountriesLoading:function(t){return t.loading[H.COUNTRIES_LOAD]},isTimeZonesLoading:function(t){return t.loading[H.TIMEZONES_LOAD]},languageList:function(t){return t.languages||[]},countryList:function(t){return t.countries||[]},timeZoneList:function(t){return t.timeZones||[]}}),{isPhoneChanged:function(){return this.privateState.userAccountModel.phoneNumber!==((this.sharedState.userAccount||{}).phoneNumber||null)}}),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.sharedState.userAccount||this.$store.dispatch(H.AUTH_USER_ACCOUNT_LOAD,{}),this.sharedState.userInfo||this.$store.dispatch(H.USER_INFO_LOAD,{}),this.sharedState.countries||this.$store.dispatch(H.COUNTRIES_LOAD,{}),this.sharedState.languages||this.$store.dispatch(H.LANGUAGES_LOAD,{}),this.sharedState.timeZones||this.$store.dispatch(H.TIMEZONES_LOAD,{}),this.privateState.userAccountModel=Os({},Is,{},this.sharedState.userAccount||{}),this.privateState.userInfoModel=Os({},Ts,{},this.sharedState.userInfo||{}),this.privateState.notificationsModel=Os({},ws,{},(this.sharedState.userInfo||{}).notificationSettings||{}),this.$store.subscribe((function(t,r){var a=t.type;t.payload;a===H.AUTH_USER_ACCOUNT_SET&&(e.privateState.userAccountModel=Os({},e.privateState.userAccountModel,{},r.userAccount)),a===H.USER_INFO_SET&&(e.privateState.userInfoModel=Os({},e.privateState.userInfoModel,{},r.userInfo),e.privateState.notificationsModel=Os({},e.privateState.notificationsModel,{},r.userInfo.notificationSettings))}));case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{onPhoneNumberValidate:function(t){var e=t.number,r=(t.isValid,t.country);e.e164,e.input,e.international,e.national,e.rfc3966,e.significant,r.areaCodes,r.dialCode,r.iso2,r.name,r.priority},languageLabel:function(t){return"".concat(t.name," / ").concat(t.nativeName)},countryLabel:function(t){return"".concat(t.name," (").concat(t.code,")")},timeZoneLabel:function(t){return"".concat(t.timeZoneId," (").concat(t.countryName," / ").concat(t.countryCode," ").concat(t.comment?"/ ".concat(t.comment):"",")")},onLanguageChange:function(t){},onCountryChange:function(t){},onTimeZoneChange:function(t){},sendSmsPhoneNumberChangeToken:function(){this.$store.dispatch(H.AUTH_USER_ACCOUNT_PHONE_CHANGE_SMS_TOKEN_SEND,{phoneNumber:this.privateState.userAccountModel.phoneNumber}).then((function(){})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},updateUser:function(){var t=this;this.$store.dispatch(H.AUTH_USER_ACCOUNT_UPDATE,{data:{phoneNumber:this.privateState.userAccountModel.phoneNumber,phoneNumberConfirmationToken:this.privateState.userAccountModel.phoneNumberConfirmationToken}}).then((function(){t.privateState.userAccountModel.phoneNumberConfirmationToken=null,li.refreshTokens({withFullscreenLoader:!1})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},updateUserInfo:function(){this.$store.dispatch(H.USER_INFO_UPDATE,{data:{name:this.privateState.userInfoModel.name,language:this.privateState.userInfoModel.language,country:this.privateState.userInfoModel.country,timeZone:this.privateState.userInfoModel.timeZone}}).then((function(){li.refreshTokens({withFullscreenLoader:!1})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},updateNotifications:function(){this.$store.dispatch(H.USER_INFO_NOTIFICATIONS_UPDATE,{data:Os({},this.privateState.notificationsModel)}).then((function(){li.refreshTokens({withFullscreenLoader:!1})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},changePassword:function(){var t=this;this.$store.dispatch(H.AUTH_USER_PASSWORD_CHANGE,Os({},this.privateState.passwordChangeModel)).then((function(){t.$notify({group:"app-important",type:"success",title:"You account password has been changed.",text:""}),t.privateState.passwordChangeModel=Os({},Ds),li.refreshTokens({withFullscreenLoader:!1})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteAccount:function(){var t=this;Ea.handleUserConfirmationFlow({actionF:function(e){var r=e.userConfirmation;return t.$store.dispatch(H.AUTH_USER_ACCOUNT_DELETE,{userConfirmation:r})}}).then((function(e){var r=e.isProcessed;r&&li.logoutWithoutRedirect().then((function(){t.$router.push({name:"home"})})).catch((function(t){console.error(t),window.alert("Something went wrong. Try to refresh the page.")}))})).catch((function(t){console.error(t)}))}}},Rs=As,Ms=Object(w["a"])(Rs,ds,ps,!1,null,null,null),js=Ms.exports,Ps=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"sensorTelemetry"}},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.SENSOR_TELEMETRY_LOAD]}}),t.sharedState.sensorTelemetries?r("div",{class:{"block-disabled":t.sharedState.loading[t.privateState.storeTypes.SENSOR_TELEMETRY_LOAD]}},[r("div",{staticClass:"mb-5"},[r("div",{staticClass:"row justify-content-between"},[r("div",{staticClass:"col-3"},[r("div",{staticClass:"d-flex"},[r("div",[r("datetime",{attrs:{type:"date",placeholder:"Date from","input-class":"form-control app-datetime-input","value-zone":"UTC",zone:"local",format:"yyyy-MM-dd"},on:{input:t.onDateFromChange},model:{value:t.privateState.dateFrom,callback:function(e){t.$set(t.privateState,"dateFrom",e)},expression:"privateState.dateFrom"}})],1),r("div",{staticClass:"ml-1"},[r("datetime",{attrs:{type:"date",placeholder:"Date to","input-class":"form-control app-datetime-input","value-zone":"UTC",zone:"local",format:"yyyy-MM-dd"},on:{input:t.onDateToChange},model:{value:t.privateState.dateTo,callback:function(e){t.$set(t.privateState,"dateTo",e)},expression:"privateState.dateTo"}})],1)])]),r("div",{staticClass:"col-3 no-print"},[r("div",{staticClass:"d-flex justify-content-end"},[r("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:t.exportPDF}},[r("i",{staticClass:"fas fa-file-pdf mr-1"}),t._v("Export PDF")]),r("button",{staticClass:"btn btn-sm btn-outline-secondary ml-1",attrs:{type:"button"},on:{click:t.exportCSV}},[r("i",{staticClass:"fas fa-file-csv mr-1"}),t._v("Export CSV")]),r("loading-button",{staticClass:"btn btn-sm btn-outline-secondary ml-1",attrs:{type:"button",loading:t.privateState.isExportPrintLoading},nativeOn:{click:function(e){return t.exportPrint(e)}}},[r("i",{staticClass:"fas fa-print mr-1"}),t._v("Print ")])],1)])]),r("sensor-telementry-chart",{attrs:{chartData:t.telemetryChartData,options:{responsive:!0,maintainAspectRatio:!1}}})],1),r("table",{staticClass:"table table-sm table-hover"},[t._m(0),r("tbody",t._l(t.sharedState.sensorTelemetries.data,(function(e){return r("tr",{key:e.id,class:{"table-success":!e.isLimitExceeded,"table-danger":e.isLimitExceeded}},[r("th",{attrs:{scope:"row"}},[t._v(t._s(e.id))]),r("td",[t._v(t._s(e.isLimitExceeded))]),r("td",[t._v(t._s(e.createdAt))]),r("td",[t._v(t._s(e.channel))]),r("td",[t._v(t._s(e.value))]),r("td",[t._v(t._s(e.metric))]),r("td",[t._v(t._s(e.isforced))]),r("td",[t._v(t._s(e.comment))])])})),0)])]):t._e()],1)},Us=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("#")]),r("th",{attrs:{scope:"col"}},[t._v("IsLimitExceeded")]),r("th",{attrs:{scope:"col"}},[t._v("CreatedAt")]),r("th",{attrs:{scope:"col"}},[t._v("Channel")]),r("th",{attrs:{scope:"col"}},[t._v("Value")]),r("th",{attrs:{scope:"col"}},[t._v("Metric")]),r("th",{attrs:{scope:"col"}},[t._v("Isforced")]),r("th",{attrs:{scope:"col"}},[t._v("Comment")])])])}],Ns=(r("b680"),r("add5")),Ls=r.n(Ns),xs=r("1fca"),ks=xs["b"].reactiveProp,Fs={extends:xs["a"],mixins:[ks],props:{chartData:{type:Object,default:null},options:{type:Object,default:null}},data:function(){return{}},mounted:function(){this.renderChart(this.chartData,this.options)}},$s=Fs,Ys=Object(w["a"])($s,Es,Cs,!1,null,null,null),Gs=Ys.exports;function Vs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Hs(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Vs(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var qs=ra()().utcOffset(0).subtract(1,"days").startOf("day").format(),Zs=ra()().utcOffset(0).endOf("day").format(),zs={name:"sensor-telemetry",components:{RowLoader:Qt,LoadingButton:re,"sensor-telementry-chart":Gs},data:function(){return{privateState:{storeTypes:H,dateFrom:qs,dateTo:Zs,isExportPrintLoading:!1}}},computed:Hs({},Object(N["b"])({sharedState:function(t){return t}}),{telemetryChartData:function(){var t=this,e=this.sharedState.sensorTelemetries.data.map((function(e){return or.formatAccordingToInterval(or.formatInUserTimeZone(e.createdAt),t.privateState.dateFrom,t.privateState.dateTo)}));return{labels:Object(Er["a"])(e),datasets:[{label:"Temperature (Celsius)",backgroundColor:"#13B1E8",borderColor:"#13B1E8",data:this.sharedState.sensorTelemetries.data.map((function(t){return parseFloat(t.value.toFixed(2))})),fill:!1}]}}}),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadData();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){this.$store.commit(H.SENSOR_TELEMETRY_SET,{sensorTelemetries:null})},methods:{loadData:function(){this.$store.dispatch(H.SENSOR_TELEMETRY_LOAD,{companyId:this.$store.getters.currentCompanyId,sensorId:this.$route.params.sensorId,offset:0,limit:1e3,dateFrom:this.privateState.dateFrom,dateTo:this.privateState.dateTo}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onDateFromChange:function(t){this.loadData()},onDateToChange:function(t){this.loadData()},exportPDF:function(){alert("Will be available soon.")},exportCSV:function(){alert("Will be available soon.")},exportPrint:function(){var t=this;this.privateState.isExportPrintLoading=!0,setTimeout((function(){var e="",r=["css/print.css"];Ls()({printable:"sensorTelemetry",type:"html",header:null,maxWidth:800,css:r,style:e,scanStyles:!0,targetStyles:["*"],onLoadingStart:function(){t.privateState.isExportPrintLoading=!0},onLoadingEnd:function(){t.privateState.isExportPrintLoading=!1}})}),10)}}},Bs=zs,Ws=Object(w["a"])(Bs,Ps,Us,!1,null,null,null),Qs=Ws.exports,Ks=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-profile-wrapper company-user-profile-wrapper"},[r("row-loader",{staticClass:"mb-3",attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.SENSOR_LOAD]}}),r("div",[r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12 col-md-5"},[r("h5",{staticClass:"mt-0"},[t._v("Sensor")]),t.sensor?r("div",{class:{"block-disabled":t.sharedState.loading[t.privateState.storeTypes.SENSOR_LOAD]}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.updateSensor(e)}}},[r("div",[r("div",{staticClass:"form-group"},[t._m(0),r("div",[t._v(t._s(t.sensor.id))])]),r("div",{staticClass:"form-group"},[t._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.sensorModel.name,expression:"privateState.sensorModel.name"}],staticClass:"form-control",attrs:{id:"sensorModel__name",type:"text"},domProps:{value:t.privateState.sensorModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.sensorModel,"name",e.target.value)}}})]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.sensorModel.isIgnoranceIntervalEnabled,expression:"privateState.sensorModel.isIgnoranceIntervalEnabled"}],staticClass:"form-check-input",attrs:{id:"sensorModel__isIgnoranceIntervalEnabled",type:"checkbox"},domProps:{checked:Array.isArray(t.privateState.sensorModel.isIgnoranceIntervalEnabled)?t._i(t.privateState.sensorModel.isIgnoranceIntervalEnabled,null)>-1:t.privateState.sensorModel.isIgnoranceIntervalEnabled},on:{change:function(e){var r=t.privateState.sensorModel.isIgnoranceIntervalEnabled,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.sensorModel,"isIgnoranceIntervalEnabled",r.concat([s])):o>-1&&t.$set(t.privateState.sensorModel,"isIgnoranceIntervalEnabled",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.sensorModel,"isIgnoranceIntervalEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"sensorModel__isIgnoranceIntervalEnabled"}},[t._v("Enable ignorance interval")]),t._m(2)]),t.privateState.sensorModel.isIgnoranceIntervalEnabled?r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[t._m(3),r("time-input",{model:{value:t.privateState.sensorModel.ignoranceIntervalFrom,callback:function(e){t.$set(t.privateState.sensorModel,"ignoranceIntervalFrom",e)},expression:"privateState.sensorModel.ignoranceIntervalFrom"}})],1)]),r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[t._m(4),r("time-input",{model:{value:t.privateState.sensorModel.ignoranceIntervalTo,callback:function(e){t.$set(t.privateState.sensorModel,"ignoranceIntervalTo",e)},expression:"privateState.sensorModel.ignoranceIntervalTo"}})],1)])])]):t._e(),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.sensorModel.notificationSettings.isAlarmEnabled,expression:"privateState.sensorModel.notificationSettings.isAlarmEnabled"}],staticClass:"form-check-input",attrs:{id:"sensorModel__notificationSettings__isAlarmEnabled",type:"checkbox"},domProps:{checked:Array.isArray(t.privateState.sensorModel.notificationSettings.isAlarmEnabled)?t._i(t.privateState.sensorModel.notificationSettings.isAlarmEnabled,null)>-1:t.privateState.sensorModel.notificationSettings.isAlarmEnabled},on:{change:function(e){var r=t.privateState.sensorModel.notificationSettings.isAlarmEnabled,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.sensorModel.notificationSettings,"isAlarmEnabled",r.concat([s])):o>-1&&t.$set(t.privateState.sensorModel.notificationSettings,"isAlarmEnabled",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.sensorModel.notificationSettings,"isAlarmEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"sensorModel__notificationSettings__isAlarmEnabled"}},[t._v("Enable alrams")]),t._m(5)])]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.SENSOR_UPDATE]}},[t._v("Save")])],1)])])]):t._e()])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12 col-md-12"},[r("h5",{staticClass:"mt-0"},[t._v("Calibrations")]),t.sensor&&t.sensor.calibrations?r("div",[r("div",{staticClass:"mb-3"},[r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.onCreateCalibration}},[r("i",{staticClass:"fas fa-plus"})])]),r("div",{class:{"block-disabled":t.isCalibrationLoading}},[r("table",{staticClass:"table table-hover"},[t._m(6),r("tbody",t._l(t.sensor.calibrations,(function(e){return r("tr",{key:e.id,class:{}},[r("th",{attrs:{scope:"row"}},[t._v(" "+t._s(e.id)+" ")]),r("td",[t._v(" "+t._s(e.name)+" ")]),r("td",[t._v(" "+t._s(e.channel)+" ")]),r("td",[t._v(" "+t._s(e.metrics)+" ")]),r("td",[t._v(" "+t._s(e.originalValue)+" ")]),r("td",[t._v(" "+t._s(e.calibratedValue)+" ")]),r("td",[r("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(r){return t.onEditCalibration(e.id)}}},[r("i",{staticClass:"far fa-edit"})]),r("button",{staticClass:"btn btn-outline-danger btn-sm ml-1",on:{click:function(r){return t.deleteCalibration(e.id)}}},[r("i",{staticClass:"fas fa-minus"})])])])})),0)])]),r("modal",{attrs:{name:"calibration-create-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[t.privateState.calibrationCreateModel.isEdit?t._e():r("span",[t._v("Create")]),t.privateState.calibrationCreateModel.isEdit?r("span",[t._v("Edit")]):t._e(),t._v(" calibration ")]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("calibration-create-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){e.preventDefault(),t.privateState.calibrationCreateModel.isEdit?t.editCalibration():t.createCalibration()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__name"}},[r("strong",[t._v("Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.calibrationCreateModel.name,expression:"privateState.calibrationCreateModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"calibrationCreateModel__name",placeholder:"Name"},domProps:{value:t.privateState.calibrationCreateModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.calibrationCreateModel,"name",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__channel"}},[r("strong",[t._v("Channel")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.privateState.calibrationCreateModel.channel,expression:"privateState.calibrationCreateModel.channel"}],staticClass:"form-control",attrs:{id:"calibrationCreateModel__channel"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.privateState.calibrationCreateModel,"channel",e.target.multiple?r:r[0])}}},t._l(t.telemetryChannels,(function(e){return r("option",{key:e,domProps:{value:e,selected:e===t.privateState.calibrationCreateModel.channel}},[t._v(" "+t._s(e)+" ")])})),0)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__metrics"}},[r("strong",[t._v("Measurement unit")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.privateState.calibrationCreateModel.metrics,expression:"privateState.calibrationCreateModel.metrics"}],staticClass:"form-control",attrs:{id:"calibrationCreateModel__metrics"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.privateState.calibrationCreateModel,"metrics",e.target.multiple?r:r[0])}}},t._l(t.measurementUnits,(function(e){return r("option",{key:e,domProps:{value:e,selected:e===t.privateState.calibrationCreateModel.metrics}},[t._v(" "+t._s(e)+" ")])})),0)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__originalValue"}},[r("strong",[t._v("Original Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.calibrationCreateModel.originalValue,expression:"privateState.calibrationCreateModel.originalValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"calibrationCreateModel__originalValue",placeholder:"Original"},domProps:{value:t.privateState.calibrationCreateModel.originalValue},on:{input:function(e){e.target.composing||t.$set(t.privateState.calibrationCreateModel,"originalValue",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__calibratedValue"}},[r("strong",[t._v("Calibrated Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.calibrationCreateModel.calibratedValue,expression:"privateState.calibrationCreateModel.calibratedValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"calibrationCreateModel__calibratedValue",placeholder:"Calibrated"},domProps:{value:t.privateState.calibrationCreateModel.calibratedValue},on:{input:function(e){e.target.composing||t.$set(t.privateState.calibrationCreateModel,"calibratedValue",e.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.SENSOR_CALIBRATION_CREATE]||t.sharedState.loading[t.privateState.storeTypes.SENSOR_CALIBRATION_UPDATE]}},[t.privateState.calibrationCreateModel.isEdit?t._e():r("span",[t._v("Create")]),t.privateState.calibrationCreateModel.isEdit?r("span",[t._v("Save")]):t._e()])],1)])])])],1):t._e()])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col"},[r("h5",{staticClass:"mt-0"},[t._v("Telemetry rules")]),t.sensor&&t.sensor.telemetryRules?r("div",[r("div",{staticClass:"mb-3"},[r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.onCreateTelemetryRule}},[r("i",{staticClass:"fas fa-plus"})])]),r("div",{class:{"block-disabled":t.isTelemetryRuleLoading}},[r("table",{staticClass:"table table-hover"},[t._m(7),r("tbody",t._l(t.sensor.telemetryRules,(function(e){return r("tr",{key:e.id,class:{}},[r("th",{attrs:{scope:"row"}},[t._v(" "+t._s(e.id)+" ")]),r("td",[t._v(" "+t._s(e.name)+" ")]),r("td",[t._v(" "+t._s(e.channel)+" ")]),r("td",[t._v(" "+t._s(e.metrics)+" ")]),r("td",[t._v(" "+t._s(e.isAlarmEnabled)+" ")]),r("td",[t._v(" "+t._s(e.minAllowedValue)+" ")]),r("td",[t._v(" "+t._s(e.maxAllowedValue)+" ")]),r("td",[r("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(r){return t.onEditTelemetryRule(e.id)}}},[r("i",{staticClass:"far fa-edit"})]),r("button",{staticClass:"btn btn-outline-danger btn-sm ml-1",on:{click:function(r){return t.deleteTelemetryRule(e.id)}}},[r("i",{staticClass:"fas fa-minus"})])])])})),0)])]),r("modal",{attrs:{name:"telemetry-rule-create-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[t.privateState.telemetryRuleCreateModel.isEdit?t._e():r("span",[t._v("Create")]),t.privateState.telemetryRuleCreateModel.isEdit?r("span",[t._v("Edit")]):t._e(),t._v(" telemetry rule ")]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("telemetry-rule-create-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){e.preventDefault(),t.privateState.telemetryRuleCreateModel.isEdit?t.editTelemetryRule():t.createTelemetryRule()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__name"}},[r("strong",[t._v("Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.telemetryRuleCreateModel.name,expression:"privateState.telemetryRuleCreateModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"telemetryRuleCreateModel__name",placeholder:"Name"},domProps:{value:t.privateState.telemetryRuleCreateModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.telemetryRuleCreateModel,"name",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:""}},[t._v("Name must be unique.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__channel"}},[r("strong",[t._v("Channel")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.privateState.telemetryRuleCreateModel.channel,expression:"privateState.telemetryRuleCreateModel.channel"}],staticClass:"form-control",attrs:{id:"telemetryRuleCreateModel__channel"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.privateState.telemetryRuleCreateModel,"channel",e.target.multiple?r:r[0])}}},t._l(t.telemetryChannels,(function(e){return r("option",{key:e,domProps:{value:e,selected:e===t.privateState.telemetryRuleCreateModel.channel}},[t._v(" "+t._s(e)+" ")])})),0)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__metrics"}},[r("strong",[t._v("Measurement unit")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.privateState.telemetryRuleCreateModel.metrics,expression:"privateState.telemetryRuleCreateModel.metrics"}],staticClass:"form-control",attrs:{id:"telemetryRuleCreateModel__metrics"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.privateState.telemetryRuleCreateModel,"metrics",e.target.multiple?r:r[0])}}},t._l(t.measurementUnits,(function(e){return r("option",{key:e,domProps:{value:e,selected:e===t.privateState.telemetryRuleCreateModel.metrics}},[t._v(" "+t._s(e)+" ")])})),0)]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.telemetryRuleCreateModel.isAlarmEnabled,expression:"privateState.telemetryRuleCreateModel.isAlarmEnabled"}],staticClass:"form-check-input",attrs:{id:"telemetryRuleCreateModel__isAlarmEnabled",type:"checkbox"},domProps:{checked:Array.isArray(t.privateState.telemetryRuleCreateModel.isAlarmEnabled)?t._i(t.privateState.telemetryRuleCreateModel.isAlarmEnabled,null)>-1:t.privateState.telemetryRuleCreateModel.isAlarmEnabled},on:{change:function(e){var r=t.privateState.telemetryRuleCreateModel.isAlarmEnabled,a=e.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=t._i(r,s);a.checked?o<0&&t.$set(t.privateState.telemetryRuleCreateModel,"isAlarmEnabled",r.concat([s])):o>-1&&t.$set(t.privateState.telemetryRuleCreateModel,"isAlarmEnabled",r.slice(0,o).concat(r.slice(o+1)))}else t.$set(t.privateState.telemetryRuleCreateModel,"isAlarmEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"telemetryRuleCreateModel__isAlarmEnabled"}},[t._v("Enable alarms")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__minAllowedValue"}},[r("strong",[t._v("Min Allowed Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.telemetryRuleCreateModel.minAllowedValue,expression:"privateState.telemetryRuleCreateModel.minAllowedValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"telemetryRuleCreateModel__minAllowedValue",placeholder:"Min"},domProps:{value:t.privateState.telemetryRuleCreateModel.minAllowedValue},on:{input:function(e){e.target.composing||t.$set(t.privateState.telemetryRuleCreateModel,"minAllowedValue",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__maxAllowedValue"}},[r("strong",[t._v("Max Allowed Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.telemetryRuleCreateModel.maxAllowedValue,expression:"privateState.telemetryRuleCreateModel.maxAllowedValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"telemetryRuleCreateModel__maxAllowedValue",placeholder:"Max"},domProps:{value:t.privateState.telemetryRuleCreateModel.maxAllowedValue},on:{input:function(e){e.target.composing||t.$set(t.privateState.telemetryRuleCreateModel,"maxAllowedValue",e.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.SENSOR_TELEMETRY_RULE_CREATE]||t.sharedState.loading[t.privateState.storeTypes.SENSOR_TELEMETRY_RULE_UPDATE]}},[t.privateState.telemetryRuleCreateModel.isEdit?t._e():r("span",[t._v("Create")]),t.privateState.telemetryRuleCreateModel.isEdit?r("span",[t._v("Save")]):t._e()])],1)])])])],1):t._e()])])])],1)},Js=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:""}},[r("strong",[t._v("#id")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"sensorModel__name"}},[r("strong",[t._v("Name")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("small",[t._v("Ingorance interval - the interval when all sensor telemetry is ignored.")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"sensorModel__ignoranceIntervalFrom"}},[r("strong",[t._v("From")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"sensorModel__ignoranceIntervalTo"}},[r("strong",[t._v("To")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("small",[t._v("If alarms are disabled you won't get notified about emergencies.")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{},[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("#")]),r("th",{attrs:{scope:"col"}},[t._v("Name")]),r("th",{attrs:{scope:"col"}},[t._v("Channel")]),r("th",{attrs:{scope:"col"}},[t._v("Metrics")]),r("th",{attrs:{scope:"col"}},[t._v("OriginalValue")]),r("th",{attrs:{scope:"col"}},[t._v("Calibrated Value")]),r("th",{attrs:{scope:"col"}})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{},[r("tr",[r("th",{attrs:{scope:"col"}},[t._v("#")]),r("th",{attrs:{scope:"col"}},[t._v("Name")]),r("th",{attrs:{scope:"col"}},[t._v("Channel")]),r("th",{attrs:{scope:"col"}},[t._v("Metrics")]),r("th",{attrs:{scope:"col"}},[t._v("Alarm Enabled")]),r("th",{attrs:{scope:"col"}},[t._v("Min Allowed Value")]),r("th",{attrs:{scope:"col"}},[t._v("Max Allowed Value")]),r("th",{attrs:{scope:"col"}})])])}];function Xs(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function to(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xs(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xs(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var eo={name:null,isIgnoranceIntervalEnabled:!1,ignoranceIntervalFrom:null,ignoranceIntervalTo:null,notificationSettings:{isAlarmEnabled:!1}},ro={isEdit:!1,id:null,originalValue:0,calibratedValue:0},ao={isEdit:!1,id:null,isAlarmEnabled:!0,minAllowedValue:0,maxAllowedValue:0},no={name:"sensor-manage",components:{RowLoader:Qt,LoadingButton:re,TimeInput:Ss},props:{companyId:String,sensorId:String},data:function(){return{privateState:{storeTypes:H,sensorModel:to({},eo),calibrationCreateModel:to({},ro),telemetryRuleCreateModel:to({},ao)}}},computed:to({},Object(N["b"])({sharedState:function(t){return t},isCalibrationLoading:function(t){return t.loading[H.SENSOR_LOAD]||t.loading[H.SENSOR_CALIBRATION_CREATE]||t.loading[H.SENSOR_CALIBRATION_UPDATE]||t.loading[H.SENSOR_CALIBRATION_DELETE]},isTelemetryRuleLoading:function(t){return t.loading[H.SENSOR_LOAD]||t.loading[H.SENSOR_TELEMETRY_RULE_CREATE]||t.loading[H.SENSOR_TELEMETRY_RULE_UPDATE]||t.loading[H.SENSOR_TELEMETRY_RULE_DELETE]},sensor:function(t){return t.sensor[this.companyId]&&t.sensor[this.companyId][this.sensorId]?t.sensor[this.companyId][this.sensorId]:null},telemetryChannels:function(t){return t.enums&&t.enums["telemetryChannel"]||[]},measurementUnits:function(t){return t.enums&&t.enums["measurementUnit"]||[]}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.dispatch(H.SENSOR_LOAD,{companyId:this.companyId,sensorId:this.sensorId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.sharedState.enums||this.$store.dispatch(H.ENUMS_LOAD,{}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.privateState.sensorModel=to({},eo,{},this.sensor||{}),this.$store.subscribe((function(t,r){var a=t.type;t.payload;a===H.SENSOR_SET&&(e.privateState.sensorModel=to({},e.privateState.sensorModelDefault,{},e.sensor||{}))}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{updateSensor:function(){this.$store.dispatch(H.SENSOR_UPDATE,{companyId:this.companyId,sensorId:this.sensorId,data:{name:this.privateState.sensorModel.name,isIgnoranceIntervalEnabled:this.privateState.sensorModel.isIgnoranceIntervalEnabled,ignoranceIntervalFrom:this.privateState.sensorModel.ignoranceIntervalFrom,ignoranceIntervalTo:this.privateState.sensorModel.ignoranceIntervalTo,notificationSettings:{isAlarmEnabled:this.privateState.sensorModel.notificationSettings.isAlarmEnabled}}}).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onCreateCalibration:function(){this.privateState.calibrationCreateModel=to({},ro),this.$modal.show("calibration-create-edit")},onEditCalibration:function(t){this.privateState.calibrationCreateModel=to({isEdit:!0,id:t},this.sensor.calibrations.find((function(e){return e.id===t}))),this.$modal.show("calibration-create-edit")},createCalibration:function(){var t=this;this.$store.dispatch(H.SENSOR_CALIBRATION_CREATE,{companyId:this.companyId,sensorId:this.sensorId,data:{name:this.privateState.calibrationCreateModel.name,channel:this.privateState.calibrationCreateModel.channel,metrics:this.privateState.calibrationCreateModel.metrics,originalValue:this.privateState.calibrationCreateModel.originalValue,calibratedValue:this.privateState.calibrationCreateModel.calibratedValue}}).then((function(){t.$notify({group:"app",type:"success",title:"Calibration has been created!",text:"",duration:5e3}),t.$modal.hide("calibration-create-edit"),t.privateState.calibrationCreateModel=to({},ro)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},editCalibration:function(){var t=this;this.$store.dispatch(H.SENSOR_CALIBRATION_UPDATE,{companyId:this.companyId,sensorId:this.sensorId,calibrationId:this.privateState.calibrationCreateModel.id,data:{name:this.privateState.calibrationCreateModel.name,channel:this.privateState.calibrationCreateModel.channel,metrics:this.privateState.calibrationCreateModel.metrics,originalValue:this.privateState.calibrationCreateModel.originalValue,calibratedValue:this.privateState.calibrationCreateModel.calibratedValue}}).then((function(){t.$notify({group:"app",type:"success",title:"Calibration has been updated!",text:"",duration:5e3}),t.$modal.hide("calibration-create-edit"),t.privateState.calibrationCreateModel=to({},ro)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteCalibration:function(t){var e=this;window.confirm("Are you sure?")&&this.$store.dispatch(H.SENSOR_CALIBRATION_DELETE,{companyId:this.companyId,sensorId:this.sensorId,calibrationId:t}).then((function(){e.$notify({group:"app",type:"information",title:"Calibration has been deleted!",text:"",duration:5e3})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onCreateTelemetryRule:function(){this.privateState.telemetryRuleCreateModel=to({},ao),this.$modal.show("telemetry-rule-create-edit")},onEditTelemetryRule:function(t){this.privateState.telemetryRuleCreateModel=to({isEdit:!0,id:t},this.sensor.telemetryRules.find((function(e){return e.id===t}))),this.$modal.show("telemetry-rule-create-edit")},createTelemetryRule:function(){var t=this;this.$store.dispatch(H.SENSOR_TELEMETRY_RULE_CREATE,{companyId:this.companyId,sensorId:this.sensorId,data:{name:this.privateState.telemetryRuleCreateModel.name,channel:this.privateState.telemetryRuleCreateModel.channel,metrics:this.privateState.telemetryRuleCreateModel.metrics,isAlarmEnabled:this.privateState.telemetryRuleCreateModel.isAlarmEnabled,minAllowedValue:this.privateState.telemetryRuleCreateModel.minAllowedValue,maxAllowedValue:this.privateState.telemetryRuleCreateModel.maxAllowedValue}}).then((function(){t.$notify({group:"app",type:"success",title:"Telemetry rule '".concat(t.privateState.telemetryRuleCreateModel.name,"' has been created!"),text:"",duration:5e3}),t.$modal.hide("telemetry-rule-create-edit"),t.privateState.telemetryRuleCreateModel=to({},ao)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},editTelemetryRule:function(){var t=this;this.$store.dispatch(H.SENSOR_TELEMETRY_RULE_UPDATE,{companyId:this.companyId,sensorId:this.sensorId,telemetryRuleId:this.privateState.telemetryRuleCreateModel.id,data:{name:this.privateState.telemetryRuleCreateModel.name,channel:this.privateState.telemetryRuleCreateModel.channel,metrics:this.privateState.telemetryRuleCreateModel.metrics,isAlarmEnabled:this.privateState.telemetryRuleCreateModel.isAlarmEnabled,minAllowedValue:this.privateState.telemetryRuleCreateModel.minAllowedValue,maxAllowedValue:this.privateState.telemetryRuleCreateModel.maxAllowedValue}}).then((function(){t.$notify({group:"app",type:"success",title:"Telemetry rule '".concat(t.privateState.telemetryRuleCreateModel.name,"' has been updated!"),text:"",duration:5e3}),t.$modal.hide("telemetry-rule-create-edit"),t.privateState.telemetryRuleCreateModel=to({},ao)})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteTelemetryRule:function(t){var e=this;window.confirm("Are you sure?")&&this.$store.dispatch(H.SENSOR_TELEMETRY_RULE_DELETE,{companyId:this.companyId,sensorId:this.sensorId,telemetryRuleId:t}).then((function(){e.$notify({group:"app",type:"information",title:"Telemetry rule has been deleted!",text:"",duration:5e3})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},so=no,oo=Object(w["a"])(so,Ks,Js,!1,null,null,null),io=oo.exports,co=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"company-create-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-md-4"},[r("h5",[t._v("Create new company")]),r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputName"}},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.model.name,expression:"privateState.model.name"}],staticClass:"form-control",attrs:{type:"text",id:"inputName","aria-describedby":"nameHelp",placeholder:"Name"},domProps:{value:t.privateState.model.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.model,"name",e.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_CREATE]}},[t._v("Create")])],1)])])])},lo=[];function uo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function po(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uo(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var mo={name:"company-create",components:{LoadingButton:re},data:function(){return{privateState:{storeTypes:H,model:{name:""}}}},computed:po({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{onSubmit:function(t){var e=this,r=po({},this.privateState.model);this.$store.dispatch(H.COMPANY_CREATE,{company:r}).then((function(t){e.$notify({group:"app",type:"success",title:"Company '".concat(t.name,"' has beed created!"),text:""}),e.$store.dispatch(H.USER_INFO_LOAD,{}),e.$store.dispatch(H.AUTH_MY_PERMISSIONS_LOAD,{}),li.refreshTokens({withFullscreenLoader:!0}),e.$router.push({name:"dashboard"})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},fo=mo,vo=Object(w["a"])(fo,co,lo,!1,null,null,null),ho=vo.exports,go=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"company-manage-wrapper"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.COMPANY_LOAD]||t.sharedState.loading[t.privateState.storeTypes.COMPANY_UPDATE]}}),r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-md-5"},[r("h5",{staticClass:"mt-0"},[t._v("Manage company")]),t.sharedState.company?r("div",[r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.updateCompany(e)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputName"}},[t._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.companyModel.name,expression:"privateState.companyModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"inputName","aria-describedby":"nameHelp",placeholder:"Name"},domProps:{value:t.privateState.companyModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.companyModel,"name",e.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_UPDATE]}},[t._v("Save")])],1)])]),r("div",{staticClass:"card border-danger text-danger"},[r("div",{staticClass:"card-body"},[r("loading-button",{staticClass:"btn-danger",attrs:{type:"button",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_DELETE]},nativeOn:{click:function(e){return t.deleteCompany()}}},[t._v("Delete")])],1)])]):t._e()])])])],1)},bo=[];function _o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function So(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_o(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var yo={name:""},Oo={name:"company-manage",components:{RowLoader:Qt,LoadingButton:re},props:{companyId:{type:String,required:!0,default:null}},data:function(){return{privateState:{storeTypes:H,companyModel:So({},yo)}}},computed:So({},Object(N["b"])({sharedState:function(t){return t}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,e.sharedState.company&&e.sharedState.company.id===e.companyId||e.$store.dispatch(H.COMPANY_LOAD,{companyId:e.companyId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),e.privateState.companyModel=So({},yo,{},e.sharedState.company||{}),e.$store.subscribe((function(t,r){var a=t.type;t.payload;a===H.COMPANY_SET&&(e.privateState.companyModel=So({},e.privateState.companyModel,{},r.company))}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{updateCompany:function(){var t=this;this.$store.dispatch(H.COMPANY_UPDATE,{companyId:this.companyId,data:{name:this.privateState.companyModel.name}}).then((function(e){t.$notify({group:"app",type:"success",title:"Company '".concat(t.privateState.companyModel.name,"' has beed updated!"),text:""}),t.$store.dispatch(H.USER_INFO_LOAD,{})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},deleteCompany:function(){var t=this;window.confirm("Are you sure?")&&this.$store.dispatch(H.COMPANY_DELETE,{companyId:this.companyId}).then((function(e){t.$notify({group:"app",type:"information",title:"Company '".concat(t.privateState.companyModel.name,"' has beed deleted!"),text:""}),t.$store.dispatch(H.USER_INFO_LOAD,{}),li.refreshTokens({withFullscreenLoader:!1}),t.$router.push({name:"dashboard-home"})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Eo=Oo,Co=Object(w["a"])(Eo,go,bo,!1,null,null,null),Io=Co.exports,To=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-profile-wrapper company-user-profile-wrapper"},[r("row-loader",{staticClass:"mb-3",attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.COMPANY_DEPARTMENT_LOAD]||t.sharedState.loading[t.privateState.storeTypes.COMPANY_USERS_LOAD]}}),r("div",[r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12 col-md-5"},[r("h5",{staticClass:"mt-0"},[t._v("Department")]),t.department?r("div",{class:{"block-disabled":t.sharedState.loading[t.privateState.storeTypes.COMPANY_DEPARTMENT_LOAD]}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.updateDepartment(e)}}},[r("div",[r("div",{staticClass:"form-group"},[t._m(0),r("div",[t._v(t._s(t.department.id))])]),r("div",{staticClass:"form-group"},[t._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:t.privateState.departmentModel.name,expression:"privateState.departmentModel.name"}],staticClass:"form-control",attrs:{id:"departmentModel__name",type:"text"},domProps:{value:t.privateState.departmentModel.name},on:{input:function(e){e.target.composing||t.$set(t.privateState.departmentModel,"name",e.target.value)}}})]),r("div",{staticClass:"form-group"},[t._m(2),r("company-user-select",{attrs:{companyId:this.companyId,departmentId:null},model:{value:t.privateState.departmentModel.managerId,callback:function(e){t.$set(t.privateState.departmentModel,"managerId",e)},expression:"privateState.departmentModel.managerId"}})],1)]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_DEPARTMENT_UPDATE]}},[t._v("Save")])],1)])])]):t._e()])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12"},[r("h5",{staticClass:"mt-0 mb-3"},[t._v("Department users")]),t.departmentUsers?r("div",[r("div",{staticClass:"mb-3"},[r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(e){return t.onAddUserToDepartmentClick(e)}}},[r("i",{staticClass:"fas fa-user-plus"})])]),r("div",{class:{"block-disabled":t.sharedState.loading[t.privateState.storeTypes.COMPANY_DEPARTMENT_USERS_LOAD]||t.sharedState.loading[t.privateState.storeTypes.COMPANY_DEPARTMENT_USER_DELETE]}},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},t._l(t.departmentUsers.data,(function(e){return r("div",{key:e.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("router-link",{attrs:{to:{name:"company-user-profile",params:{companyId:t.companyId,userId:e.id}}}},[t._v(" "+t._s(e.name)+" ")])],1),r("div",{staticClass:"ml-2"},[e.id===t.$store.getters.userId?r("small",{staticClass:"badge badge-info mr-1"},[t._v("(You)")]):t._e(),e.id===t.department.managerId?r("small",{staticClass:"badge badge-primary mr-1"},[t._v("(Manager)")]):t._e(),e.id!==t.department.managerId?r("span",{staticClass:"text-secondary cursor-pointer",on:{click:function(r){return t.removeUserFromDepartment(e.id)}}},[r("i",{staticClass:"fas fa-times"})]):t._e()])]),r("div",{staticClass:"card-text small"},[r("div",[t._v("Email: "+t._s(e.email))]),r("div",[t._v("Phone Number: "+t._s(e.phoneNumber))])])])])})),0)]),r("modal",{attrs:{name:"add-department-user",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[t._v("Add user to department")]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("add-department-user")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.addUserToDepartment()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("User")]),r("company-user-select",{attrs:{companyId:this.companyId,departmentId:null,excludedDepartmentIds:[this.departmentId]},model:{value:t.privateState.addUserToDepartmentModel.userId,callback:function(e){t.$set(t.privateState.addUserToDepartmentModel,"userId",e)},expression:"privateState.addUserToDepartmentModel.userId"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_DEPARTMENT_USER_ADD]}},[t._v("Add")])],1)])])])],1):t._e()])])])],1)},wo=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:""}},[r("strong",[t._v("#id")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"departmentModel__name"}},[r("strong",[t._v("Name")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"departmentModel__managerId"}},[r("strong",[t._v("Manager user")])])}];function Do(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Ao(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Do(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Do(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ro={name:null,managerId:null},Mo={userId:null},jo={name:"company-department",components:{RowLoader:Qt,LoadingButton:re,CompanyUserSelect:hn},props:{companyId:String,departmentId:String},data:function(){return{privateState:{storeTypes:H,departmentModel:Ao({},Ro),addUserToDepartmentModel:Ao({},Mo)}}},computed:Ao({},Object(N["b"])({sharedState:function(t){return t},department:function(t){return t.companyDepartment[this.companyId]&&t.companyDepartment[this.companyId][this.departmentId]?t.companyDepartment[this.companyId][this.departmentId]:null},departmentUsers:function(t){return t.departmentUsers[this.departmentId]||null}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.dispatch(H.COMPANY_DEPARTMENT_LOAD,{companyId:this.companyId,departmentId:this.departmentId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.loadDepartmentUsers(),this.privateState.departmentModel=Ao({},Ro,{},this.department||{}),this.$store.subscribe((function(t,r){var a=t.type;t.payload;a===H.COMPANY_DEPARTMENT_SET&&(e.privateState.departmentModel=Ao({},e.privateState.departmentModel,{},e.department||{}))}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadDepartmentUsers:function(){this.$store.dispatch(H.COMPANY_DEPARTMENT_USERS_LOAD,{companyId:this.companyId,departmentId:this.departmentId,offset:0,limit:500}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},updateDepartment:function(){this.$store.dispatch(H.COMPANY_DEPARTMENT_UPDATE,{companyId:this.companyId,departmentId:this.departmentId,data:{name:this.privateState.departmentModel.name,managerId:this.privateState.departmentModel.managerId}}).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},onAddUserToDepartmentClick:function(){this.$modal.show("add-department-user")},addUserToDepartment:function(){var t=this;this.$store.dispatch(H.COMPANY_DEPARTMENT_USER_ADD,{companyId:this.companyId,data:{userId:this.privateState.addUserToDepartmentModel.userId,departmentId:this.departmentId}}).then((function(){t.$notify({group:"app",type:"success",title:"User has been added to the department!",text:"",duration:5e3}),t.$modal.hide("add-department-user"),t.privateState.addUserToDepartmentModel=Ao({},Mo),t.loadDepartmentUsers()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},removeUserFromDepartment:function(t){var e=this;window.confirm("Delete user from department?")&&this.$store.dispatch(H.COMPANY_DEPARTMENT_USER_DELETE,{companyId:this.companyId,departmentId:this.departmentId,userId:t}).then((function(){e.loadDepartmentUsers()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Po=jo,Uo=Object(w["a"])(Po,To,wo,!1,null,null,null),No=Uo.exports,Lo=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"user-profile-wrapper company-user-profile-wrapper"},[r("row-loader",{staticClass:"mb-3",attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.COMPANY_USER_LOAD]||t.sharedState.loading[t.privateState.storeTypes.AUTH_USER_SCOPED_PERMISSIONS_LOAD]}}),t.user?r("div",[r("h5",{staticClass:"mt-0 mb-3"},[t._v("User info:")]),r("div",{staticClass:"media d-flex flex-wrap flex-md-nowrap"},[r("img",{staticClass:"align-self-start mr-3 mb-3",attrs:{src:"img/user.png"}}),r("div",{staticClass:"media-body"},[r("div",[r("dl",[r("dt",[t._v("#")]),r("dd",[t._v(t._s(t.user.id))]),r("dt",[t._v("Email")]),r("dd",[t._v(t._s(t.user.email))]),r("dt",[t._v("Phone number")]),r("dd",[t._v(t._s(t.user.phoneNumber))]),r("dt",[t._v("Name")]),r("dd",[t._v(t._s(t.user.name))])])]),r("h5",{staticClass:"mt-0"},[t._v("Permissions:")]),r("div",[r("user-scoped-permissions",{attrs:{userId:t.user.id,userPermissions:t.userPermissions}})],1)])])]):t._e()],1)},xo=[];function ko(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Fo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ko(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ko(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var $o={name:"company-user-rofile",components:{RowLoader:Qt,UserScopedPermissions:Gn},props:{companyId:String,userId:String},data:function(){return{privateState:{storeTypes:H}}},computed:Fo({},Object(N["b"])({sharedState:function(t){return t},user:function(t){return t.companyUser[this.companyId]&&t.companyUser[this.companyId][this.userId]?t.companyUser[this.companyId][this.userId]:null},userPermissions:function(t){return t.auth.userScopedPermissions[this.companyId]&&t.auth.userScopedPermissions[this.companyId][this.userId]?t.auth.userScopedPermissions[this.companyId][this.userId]:null}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$store.dispatch(H.COMPANY_USER_LOAD,{companyId:this.companyId,userId:this.userId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})),this.$store.dispatch(H.AUTH_USER_SCOPED_PERMISSIONS_LOAD,{scopeId:this.companyId,userId:this.userId}).then().catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){}},Yo=$o,Go=Object(w["a"])(Yo,Lo,xo,!1,null,null,null),Vo=Go.exports,Ho=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:t.sharedState.loading[t.privateState.storeTypes.MY_COMPANY_INVITATIONS_LOAD]}}),t.myCompanyInvitations?r("div",[r("h5",[t._v("My invitations:")]),r("ul",{staticClass:"list-group",class:{"block-disabled":t.sharedState.loading[t.privateState.storeTypes.MY_COMPANY_INVITATIONS_LOAD]}},t._l(t.myCompanyInvitations,(function(e){return r("li",{key:e.id,staticClass:"list-group-item"},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("div",[r("h5",{staticClass:"mb-1"},[t._v(t._s(e.companyName))]),r("div",{staticClass:"mb-1"},[r("div",[r("small",[r("strong",[t._v("Permissions ("+t._s(e.permissions.length)+"):")])])]),t._l(e.permissions,(function(e){return r("div",{key:"permission-"+e.permission,staticClass:"mb-0"},[r("small",[t._v(" "+t._s(e.name)+" / "+t._s(e.description)+" ")])])}))],2),r("div",[r("div",[r("small",[r("strong",[t._v("Roles ("+t._s(e.roles.length)+"):")])])]),t._l(e.roles,(function(e){return r("div",{key:"role-"+e.role,staticClass:"mb-0"},[r("small",[t._v(" "+t._s(e.name)+" ")])])}))],2)]),r("div",[r("loading-button",{staticClass:"btn btn-outline-success mr-2",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_USER_INVITATION_ACCEPT]},nativeOn:{click:function(r){return t.acceptInvitation(e.id)}}},[t._v("Accept")]),r("loading-button",{staticClass:"btn btn-outline-danger",attrs:{type:"submit",loading:t.sharedState.loading[t.privateState.storeTypes.COMPANY_USER_INVITATION_REJECT]},nativeOn:{click:function(r){return t.rejectInvitation(e.id)}}},[t._v("Reject")])],1)])])})),0)]):t._e()],1)])])},qo=[];function Zo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function zo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zo(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Bo={name:"my-company-invitations",components:{RowLoader:Qt,LoadingButton:re},data:function(){return{privateState:{storeTypes:H}}},computed:zo({},Object(N["b"])({sharedState:function(t){return t},myCompanyInvitations:function(t){return t.myCompanyInvitations}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadInitialData();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadInitialData:function(){this.$store.dispatch(H.MY_COMPANY_INVITATIONS_LOAD,{}).then((function(){})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},acceptInvitation:function(t){var e=this;this.$store.dispatch(H.COMPANY_USER_INVITATION_ACCEPT,{invitationId:t}).then((function(){e.loadInitialData(),e.$store.dispatch(H.USER_INFO_LOAD,{})})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))},rejectInvitation:function(t){var e=this;this.$store.dispatch(H.COMPANY_USER_INVITATION_REJECT,{invitationId:t}).then((function(){e.loadInitialData()})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)}))}}},Wo=Bo,Qo=Object(w["a"])(Wo,Ho,qo,!1,null,null,null),Ko=Qo.exports;function Jo(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Xo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jo(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ti(t){return Xo({},t.params,{query:Xo({},t.query)})}function ei(t){return ri.apply(this,arguments)}function ri(){return ri=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.to,e.from,e.next,a=5,n=.5,s=500,!yt.getters.isAnyLoading){t.next=16;break}o=0;case 6:if(!(o<a)){t.next=16;break}return console.log("Waiting app initialization before processing to route ".concat(r.name,": ").concat(r.path,". Wait time ms: ").concat(s)),t.next=10,Ht.waitAsync(s);case 10:if(yt.getters.isAnyLoading){t.next=12;break}return t.abrupt("break",16);case 12:s+=s*n;case 13:o++,t.next=6;break;case 16:console.log("App was initialized. Processing to route ".concat(r.name,": ").concat(r.path,"."));case 17:case"end":return t.stop()}}),t)}))),ri.apply(this,arguments)}function ai(t){var e=t.to,r=(t.from,t.next);yt.state.auth.isAuthenticated?r():(console.error("Access denied to route ".concat(e.name,": ").concat(e.path,". Unauthenticated.")),n["default"].notify({group:"error",type:"error",title:"Access denied!",text:"Looks like you are not logged in, or session expired. Try to relogin."}),r({name:"home",query:{}}))}function ni(t){var e=t.to,r=(t.from,t.next),a=t.permisions,s=t.scopeId;yt.getters.isUserHasPermissions(a,s)?r():(console.error("Access denied to route ".concat(e.name,": ").concat(e.path,". Unauthorized - insufficient permissions.")),n["default"].notify({group:"error",type:"error",title:"Access denied!",text:"Insufficient permissions!"}),r(!1))}n["default"].use(Ot["a"]);var si=new Ot["a"]({routes:[{path:"/",name:"home",component:Rt,props:!0,meta:{layout:"default"}},{path:"/error",name:"error",component:kt,props:!0,meta:{layout:"default"}},{path:"/terms-of-use",name:"terms-of-use",component:ce,props:!0,meta:{layout:"no-sidebar"}},{path:"/study-items-dashboard",name:"study-items-dashboard",component:tr,props:!0,meta:{layout:"default"},beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/study-items/browse",name:"study-items-browse",component:Hr,props:!0,meta:{layout:"default"},beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/study-items/learn/falshcards",name:"study-items-learn-falshcards",component:Jr,props:!0,meta:{layout:"default"},beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/user-films/browse",name:"user-films-browse",component:ga,props:!0,meta:{layout:"default"},beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/dashboard",name:"dashboard",component:Na,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}(),children:[{path:"/",name:"dashboard-home",component:Va,props:!0},{path:"companies/:companyId/gateways",name:"dashboard-gateways",component:Ka,props:!0},{path:"companies/:companyId/sensors",name:"dashboard-sensors",component:sn,props:!0},{path:"companies/:companyId/departments",name:"dashboard-departments",component:En,props:!0},{path:"companies/:companyId/users",name:"dashboard-users",component:jn,props:!0,beforeEnter:function(t,e,r){ni({to:t,from:e,next:r,permisions:["CompanyUserRead"],scopeId:t.params.companyId})}}]},{path:"/permissions/my",name:"my-permissions",component:Bn,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/permissions/:companyId/manage",name:"manage-company-permissions",component:rs,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a}),ni({to:e,from:r,next:a,permisions:["ScopedPermissionManage"],scopeId:e.params.companyId});case 4:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/permissions/:companyId/user/:userId/manage",name:"manage-company-user-permissions",component:us,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a}),ni({to:e,from:r,next:a,permisions:["ScopedPermissionManage"],scopeId:e.params.companyId});case 4:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/companies/invitations",name:"my-company-invitations",component:Ko,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/about",name:"about",component:function(){return r.e("about").then(r.bind(null,"f820"))},props:!0},{path:"/login",name:"login",component:fe,props:!0},{path:"/register",name:"register",component:Oe,props:ti},{path:"/logout",name:"logout",component:De,props:!0},{path:"/profile",name:"user-profile",component:js,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/sensors/:sensorId/telemetries",name:"sensor-telemetry",component:Qs,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/companies/:companyId/sensors/:sensorId/manage",name:"sensor-manage",component:io,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a});case 3:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/companies/create",name:"company-create",component:ho,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a}),ni({to:e,from:r,next:a,permisions:["CompanyCreate"],scopeId:null});case 4:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/companies/:companyId/manage",name:"company-manage",component:Io,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a}),ni({to:e,from:r,next:a,permisions:["CompanyUpdate"],scopeId:e.params.companyId});case 4:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/companies/:companyId/departments/:departmentId",name:"company-department",component:No,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a}),ni({to:e,from:r,next:a,permisions:["CompanyDepartmentManage"],scopeId:e.params.companyId});case 4:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()},{path:"/companies/:companyId/users/:userId/profile",name:"company-user-profile",component:Vo,props:!0,beforeEnter:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e,r,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ei({to:e,from:r,next:a});case 2:ai({to:e,from:r,next:a}),ni({to:e,from:r,next:a,permisions:["CompanyUserRead"],scopeId:e.params.companyId});case 4:case"end":return t.stop()}}),t)})));function e(e,r,a){return t.apply(this,arguments)}return e}()}]});function oi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ii(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oi(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ci=function(){function t(){Object(L["a"])(this,t),this.config=null}return Object(x["a"])(t,[{key:"init",value:function(t){var e=this;this.config=t,this.userManager=new F.a.UserManager({authority:this.config.authority,client_id:this.config.clientId,redirect_uri:"http://localhost:5007/callback.html",response_type:this.config.responseType,scope:this.config.scopes.join(" "),post_logout_redirect_uri:"http://localhost:5007",automaticSilentRenew:!0,silentRequestTimeout:1e4,accessTokenExpiringNotificationTime:180,loadUserInfo:!0}),this.userInfoService=new $["a"](this.userManager.settings),F.a.Log.logger=console,F.a.Log.level=F.a.Log.INFO,this.userManager.events.addUserLoaded((function(){console.log("AuthService: userLoaded")})),this.userManager.events.addUserUnloaded((function(){console.log("AuthService: userUnloaded"),yt.commit(H.AUTH_USER_RESET)})),this.userManager.events.addAccessTokenExpiring((function(){console.log("AuthService: access_token expiring...")})),this.userManager.events.addAccessTokenExpired((function(){console.log("AuthService: access_token expired"),e.logout()})),this.userManager.events.addSilentRenewError((function(t){console.error("AuthService: silentRenewError: ",t)})),this.userManager.events.addUserSignedOut(function(){console.error("AuthService: userSignedOut"),n["default"].notify({group:"app-important",type:"warn",title:"Warning",text:"Session expired. You have beed logged out."}),this.logoutWithoutRedirect().then((function(){si.push({name:"home"})})).catch((function(t){console.error(t)}))}.bind(this)),this.refreshTokensInterval=this.refreshTokensInterval||3e5,this.refreshTokensIntervalFunc=this.refreshTokensIntervalFunc||setInterval(Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("AuthService: running refreshTokensInterval (every ".concat(this.refreshTokensInterval," ms)...")),t.next=3,this.refreshTokens({withFullscreenLoader:!1});case 3:case"end":return t.stop()}}),t,this)}))).bind(this),this.refreshTokensInterval)}},{key:"isAuthenticated",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.userManager.getUser();case 2:return e=t.sent,e&&e.profile&&"false"===e.profile.is_pre_registration,t.abrupt("return",!!e);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getUser",value:function(){return this.userManager.getUser().then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e?(console.log("AuthService: isAuthenticated: ",!0),yt.commit(H.AUTH_USER_SET,{user:e})):(console.log("AuthService: isAuthenticated: ",!1),yt.commit(H.AUTH_USER_RESET)),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){t.message,t.stack;console.error("AuthService: getUser error: ",t),n["default"].notify({group:"error",type:"error",title:"Error",text:"Something went wrong. Can't read user info!"})}))}},{key:"login",value:function(){console.log("AuthService: Login requested."),this.userManager.signinRedirect().then((function(){console.log("AuthService: Redirecting to login...")})).catch((function(t){t.message,t.stack;console.log("AuthService: Login error - ",t),yt.commit(H.ERROR_PAGE_DATA_SET,{data:{title:"Error",text:"Something went wrong during login!"}}),si.push({name:"error"})}))}},{key:"logout",value:function(){console.log("AuthService: Logout requested."),this.userManager.signoutRedirect().then((function(){console.log("AuthService: Redirecting to logout...")})).catch((function(t){t.message,t.stack;console.log("AuthService: Logout error - ",t),yt.commit(H.ERROR_PAGE_DATA_SET,{data:{title:"Error",text:"Something went wrong during logout!"}}),si.push({name:"error"})}))}},{key:"logoutWithoutRedirect",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("AuthService: Logout without redirect requested."),t.next=3,this.userManager.removeUser();case 3:return console.log("AuthService: user removed"),t.next=6,this.userManager.clearStaleState();case 6:return console.log("AuthService: stale state cleared"),t.next=9,this.getUser();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"refreshTokens",value:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,r,a,s,o,i,c,l,u=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:{},r=e.withFullscreenLoader,a=void 0!==r&&r,s=this,a&&n["default"].appFullscreenLoader({isVisible:!0,title:"Updating your profile info..."}),t.next=5,this.isAuthenticated();case 5:if(o=t.sent,!o){t.next=32;break}return t.prev=7,t.next=10,this.userManager.signinSilent();case 10:return i=t.sent,console.log("AuthService:.refreshTokens: Silent token renewal successful. ",i),t.next=14,s.userInfoService.getClaims(i.access_token);case 14:return c=t.sent,console.log("AuthService:.refreshTokens: user.profile",i.profile),console.log("AuthService:.refreshTokens: nextClaims",c),i.profile=ii({},i.profile,{},c,{test:"test"}),s.userManager.storeUser(i),t.next=21,s.getUser();case 21:a&&n["default"].appFullscreenLoader({isVisible:!1}),t.next=30;break;case 24:throw t.prev=24,t.t0=t["catch"](7),console.error("AuthService:.refreshTokens: Error from signinSilent:",t.t0),this.userManager.events._raiseSilentRenewError(t.t0),a&&n["default"].appFullscreenLoader({isVisible:!1}),t.t0;case 30:t.next=36;break;case 32:throw l="AuthService:.refreshTokens: Can't refresh token. User isn't authenticated.",console.error(l),a&&n["default"].appFullscreenLoader({isVisible:!1}),new Error(l);case 36:case"end":return t.stop()}}),t,this,[[7,24]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),li=new ci;function ui(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function di(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ui(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ui(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var pi={name:"sidebar",components:{},data:function(){return{privateState:{}}},methods:{},computed:di({},Object(N["b"])({sharedState:function(t){return t},currentRouteName:function(){return console.log(this.$route),this.$route.name}})),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){},toggleSidebar:function(){var t=document.getElementById("sidebar");t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")}},mi=pi,fi=mi,vi=(r("f203"),Object(w["a"])(fi,P,U,!1,null,null,null)),hi=vi.exports,gi={name:"default-layout",components:{Sidebar:hi},methods:{toggleSidebar:function(){hi.toggleSidebar()}}},bi=gi,_i=Object(w["a"])(bi,M,j,!1,null,null,null),Si=_i.exports,yi=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid app-wrapper"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-10"},[t._t("default")],2)])])},Oi=[],Ei={name:"no-sidebar-layout",components:{}},Ci=Ei,Ii=Object(w["a"])(Ci,yi,Oi,!1,null,null,null),Ti=Ii.exports,wi=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",[r("transition",[r(t.layout,{tag:"component"},[r("router-view")],1)],1)],1),r("time-zone-auto-detect"),r("notifications",{attrs:{group:"error",position:"top center",duration:7e3}}),r("notifications",{attrs:{group:"app",position:"top right"}}),r("notifications",{attrs:{group:"app-important",position:"top center",duration:5e3}}),r("app-fullscreen-loader",{attrs:{defaultTitle:"Loading...",defaultText:""}})],1)},Di=[],Ai=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("modal",{attrs:{name:"user-timezone-confirm",height:"auto",width:"400px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[t._v("Confirm your timezone")]),r("div",{staticClass:"app-modal-close",on:{click:function(e){return t.$modal.hide("user-timezone-confirm")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{ref:"confirmForm",on:{submit:function(t){t.preventDefault()}}},[r("div",{staticClass:"form-group"},[r("h6",[t._v("Your timezone is "+t._s(t.timezoneDetected)+"?")])]),r("loading-button",{staticClass:"btn btn-outline-success mr-1",attrs:{type:"button",loading:t.isLoading,name:"isConfirmed",value:"yes"},nativeOn:{click:function(e){return t.confirmUserTimeZone(!0)}}},[t._v("Yes")]),r("loading-button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",loading:!1,name:"isConfirmed",value:"no"},nativeOn:{click:function(e){return t.confirmUserTimeZone(!1)}}},[t._v("No")])],1)])])])],1)},Ri=[];function Mi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ji(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mi(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Pi={name:"time-zone-auto-detect",props:{},components:{LoadingButton:re},data:function(){return{privateState:{storeTypes:H,showModalAfterMs:5e3}}},computed:ji({timezoneDetected:function(){var t=nr.a.tz.guess();return t}},Object(N["b"])({sharedState:function(t){return t},isLoading:function(t){return t.loading[H.USER_INFO_TIMEZONE_SET]}})),created:function(){var t=this;this.$store.watch((function(t,e){return t.userInfo}),(function(e,r){e&&!t.isUserTimeZoneSet(e)&&(console.log("Auto detected timezone: ",t.timezoneDetected),t.timezoneDetected&&setTimeout((function(){t.showModal()}),t.privateState.showModalAfterMs))}))},mounted:function(){},updated:function(){},destroyed:function(){},methods:{isUserTimeZoneSet:function(t){return t.timeZone&&t.timeZone.timeZoneId},showModal:function(){this.$modal.show("user-timezone-confirm")},confirmUserTimeZone:function(t){var e=this;t?this.$store.dispatch(H.USER_INFO_TIMEZONE_SET,{timeZoneId:this.timezoneDetected}).then((function(){e.$notify({group:"app",type:"success",title:"Timezone is set to ".concat(e.timezoneDetected,"."),text:"",duration:5e3}),e.$modal.hide("user-timezone-confirm")})).catch((function(t){console.error(t),Gt.showErrorIfServerErrorResponseOrDefaultError(t)})):(this.$modal.hide("user-timezone-confirm"),this.$notify({group:"app-important",type:"warn",title:"Note:",text:"Go to settings and set your timezone to see date and time in your timezone. Until then, UTC will be used.",duration:1e4}))}}},Ui=Pi,Ni=Object(w["a"])(Ui,Ai,Ri,!1,null,"113a344c",null),Li=Ni.exports;function xi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function ki(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xi(Object(r),!0).forEach((function(e){Object(S["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Fi="default",$i={name:"app",components:{TimeZoneAutoDetect:Li},data:function(){return{privateState:{}}},computed:ki({},Object(N["b"])({sharedState:function(t){return t}}),{layout:function(){return"".concat(this.$route.meta.layout||Fi,"-layout")}}),created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},updated:function(){},destroyed:function(){}},Yi=$i,Gi=(r("60bc"),r("5ca7"),Object(w["a"])(Yi,wi,Di,!1,null,null,null)),Vi=Gi.exports,Hi=r("9483");function qi(){yt.dispatch(H.CONFIG_LOAD).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.urls,a=e.clientAuth,li.init(a),bt.init(r),t.next=5,li.getUser().then((function(t){return t&&("true"===t.profile.is_pre_registration?(console.log("User logged in using external provider and must complete registration flow."),si.push({name:"register",params:{},query:{preRegistrationUserId:t.profile.sub}})):console.log("User logged in and completed registration.")),t}));case 5:"error"===si.history.current.name&&si.push({path:"/"}),Zi();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error(t),yt.commit(H.ERROR_PAGE_DATA_SET,{data:{title:"App configuration load error!",text:""}}),si.push({path:"error"}),Zi()}))}function Zi(){new n["default"]({router:si,store:yt,render:function(t){return console.log("Vue render"),t(Vi)}}).$mount("#app")}Object(Hi["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),n["default"].config.productionTip=!1,console.log("BASE_URL: ",""),document.addEventListener("DOMContentLoaded",(function(){console.log("DOMContentLoaded"),console.log("process.env: ",Object({NODE_ENV:"production",VUE_APP_ASPNETCORE_ENVIRONMENT:"DevelopmentLocalhost",VUE_APP_VERSION:"0.1.0",BASE_URL:""})),console.log("process.env.VUE_APP_ASPNETCORE_ENVIRONMENT: ","DevelopmentLocalhost")})),n["default"].use(o.a),n["default"].component("multiselect",c.a),n["default"].use(u.a,{componentName:"modal",dialog:!0}),n["default"].use(d["a"]),n["default"].component("datetime",p["Datetime"]),n["default"].component("paginate",f.a),n["default"].use(h.a,{container:"body",duration:500,easing:"ease",offset:-60,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0}),n["default"].use(R),n["default"].component("default-layout",Si),n["default"].component("no-sidebar-layout",Ti),qi()},9741:function(t,e,r){},b20f:function(t,e,r){},f203:function(t,e,r){"use strict";var a=r("9741"),n=r.n(a);n.a}});
//# sourceMappingURL=index.027eeac4.js.map