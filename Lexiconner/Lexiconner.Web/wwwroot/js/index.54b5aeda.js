(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],u=0,p=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={index:0},s=[];function o(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"9574937d"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=n[e]=[t,a]}));t.push(r[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=o(e);var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,r[1](l)}n[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="4678"},"56d7":function(e,t,r){"use strict";r.r(t);r("b0c0"),r("4c53"),r("96cf");var a=r("1da1"),n=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),s=r("ee98"),o=r.n(s),i=r("8e5f"),c=r.n(i),l=r("1881"),u=r.n(l),d=r("f62e"),p=r("859b"),m=r("8832"),f=r.n(m),v=r("f13c"),h=r.n(v),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.privateState.data.isVisible?r("div",{staticClass:"app-fullscreen-loader"},[r("div",{staticClass:"app-loader-strip stripes stripes--animated"}),r("div",{staticClass:"app-loader-content"},[r("div",{staticClass:"content-title"},[e._v(e._s(e.privateState.data.title))]),e.privateState.data.text?r("div",{staticClass:"content-text"},[e._v(e._s(e.privateState.data.text))]):e._e()])]):e._e()},g=[],y=(r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("53ca")),_=r("ade3"),S=new n["default"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=null,I={name:"app-fullscreen-loader",components:{},props:{defaultTitle:{type:String,default:"Loading..."},defaultText:{type:String,default:""}},data:function(){return{privateState:{data:E({},C)}}},mounted:function(){C={isVisible:!1,title:this.defaultTitle,text:this.defaultText},this.privateState.data=E({},C),S.$on("update-params",this.updateParams)},methods:{updateParams:function(e){"string"===typeof e&&(e=E({},C,{title:e})),"object"===Object(y["a"])(e)&&(e=E({},C,{},e)),this.privateState.data=E({},e)}}},w=I,T=r("2877"),j=Object(T["a"])(w,b,g,!1,null,null,null),D=j.exports,A={install:function(e,t){e.component("app-fullscreen-loader",D);var r=function(e){S.$emit("update-params",e)};e.appFullscreenLoader=r,e.prototype["$appFullscreenLoader"]=r}},R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-fluid app-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"app-sidebar-parent"},[r("sidebar"),r("div",{staticClass:"col app-page-content"},[r("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light app-navbar no-print"},[r("div",{},[r("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:e.toggleSidebar}},[r("i",{staticClass:"fas fa-align-left"})])])]),e._t("default")],2)],1)])])},P=[],M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-sidebar no-print",attrs:{id:"sidebar"}},[e.sharedState.auth.isAuthenticated?r("div",[e.sharedState.auth.isAuthenticated?r("div",{staticClass:"sidebar-header"},[r("router-link",{staticClass:"sidebar-user",attrs:{to:{name:"user-profile"}}},[r("div",{staticClass:"d-flex justify-content-start align-items-start"},[r("div",{staticClass:"mr-3"},[r("img",{staticClass:"user-image",attrs:{src:"img/user.png",alt:e.sharedState.auth.user.profile.name||e.sharedState.auth.user.profile.given_name}})]),r("div",[r("div",{staticClass:"mb-0"},[r("small",[e._v(e._s(e.sharedState.auth.user.profile.name||e.sharedState.auth.user.profile.given_name))])]),r("div",[r("small",[e._v(e._s(e.sharedState.auth.user.profile.email))])])])])])],1):e._e(),e.sharedState.auth.isAuthenticated?r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"study-items-dashboard"}}},[e._v("Study items")])],1):e._e(),e.sharedState.auth.isAuthenticated?r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"logout"}}},[e._v("Logout")])],1):e._e()]):e._e(),e.sharedState.auth.isAuthenticated?e._e():r("div",[e.sharedState.auth.isAuthenticated?e._e():r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"home"}}},[e._v("Home")])],1),e.sharedState.auth.isAuthenticated?e._e():r("div",{staticClass:"sidebar-item"},[r("router-link",{staticClass:"sidebar-link",attrs:{to:{name:"login"}}},[e._v("Login")])],1)])])},N=[],U=r("2f62"),x=(r("a15b"),r("d4ec")),k=r("bee2"),L=r("dd17"),$=r.n(L),F=r("1632"),Y=(r("d81d"),r("13d5"),r("8468")),V=r("2ef0"),G=r.n(V),H={LOADING_SET:"LOADING_SET",ENUMS_LOAD:"ENUMS_LOAD",ENUMS_SET:"ENUMS_SET",CONFIG_LOAD:"CONFIG_LOAD",CONFIG_SET:"CONFIG_SET",TERMS_OF_USE_LOAD:"TERMS_OF_USE_LOAD",TERMS_OF_USE_SET:"TERMS_OF_USE_SET",COUNTRIES_LOAD:"COUNTRIES_LOAD",COUNTRIES_SET:"COUNTRIES_SET",LANGUAGES_LOAD:"LANGUAGES_LOAD",LANGUAGES_SET:"LANGUAGES_SET",TIMEZONES_LOAD:"TIMEZONES_LOAD",TIMEZONES_SET:"TIMEZONES_SET",AUTH_USER_SET:"AUTH_USER_SET",AUTH_USER_RESET:"AUTH_USER_RESET",USER_INFO_LOAD:"USER_INFO_LOAD",USER_INFO_SET:"USER_INFO_SET",USER_INFO_UPDATE:"USER_INFO_UPDATE",USER_INFO_NOTIFICATIONS_UPDATE:"USER_INFO_NOTIFICATIONS_UPDATE",USER_INFO_TIMEZONE_SET:"USER_INFO_TIMEZONE_SET",USER_INFO_CURRENT_COMPANY_SET:"USER_INFO_CURRENT_COMPANY_SET",STUDY_ITEMS_LOAD:"STUDY_ITEMS_LOAD",STUDY_ITEMS_SET:"STUDY_ITEMS_SET",STUDY_ITEM_LOAD:"STUDY_ITEM_LOAD",STUDY_ITEM_CREATE:"STUDY_ITEM_CREATE",STUDY_ITEMS_CREATE_SET:"STUDY_ITEMS_CREATE_SET",STUDY_ITEM_UPDATE:"STUDY_ITEM_UPDATE",STUDY_ITEM_UPDATE_SET:"STUDY_ITEM_UPDATE_SET",STUDY_ITEM_DELETE:"STUDY_ITEM_DELETE",STUDY_ITEM_DELETE_SET:"STUDY_ITEM_DELETE_SET",STUDY_ITEM_ADD_TO_FAVOURITES:"STUDY_ITEM_ADD_TO_FAVOURITES",STUDY_ITEM_DELETE_FROM_FAVOURITES:"STUDY_ITEM_DELETE_FROM_FAVOURITES",STUDY_ITEM_IS_FAVOURITE_SET:"STUDY_ITEM_IS_FAVOURITE_SET",NAV_VISIBILITY_SET:"NAV_VISIBILITY_SET",ERROR_PAGE_DATA_SET:"ERROR_PAGE_DATA_SET",ERROR_PAGE_DATA_RESET:"ERROR_PAGE_DATA_RESET"},Z=(r("99af"),r("d3b7"),r("ac1f"),r("5319"),r("841c"),r("c975"),r("bc3a")),q=r.n(Z),z=function(){function e(){Object(x["a"])(this,e)}return Object(k["a"])(e,null,[{key:"axios",value:function(t){return e._axiosRequest(t)}},{key:"_axiosRequest",value:function(e){if(!e||!e.url)throw new Error("Http request error: config required");return e.method=e.method||"get",e.url&&-1===e.url.indexOf("http")&&-1===e.url.indexOf("https")&&"/"!=e.url[0]&&(e.url="/"+e.url),q()(e).then((function(e){e.config,e.data,e.headers,e.request,e.status,e.statusText;return e})).catch((function(e){throw console.error("HTTP request error: ",e),e}))}}]),e}(),B=r("99de"),W=r("7e84"),K=r("262e"),J=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(x["a"])(this,e),G.a.assignIn(this,t)},Q=J,X=function(e){function t(e){return Object(x["a"])(this,t),Object(B["a"])(this,Object(W["a"])(t).call(this,e))}return Object(K["a"])(t,e),t}(Q),ee=X,te=function(e){function t(e){return Object(x["a"])(this,t),Object(B["a"])(this,Object(W["a"])(t).call(this,e))}return Object(K["a"])(t,e),t}(Q),re=te,ae=function(e){function t(e){return Object(x["a"])(this,t),Object(B["a"])(this,Object(W["a"])(t).call(this,e))}return Object(K["a"])(t,e),t}(Q),ne=ae;function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!t)throw new Error("endpoint can't be empty");var s=e.replace("<endpoint>",t);if(a&&(s=encodeURI(s)),r&&"object"===Object(y["a"])(r)){var o=0,i=Object.keys(r).reduce((function(e,t,a){return null===r[t]||void 0===r[t]?e:(e+=0===o?"?":"&",e+=n?"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t])):"".concat(t,"=").concat(r[t]),o+=1,e)}),"");s="".concat(s).concat(i)}return s}var ce="Bearer";function le(e){return new Promise((function(t,r){ho.getUser().then((function(a){var n=a.access_token;a.id_token,a.refresh_token;e.headers=e.headers||{},e.headers["Authorization"]="".concat(ce," ").concat(n),z.axios(e).then((function(e){e.config,e.data,e.headers,e.request,e.status,e.statusText;t(e)})).catch((function(e){e.config,e.isAxiosError,e.request,e.response,e.message,e.stack;r(e)}))}),(function(e){r(e)}))}))}function ue(e){return new Promise((function(t,r){z.axios(oe({},e)).then((function(e){e.config,e.data,e.headers,e.request,e.status,e.statusText;t(e)})).catch((function(e){e.config,e.isAxiosError,e.request,e.response,e.message,e.stack;r(e)}))}))}function de(e){return 200!==e.status&&201!==e.status&&pe(e),e.data}function pe(e){e.config,e.isAxiosError,e.request;var t=e.response;e.message,e.stack;if(t.headers["www-authenticate"]&&console.error("www-authenticate error: ".concat(t.headers["www-authenticate"])),!t)throw e;throw 400===t.status?new ee(t):404===t.status?new ne(t):500===t.status?new re(t):e}var me,fe,ve=function(){function e(){Object(x["a"])(this,e),this.config=null}return Object(k["a"])(e,[{key:"init",value:function(e){this.config=e}},{key:"configApi",value:function(){var e="".concat("","api/v1/config");return{config:function(){return ue({url:e,method:"get"}).then(de).catch(pe)}}}},{key:"identity",value:function(){"".concat(this.config.identityExternalUrl,"/api/v1/<endpoint>");return{}}},{key:"webApi",value:function(){var e="".concat(this.config.apiExternalUrl,"/api/v2/<endpoint>");return{getLanguages:function(){return ue({url:ie(e,"languages",{}),method:"get"}).then(de).catch(pe)},getStudyItems:function(t){var r=t.offset,a=t.limit,n=t.search,s=t.isFavourite;return le({url:ie(e,"studyitems",{offset:r,limit:a,search:n,isFavourite:s}),method:"get"}).then(de).catch(pe)},getStudyItem:function(t){var r=t.studyItemId;return le({url:ie(e,"studyitems/".concat(r),{}),method:"get"}).then(de).catch(pe)},createStudyItem:function(t){var r=t.data;return le({url:ie(e,"studyitems",{}),method:"post",data:oe({},r)}).then(de).catch(pe)},updateStudyItem:function(t){var r=t.studyItemId,a=t.data;return le({url:ie(e,"studyitems/".concat(r),{}),method:"put",data:oe({},a)}).then(de).catch(pe)},deleteStudyItem:function(t){var r=t.studyItemId;return le({url:ie(e,"studyitems/".concat(r),{}),method:"delete",data:{}}).then(de).catch(pe)},addStudyItemToFavourites:function(t){var r=t.studyItemId;return le({url:ie(e,"studyitems/".concat(r,"/favourites"),{}),method:"post",data:{}}).then(de).catch(pe)},deleteStudyItemFromFavourites:function(t){var r=t.studyItemId;return le({url:ie(e,"studyitems/".concat(r,"/favourites"),{}),method:"delete",data:{}}).then(de).catch(pe)}}}}]),e}(),he=new ve;function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}n["default"].use(U["a"]);var ye=new U["a"].Store({state:{loading:{},config:{clientAuth:null,urls:null},enums:null,termsOfUse:null,countries:null,languages:null,timeZones:null,auth:{isAuthenticated:!1,isRegistrationCompleted:!1,user:null,registrationInfo:null,preRegistrationUser:null,myPermissions:null,scopedPermissions:{permissions:[],roles:[]},userScopedPermissions:{}},userAccount:null,userInfo:null,company:null,companyDepartments:{},companyDepartment:{},companyUsers:{},departmentUsers:{},companyUser:{},companyUserInvitation:{},myCompanyInvitations:null,studyItemsPaginationResult:null,nav:{isVisible:!0},errorPage:{title:null,text:null}},getters:{isAnyLoading:function(e,t){var r=Object.keys(e.loading).reduce((function(t,r,a){return t||e.loading[r]}),!1);return r},userId:function(e,t){return e.auth.user?e.auth.user.profile.sub:null},tokens:function(e,t){if(!e.auth.user)return{};var r=e.auth.user,a=r.access_token,n=r.id_token,s=r.refresh_token;return{access_token:a,id_token:n,refresh_token:s}}},mutations:(me={},Object(_["a"])(me,H.LOADING_SET,(function(e,t){var r=t.target,a=t.loading;e.loading=ge({},a,Object(_["a"])({},r,a))})),Object(_["a"])(me,H.CONFIG_SET,(function(e,t){var r=t.config;e.config=r})),Object(_["a"])(me,H.LANGUAGES_SET,(function(e,t){var r=t.data;e.languages=r})),Object(_["a"])(me,H.AUTH_USER_SET,(function(e,t){var r=t.user;e.auth.isAuthenticated=!!r,e.auth.user=ge({},r)})),Object(_["a"])(me,H.AUTH_USER_RESET,(function(e){e.auth.isAuthenticated=!1,e.auth.user=null})),Object(_["a"])(me,H.AUTH_REGISTRATION_INFO_SET,(function(e,t){var r=t.registrationInfo;e.auth.registrationInfo=r})),Object(_["a"])(me,H.AUTH_PREREGISTRATION_USER_SET,(function(e,t){var r=t.data;e.auth.preRegistrationUser=r})),Object(_["a"])(me,H.AUTH_MY_PERMISSIONS_SET,(function(e,t){var r=t.myPermissions;e.auth.myPermissions=r})),Object(_["a"])(me,H.AUTH_SCOPED_PERMISSIONS_SET,(function(e,t){var r=t.data;e.auth.scopedPermissions=r})),Object(_["a"])(me,H.AUTH_USER_SCOPED_PERMISSIONS_SET,(function(e,t){var r=t.scopeId,a=t.userId,n=t.data,s=ge({},e.auth.userScopedPermissions||{});e.auth.userScopedPermissions=ge({},s,Object(_["a"])({},r,ge({},s[r]||{},Object(_["a"])({},a,n))))})),Object(_["a"])(me,H.AUTH_USER_ACCOUNT_SET,(function(e,t){var r=t.data;e.userAccount=r})),Object(_["a"])(me,H.STUDY_ITEMS_SET,(function(e,t){var r=t.data;e.studyItemsPaginationResult=r})),Object(_["a"])(me,H.STUDY_ITEMS_CREATE_SET,(function(e,t){var r=t.data;null!==e.studyItemsPaginationResult&&e.studyItemsPaginationResult.items.unshift(ge({},r))})),Object(_["a"])(me,H.STUDY_ITEM_UPDATE_SET,(function(e,t){var r=t.data;null!==e.studyItemsPaginationResult&&(e.studyItemsPaginationResult.items=e.studyItemsPaginationResult.items.map((function(e){return e.id===r.id?ge({},r):e})))})),Object(_["a"])(me,H.STUDY_ITEM_DELETE_SET,(function(e,t){var r=t.studyItemId;null!==e.studyItemsPaginationResult&&(e.studyItemsPaginationResult.items=e.studyItemsPaginationResult.items.filter((function(e){return e.id!==r})))})),Object(_["a"])(me,H.STUDY_ITEM_IS_FAVOURITE_SET,(function(e,t){var r=t.studyItemId,a=t.isFavourite;null!==e.studyItemsPaginationResult&&(e.studyItemsPaginationResult.items=e.studyItemsPaginationResult.items.map((function(e){return e.id===r?ge({},e,{isFavourite:a}):e})))})),Object(_["a"])(me,H.NAV_VISIBILITY_SET,(function(e,t){var r=t.isVisible;e.nav.isVisible=r})),Object(_["a"])(me,H.ERROR_PAGE_DATA_SET,(function(e,t){var r=t.data;e.errorPage=ge({},e.errorPage,{},r)})),Object(_["a"])(me,H.ERROR_PAGE_DATA_RESET,(function(e){e.errorPage={}})),me),actions:(fe={},Object(_["a"])(fe,H.CONFIG_LOAD,(function(e){var t=e.commit;e.dispatch,e.getters,e.state;return t(H.LOADING_SET,{target:H.CONFIG_LOAD,loading:!0}),he.configApi().config().then((function(e){var r=e.data;e.ok;return t(H.LOADING_SET,{target:H.CONFIG_LOAD,loading:!1}),t(H.CONFIG_SET,{config:r}),r})).catch((function(e){throw t(H.LOADING_SET,{target:H.CONFIG_LOAD,loading:!1}),e}))})),Object(_["a"])(fe,H.LANGUAGES_LOAD,(function(e){var t=e.commit;e.dispatch,e.getters;return t(H.LOADING_SET,{target:H.LANGUAGES_LOAD,loading:!0}),he.webApi().getLanguages().then((function(e){var r=e.data;e.ok;return t(H.LOADING_SET,{target:H.LANGUAGES_LOAD,loading:!1}),t(H.LANGUAGES_SET,{data:r}),r})).catch((function(e){throw t(H.LOADING_SET,{target:H.LANGUAGES_LOAD,loading:!1}),e}))})),Object(_["a"])(fe,H.USER_INFO_LOAD,(function(e,t){Object(Y["a"])(t);var r=e.commit;e.dispatch,e.getters;return r(H.LOADING_SET,{target:H.USER_INFO_LOAD,loading:!0}),he.accountManager().getUserInfo().then((function(e){var t=e.data;e.ok;return r(H.LOADING_SET,{target:H.USER_INFO_LOAD,loading:!1}),r(H.USER_INFO_SET,{userInfo:t}),t})).catch((function(e){throw r(H.LOADING_SET,{target:H.USER_INFO_LOAD,loading:!1}),e}))})),Object(_["a"])(fe,H.USER_INFO_UPDATE,(function(e,t){var r=t.data,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.USER_INFO_UPDATE,loading:!0}),he.accountManager().updateUserInfo(r).then((function(e){var t=e.data;e.ok;return a(H.LOADING_SET,{target:H.USER_INFO_UPDATE,loading:!1}),a(H.USER_INFO_SET,{userInfo:t}),t})).catch((function(e){throw a(H.LOADING_SET,{target:H.USER_INFO_UPDATE,loading:!1}),e}))})),Object(_["a"])(fe,H.USER_INFO_NOTIFICATIONS_UPDATE,(function(e,t){var r=t.data,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.USER_INFO_NOTIFICATIONS_UPDATE,loading:!0}),he.accountManager().updateUserInfoNotifications(r).then((function(e){var t=e.data;e.ok;return a(H.LOADING_SET,{target:H.USER_INFO_NOTIFICATIONS_UPDATE,loading:!1}),a(H.USER_INFO_SET,{userInfo:t}),t})).catch((function(e){throw a(H.LOADING_SET,{target:H.USER_INFO_NOTIFICATIONS_UPDATE,loading:!1}),e}))})),Object(_["a"])(fe,H.USER_INFO_TIMEZONE_SET,(function(e,t){var r=t.timeZoneId,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.USER_INFO_TIMEZONE_SET,loading:!0}),he.accountManager().setUserInfoTimeZone({timeZoneId:r}).then((function(e){var t=e.data;e.ok;return a(H.LOADING_SET,{target:H.USER_INFO_TIMEZONE_SET,loading:!1}),a(H.USER_INFO_SET,{userInfo:t}),t})).catch((function(e){throw a(H.LOADING_SET,{target:H.USER_INFO_TIMEZONE_SET,loading:!1}),e}))})),Object(_["a"])(fe,H.USER_INFO_CURRENT_COMPANY_SET,(function(e,t){var r=t.companyId,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.USER_INFO_CURRENT_COMPANY_SET,loading:!0}),he.accountManager().setCurrentUserCompany({companyId:r}).then((function(e){var t=e.data;e.ok;return a(H.LOADING_SET,{target:H.USER_INFO_CURRENT_COMPANY_SET,loading:!1}),a(H.USER_INFO_SET,{userInfo:t}),t})).catch((function(e){throw a(H.LOADING_SET,{target:H.USER_INFO_CURRENT_COMPANY_SET,loading:!1}),e}))})),Object(_["a"])(fe,H.STUDY_ITEMS_LOAD,(function(e,t){var r=e.commit;e.dispatch,e.getters;return r(H.LOADING_SET,{target:H.STUDY_ITEMS_LOAD,loading:!0}),he.webApi().getStudyItems(t).then((function(e){var t=e.data;e.ok;return r(H.LOADING_SET,{target:H.STUDY_ITEMS_LOAD,loading:!1}),r(H.STUDY_ITEMS_SET,{data:t}),t})).catch((function(e){throw r(H.LOADING_SET,{target:H.STUDY_ITEMS_LOAD,loading:!1}),e}))})),Object(_["a"])(fe,H.STUDY_ITEM_CREATE,(function(e,t){var r=t.data,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_CREATE,loading:!0}),he.webApi().createStudyItem({data:r}).then((function(e){var t=e.data;e.ok;return a(H.LOADING_SET,{target:H.STUDY_ITEM_CREATE,loading:!1}),a(H.STUDY_ITEMS_CREATE_SET,{data:t}),t})).catch((function(e){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_CREATE,loading:!1}),e}))})),Object(_["a"])(fe,H.STUDY_ITEM_UPDATE,(function(e,t){var r=t.studyItemId,a=t.data,n=e.commit;e.dispatch,e.getters;return n(H.LOADING_SET,{target:H.STUDY_ITEM_UPDATE,loading:!0}),he.webApi().updateStudyItem({studyItemId:r,data:a}).then((function(e){var t=e.data;e.ok;return n(H.LOADING_SET,{target:H.STUDY_ITEM_UPDATE,loading:!1}),n(H.STUDY_ITEM_UPDATE_SET,{data:t}),t})).catch((function(e){throw n(H.LOADING_SET,{target:H.STUDY_ITEM_UPDATE,loading:!1}),e}))})),Object(_["a"])(fe,H.STUDY_ITEM_DELETE,(function(e,t){var r=t.studyItemId,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE,loading:!0}),he.webApi().deleteStudyItem({studyItemId:r}).then((function(e){e.data,e.ok;a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE,loading:!1}),a(H.STUDY_ITEM_DELETE_SET,{studyItemId:r})})).catch((function(e){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE,loading:!1}),e}))})),Object(_["a"])(fe,H.STUDY_ITEM_ADD_TO_FAVOURITES,(function(e,t){var r=t.studyItemId,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_ADD_TO_FAVOURITES,loading:!0}),he.webApi().addStudyItemToFavourites({studyItemId:r}).then((function(e){e.data,e.ok;a(H.LOADING_SET,{target:H.STUDY_ITEM_ADD_TO_FAVOURITES,loading:!1}),a(H.STUDY_ITEM_IS_FAVOURITE_SET,{studyItemId:r,isFavourite:!0})})).catch((function(e){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_ADD_TO_FAVOURITES,loading:!1}),e}))})),Object(_["a"])(fe,H.STUDY_ITEM_DELETE_FROM_FAVOURITES,(function(e,t){var r=t.studyItemId,a=e.commit;e.dispatch,e.getters;return a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE_FROM_FAVOURITES,loading:!0}),he.webApi().deleteStudyItemFromFavourites({studyItemId:r}).then((function(e){e.data,e.ok;a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE_FROM_FAVOURITES,loading:!1}),a(H.STUDY_ITEM_IS_FAVOURITE_SET,{studyItemId:r,isFavourite:!1})})).catch((function(e){throw a(H.LOADING_SET,{target:H.STUDY_ITEM_DELETE_FROM_FAVOURITES,loading:!1}),e}))})),fe)}),_e=r("8c4f"),Se=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Oe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home-wrapper"},[r("img",{attrs:{src:"img/logo.png",alt:""}})])}];function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ie={name:"home",components:{},data:function(){return{privateState:{}}},computed:Ce({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},we=Ie,Te=Object(T["a"])(we,Se,Oe,!1,null,null,null),je=Te.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"error-page-wrapper"},[r("h3",[e._v(e._s(e.title))]),r("p",[e._v(e._s(e.text))]),r("img",{staticClass:"error-image",attrs:{src:"img/error-robot.png",alt:""}})])},Ae=[];function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Me={name:"error",data:function(){return{privateState:{}}},computed:Pe({},Object(U["b"])({sharedState:function(e){return e},title:function(e){return e.errorPage.title||"Something went wrong!"},text:function(e){return e.errorPage.text||"Try again or contact support."}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){this.$store.commit(H.ERROR_PAGE_DATA_RESET)}},Ne=Me,Ue=Object(T["a"])(Ne,De,Ae,!1,null,null,null),xe=Ue.exports,ke=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"terms-of-use-page-wrapper"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.TERMS_OF_USE_LOAD]}}),e.sharedState.termsOfUse?r("div",[r("div",{domProps:{innerHTML:e._s(e.sharedState.termsOfUse.text)}})]):e._e()],1)},Le=[],$e=(r("b383"),function(){function e(){Object(x["a"])(this,e)}return Object(k["a"])(e,[{key:"isServerErrorResponse",value:function(e){return!!(e instanceof Q&&e.config&&G.a.isObject(e.config)&&e.data&&G.a.isObject(e.data)&&e.headers&&G.a.isObject(e.headers)&&e.request&&G.a.isObject(e.request)&&G.a.isInteger(e.status)&&G.a.isString(e.statusText))}},{key:"showDefaultError",value:function(){n["default"].notify({group:"error",type:"error",title:":( Opps. Something went wrong...",text:"You can try again or contact support."})}},{key:"showErrorIfServerErrorResponse",value:function(e){if(this.isServerErrorResponse(e)){e.config;var t=e.data,r=(e.header,e.request,e.status,e.statusText,t.errors),a=t.title;if(!r)return;var s=a||"Error",o="Something went wrong. Please try again.",i=Object.keys(r).filter((function(e){return"debugStackTrace"!==e}));if(i.length>0){var c=i.map((function(e,t){if(G.a.isArray(r[e])){var a=r[e].join("<br/>");return"".concat(r[e].length>1&&0!==t?"<br/>":"").concat(a)}return G.a.isString(r[e])?r[e]:""}));o=c.join("<br/>")}n["default"].notify({group:"error",type:"error",title:s,text:o})}}},{key:"showErrorIfServerErrorResponseOrDefaultError",value:function(e){this.isServerErrorResponse(e)?this.showErrorIfServerErrorResponse(e):this.showDefaultError()}}]),e}()),Fe=new $e,Ye=function(){function e(){Object(x["a"])(this,e)}return Object(k["a"])(e,[{key:"waitAsync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return new Promise((function(t,r){setTimeout((function(){t()}),e)}))}}]),e}(),Ve=new Ye,Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.visible?r("div",{staticClass:"app-row-loader"},[r("i",{staticClass:"fas fa-circle-notch fa-spin fa-spin--1s fa-3x loader-spinner"})]):e._e()},He=[],Ze={name:"row-loader",props:{visible:Boolean},components:{},data:function(){return{privateState:{}}},computed:{},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},qe=Ze,ze=Object(T["a"])(qe,Ge,He,!1,null,"ce1f76a8",null),Be=ze.exports,We=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("button",{staticClass:"btn app-loading-button",class:{"app-loading-button--loading":e.loading},attrs:{type:e.computedType}},[r("span",{staticClass:"button-flex-wrapper"},[r("span",{staticClass:"button-content"},[e._t("default")],2),e.loading?r("span",{staticClass:"loading-icon-wrapper"},[r("i",{staticClass:"fas fa-circle-notch fa-spin fa-spin--1s loading-icon"})]):e._e()])])},Ke=[],Je={name:"loading-button",props:{type:String,loading:Boolean},components:{},data:function(){return{privateState:{}}},computed:{computedType:function(){return this.type||"button"}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Qe=Je,Xe=Object(T["a"])(Qe,We,Ke,!1,null,"4b084372",null),et=Xe.exports;function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var at={name:"terms-of-use",components:{RowLoader:Be},data:function(){return{privateState:{storeTypes:H}}},computed:rt({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.sharedState.termsOfUse||this.$store.dispatch(H.TERMS_OF_USE_LOAD,{}).then((function(e){})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){}},nt=at,st=Object(T["a"])(nt,ke,Le,!1,null,null,null),ot=st.exports,it=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ct=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login-wrapper"},[r("i",{staticClass:"fas fa-circle-notch fa-spin loader"})])}],lt={name:"login",created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Login.vue created"),e.next=3,ho.isAuthenticated();case 3:if(e.t0=e.sent,!1!==e.t0){e.next=6;break}ho.login();case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){console.log("Login.vue mounted")},updated:function(){console.log("Login.vue updated")},destroyed:function(){console.log("Login.vue destroyed")}},ut=lt,dt=Object(T["a"])(ut,it,ct,!1,null,null,null),pt=dt.exports,mt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-4"},[e.globalLoading?r("div",[r("row-loader",{attrs:{visible:e.globalLoading}})],1):e._e(),e.globalLoading?e._e():r("div",["invitation-validating"===e.privateState.currentStep?r("div",[r("div",[e._v(" Validating invitation... ")])]):e._e(),"invitation-invalid"===e.privateState.currentStep?r("div",[r("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(" Your invitation is invalid or expired. ")])]):e._e(),"phone-enter"===e.privateState.currentStep?r("div",[e.sharedState.auth.isRegistrationCompleted?e._e():r("div",[r("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[e._v(" You should complete registration proccess. ")])]),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitPhoneEnterStep(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPhone"}},[e._v("Phone number")]),r("vue-tel-input",{attrs:{mode:"international",disabledFetchingCountry:!1,disabledFormatting:!1,enabledCountryCode:!0,inputClasses:[],enabledFlags:!0,required:!0},model:{value:e.privateState.model.phoneNumber,callback:function(t){e.$set(e.privateState.model,"phoneNumber",t)},expression:"privateState.model.phoneNumber"}}),r("small",{staticClass:"form-text text-muted"},[e._v("Phone number is used for confirmation.")])],1),r("loading-button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.AUTH_REGISTRATION_SMS_TOKEN_SEND]}},[e._v("Next")])],1)]):e._e(),"phone-validate"===e.privateState.currentStep?r("div",[r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitPhoneValidateStep(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputConfiramtionCode"}},[e._v("Confirmation code")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.model.phoneNumberConfirmationToken,expression:"privateState.model.phoneNumberConfirmationToken"}],staticClass:"form-control",attrs:{type:"text",id:"inputConfiramtionCode","aria-describedby":"confiramtionCodeHelp",placeholder:"Confirmation code"},domProps:{value:e.privateState.model.phoneNumberConfirmationToken},on:{input:function(t){t.target.composing||e.$set(e.privateState.model,"phoneNumberConfirmationToken",t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"confiramtionCodeHelp"}},[e._v("Code was sent to "+e._s(e.privateState.model.phoneNumber)+".")])]),r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.goToStep("phone-enter")}}},[e._v("Back")]),e._v(" "),r("loading-button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.AUTH_REGISTRATION_SMS_TOKEN_VALIDATE]}},[e._v("Next")])],1)]):e._e(),"registration-data-enter"===e.privateState.currentStep?r("div",[r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmitRegistrationDataEnterStep(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputEmail"}},[e._v("Email address")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.model.email,expression:"privateState.model.email"}],staticClass:"form-control",attrs:{disabled:e.privateState.isEmailInputDisabled,type:"email",id:"inputEmail","aria-describedby":"emailHelp",placeholder:"Enter email",autocomplete:"username"},domProps:{value:e.privateState.model.email},on:{input:function(t){t.target.composing||e.$set(e.privateState.model,"email",t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("Email is your username.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPassword"}},[e._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.model.password,expression:"privateState.model.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword","aria-describedby":"passwordHelp",placeholder:"Password",autocomplete:"new-password"},domProps:{value:e.privateState.model.password},on:{input:function(t){t.target.composing||e.$set(e.privateState.model,"password",t.target.value)}}}),e.registrationInfo&&e.registrationInfo.passwordSuggestions?r("small",{staticClass:"form-text text-muted password-suggestion-list",attrs:{id:"passwordHelp"}},e._l(e.registrationInfo.passwordSuggestions,(function(t){return r("p",{key:t.id,staticClass:"list-item"},[e._v(" "+e._s(t)+" ")])})),0):e._e()]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPasswordConfirm"}},[e._v("Confirm password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.model.passwordConfirm,expression:"privateState.model.passwordConfirm"}],staticClass:"form-control",attrs:{type:"password",id:"inputPasswordConfirm","aria-describedby":"passwordConfirmHelp",placeholder:"Confirm password",autocomplete:"new-password"},domProps:{value:e.privateState.model.passwordConfirm},on:{input:function(t){t.target.composing||e.$set(e.privateState.model,"passwordConfirm",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputName"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.model.name,expression:"privateState.model.name"}],staticClass:"form-control",attrs:{type:"text",id:"inputName","aria-describedby":"nameHelp",placeholder:"Enter display name"},domProps:{value:e.privateState.model.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.model,"name",t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"nameHelp"}},[e._v("E.g. John Doe.")])]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.model.isAcceptTermsOfUse,expression:"privateState.model.isAcceptTermsOfUse"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"inputAcceptTermsOfUse"},domProps:{checked:Array.isArray(e.privateState.model.isAcceptTermsOfUse)?e._i(e.privateState.model.isAcceptTermsOfUse,null)>-1:e.privateState.model.isAcceptTermsOfUse},on:{change:function(t){var r=e.privateState.model.isAcceptTermsOfUse,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.model,"isAcceptTermsOfUse",r.concat([s])):o>-1&&e.$set(e.privateState.model,"isAcceptTermsOfUse",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.model,"isAcceptTermsOfUse",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"inputAcceptTermsOfUse"}},[e._v(" I accept the "),r("router-link",{attrs:{to:{name:"terms-of-use"},target:"_blank"}},[e._v("Terms Of Use")])],1)]),r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.goToStep("phone-validate")}}},[e._v("Back")]),e._v(" "),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.AUTH_REGISTER_AS_INTERNAL_USER]}},[e._v("Register")])],1)]):e._e(),"registration-completed"===e.privateState.currentStep?r("div",[r("div",{staticClass:"user-registered-wrapper"},[r("i",{staticClass:"fas fa-user-check user-registered-icon"}),r("h5",[e._v("You have beed registered!")]),r("div",[r("router-link",{attrs:{to:{name:"login"}}},[e._v("Login")]),e._v(" now and start working. ")],1)])]):e._e()])])])])},ft=[];r("7db0");function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var bt={name:"register",components:{RowLoader:Be,LoadingButton:et},props:{query:{invitationId:String}},data:function(){return{privateState:{storeTypes:H,currentStep:"phone-enter",model:{phoneNumber:"",phoneNumberConfirmationToken:"",email:"",password:"",passwordConfirm:"",name:"",isAcceptTermsOfUse:!1},isEmailInputDisabled:!1}}},computed:ht({},Object(U["b"])({sharedState:function(e){return e},registrationInfo:function(e){return e.auth.registrationInfo||null},invitation:function(e){return this.query.invitationId&&e.companyUserInvitation[this.query.invitationId]?e.companyUserInvitation[this.query.invitationId]:null},globalLoading:function(e){return e.loading[H.COMPANY_USER_INVITATION_VALIDATE]||e.loading[H.COMPANY_USER_INVITATION_LOAD]||e.loading[H.AUTH_PREREGISTRATION_USER_LOAD]||e.loading[H.AUTH_REGISTRATION_TOKENS_REFRESH]}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,this.query.invitationId&&(this.privateState.currentStep="invitation-validating",this.$store.dispatch(H.COMPANY_USER_INVITATION_VALIDATE,{invitationId:this.query.invitationId}).then((function(e){!0===e?(r.privateState.currentStep="phone-enter",r.$store.dispatch(H.COMPANY_USER_INVITATION_LOAD,{invitationId:r.query.invitationId}).then((function(e){t.privateState.model.email=e.email,t.privateState.isEmailInputDisabled=!0})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))):r.privateState.currentStep="invitation-invalid"})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))),this.query.preRegistrationUserId&&this.$store.dispatch(H.AUTH_PREREGISTRATION_USER_LOAD,{preRegistrationUserId:this.query.preRegistrationUserId}).then((function(e){e?(t.privateState.model.phoneNumber=(e.claims.find((function(e){return"phone_number"===e.type}))||{}).value||t.privateState.model.phoneNumber,t.privateState.model.email=(e.claims.find((function(e){return"email"===e.type}))||{}).value||t.privateState.model.email,t.privateState.model.name=(e.claims.find((function(e){return"name"===e.type}))||{}).value||t.privateState.model.name):r.handleAfterRegistrationForExternalUser()})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.$store.dispatch(H.AUTH_REGISTRATION_INFO_LOAD,{}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{goToStep:function(e){this.privateState.currentStep=e},onSubmitPhoneEnterStep:function(e){var t=this;console.log("onSubmitPhoneEnterStep. model - ",this.privateState.model),this.$store.dispatch(H.AUTH_REGISTRATION_SMS_TOKEN_SEND,{phoneNumber:this.privateState.model.phoneNumber,preRegistrationUserId:this.query.preRegistrationUserId||null}).then((function(){t.privateState.currentStep="phone-validate"})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onSubmitPhoneValidateStep:function(e){var t=this;console.log("onSubmitPhoneValidateStep. model - ",this.privateState.model),this.$store.dispatch(H.AUTH_REGISTRATION_SMS_TOKEN_VALIDATE,{phoneNumber:this.privateState.model.phoneNumber,token:this.privateState.model.phoneNumberConfirmationToken,preRegistrationUserId:this.query.preRegistrationUserId||null}).then((function(e){e?t.privateState.currentStep="registration-data-enter":t.$notify({group:"error",type:"error",title:"Invalid phone confirmation code",text:""})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onSubmitRegistrationDataEnterStep:function(e){var t=this;console.log("onSubmitRegistrationDataEnterStep. model - ",this.privateState.model);var r=ht({},this.privateState.model,{clientId:this.sharedState.config.clientAuth.clientId,invitationId:this.query.invitationId||null,preRegistrationUserId:this.query.preRegistrationUserId||null});this.$store.dispatch(H.AUTH_REGISTER_AS_INTERNAL_USER,{user:r}).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.query.preRegistrationUserId?t.handleAfterRegistrationForExternalUser():t.privateState.currentStep="registration-completed";case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},handleAfterRegistrationForExternalUser:function(){var e=this;this.query.preRegistrationUserId&&(this.$notify({group:"app",type:"success",title:"You have beed registered!",text:"Logging you in..."}),this.$store.commit(H.LOADING_SET,{target:H.AUTH_REGISTRATION_TOKENS_REFRESH,loading:!0}),ho.refreshTokens({withFullscreenLoader:!0}).then((function(){e.$router.push({name:"dashboard-home"}),e.$store.commit(H.LOADING_SET,{target:H.AUTH_REGISTRATION_TOKENS_REFRESH,loading:!1})})).catch((function(t){console.error(t),e.$store.commit(H.LOADING_SET,{target:H.AUTH_REGISTRATION_TOKENS_REFRESH,loading:!1}),e.$notify({group:"error",type:"error",title:"Can't login after registration.",text:"Try to refresh the page."})})))}}},gt=bt,yt=Object(T["a"])(gt,mt,ft,!1,null,null,null),_t=yt.exports,St=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"logout-wrapper"},[r("i",{staticClass:"fas fa-circle-notch fa-spin loader"})])}],Et={name:"logout",created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("Logout.vue created"),ho.logout();case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){console.log("Logout.vue mounted")},updated:function(){console.log("Logout.vue updated")},destroyed:function(){console.log("Logout.vue destroyed")}},Ct=Et,It=Object(T["a"])(Ct,St,Ot,!1,null,null,null),wt=It.exports,Tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dashboard-wrapper"},[r("ul",{staticClass:"nav"},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"study-items-browse",params:{}}}},[e._v("Browse items")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:{name:"study-items-learn-cards",params:{}}}},[e._v("Cards")])],1)]),r("div",{staticClass:"mb-2"},[e._v(" TODO: display stats ")])])},jt=[];function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Rt={name:"study-items-dashboard",components:{},data:function(){return{privateState:{storeTypes:H}}},computed:At({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Pt=Rt,Mt=Object(T["a"])(Pt,Tt,jt,!1,null,null,null),Nt=Mt.exports,Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.STUDY_ITEMS_LOAD]}}),e.studyItems?r("div",{staticClass:"study-items-wrapper"},[r("h5",{staticClass:"mb-3"},[e._v("Study items:")]),r("div",{staticClass:"btn-toolbar mb-3",attrs:{role:"toolbar","aria-label":"Toolbar with button groups"}},[r("div",{staticClass:"btn-group mr-2",attrs:{role:"group","aria-label":"View toggle"}},[r("button",{staticClass:"btn",class:{"btn-primary":"list"===e.privateState.currentView,"btn-secondary":"list"!==e.privateState.currentView},attrs:{type:"button"},on:{click:e.toggleView}},[r("i",{staticClass:"fas fa-list"})]),r("button",{staticClass:"btn",class:{"btn-primary":"cards"===e.privateState.currentView,"btn-secondary":"cards"!==e.privateState.currentView},attrs:{type:"button"},on:{click:e.toggleView}},[r("i",{staticClass:"fas fa-th"})])]),r("div",{staticClass:"btn-group mr-2",attrs:{role:"group","aria-label":"Create a new item"}},[r("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:e.onCreateStudyItem}},[r("i",{staticClass:"fas fa-plus"})])])]),r("div",[r("pagination-wrapper",{attrs:{paginationResult:e.sharedState.studyItemsPaginationResult,loadItemsF:e.loadStudyItems,showGoToButtons:!0}},["list"===e.privateState.currentView?r("div",{staticClass:"list-group study-items-list"},e._l(e.studyItems,(function(t){return r("a",{key:"list-"+t.id,staticClass:"list-group-item list-group-item-action flex-column align-items-start study-item",attrs:{href:"#"}},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("h6",{staticClass:"mb-1"},[e._v(e._s(t.title))]),r("div",[r("span",{staticClass:"badge badge-info mr-1"},[e._v(e._s(t.languageCode))]),e._l(t.tags,(function(t){return r("span",{key:t,staticClass:"badge badge-secondary mr-1"},[e._v(e._s(t))])})),r("span",{staticClass:"cursor-pointer",on:{click:function(r){return e.onStudyItemFavoriteClick(t)}}},[t.isFavourite?r("i",{staticClass:"fas fa-star text-warning"}):r("i",{staticClass:"far fa-star text-warning"})]),r("span",{staticClass:"ml-2 mr-2"},[e._v("|")]),r("span",[r("span",{staticClass:"badge badge-secondary mr-1 cursor-pointer",on:{click:function(r){return e.onUpdateStudyItem(t.id)}}},[r("i",{staticClass:"fas fa-pencil-alt"})]),r("span",{staticClass:"badge badge-secondary cursor-pointer",on:{click:function(r){return e.onDeleteStudyItem(t.id)}}},[r("i",{staticClass:"fas fa-times"})])])],2)]),r("div",[r("small",[e._v(e._s(t.description))])]),r("div",{staticClass:"text-secondary"},[r("small",[r("em",[e._v(e._s(t.exampleText))])])])])})),0):e._e(),"cards"===e.privateState.currentView?r("div",{staticClass:"study-items-card-list"},e._l(e.studyItems,(function(t){return r("div",{key:"card-"+t.id,staticClass:"card bg-light study-item-card"},[t.image?r("img",{staticClass:"card-img-top",attrs:{src:t.image.url,alt:t.title}}):r("img",{staticClass:"card-img-top",attrs:{src:"/img/empty-image.png"}}),r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("span",[e._v(e._s(t.title))])])]),r("div",{staticClass:"card-text small mb-1"},[r("div",[e._v(e._s(t.description))])]),r("div",{staticClass:"card-text small text-secondary mb-1"},[r("em",[e._v(e._s(t.exampleText))])]),r("div",{staticClass:"card-text"},[r("span",{staticClass:"badge badge-info mr-1"},[e._v(e._s(t.languageCode))]),e._l(t.tags,(function(t){return r("span",{key:t,staticClass:"badge badge-secondary mr-1"},[e._v(e._s(t))])}))],2)]),r("div",{staticClass:"card-bottom-controls"},[r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return e.onStudyItemFavoriteClick(t)}}},[t.isFavourite?r("i",{staticClass:"fas fa-star text-warning"}):r("i",{staticClass:"far fa-star text-warning"})]),r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return e.onUpdateStudyItem(t.id)}}},[r("i",{staticClass:"fas fa-pencil-alt"})]),r("span",{staticClass:"card-bottom-control-item",on:{click:function(r){return e.onDeleteStudyItem(t.id)}}},[r("i",{staticClass:"fas fa-times"})])])])})),0):e._e()])],1)]):e._e(),r("modal",{attrs:{name:"study-item-create-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},["create"===e.privateState.modalMode?r("span",[e._v("Create item")]):e._e(),"edit"===e.privateState.modalMode?r("span",[e._v("Edit item")]):e._e()]),r("div",{staticClass:"app-modal-close",on:{click:function(t){return e.$modal.hide("study-item-create-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.createEditStudyItem(e.privateState.modalMode)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"studyItemModel__title"}},[e._v("Title")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.studyItemModel.title,expression:"privateState.studyItemModel.title"}],staticClass:"form-control",attrs:{type:"text",id:"studyItemModel__title",placeholder:"Title"},domProps:{value:e.privateState.studyItemModel.title},on:{input:function(t){t.target.composing||e.$set(e.privateState.studyItemModel,"title",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"studyItemModel__description"}},[e._v("Description")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.privateState.studyItemModel.description,expression:"privateState.studyItemModel.description"}],staticClass:"form-control",attrs:{type:"text",id:"studyItemModel__description",placeholder:"Description"},domProps:{value:e.privateState.studyItemModel.description},on:{input:function(t){t.target.composing||e.$set(e.privateState.studyItemModel,"description",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"studyItemModel__exampleText"}},[e._v("Example text")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.privateState.studyItemModel.exampleText,expression:"privateState.studyItemModel.exampleText"}],staticClass:"form-control",attrs:{type:"text",id:"studyItemModel__exampleText",placeholder:"Example text"},domProps:{value:e.privateState.studyItemModel.exampleText},on:{input:function(t){t.target.composing||e.$set(e.privateState.studyItemModel,"exampleText",t.target.value)}}})]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.studyItemModel.isFavourite,expression:"privateState.studyItemModel.isFavourite"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"studyItemModel__isFavourite"},domProps:{checked:Array.isArray(e.privateState.studyItemModel.isFavourite)?e._i(e.privateState.studyItemModel.isFavourite,null)>-1:e.privateState.studyItemModel.isFavourite},on:{change:function(t){var r=e.privateState.studyItemModel.isFavourite,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.studyItemModel,"isFavourite",r.concat([s])):o>-1&&e.$set(e.privateState.studyItemModel,"isFavourite",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.studyItemModel,"isFavourite",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"studyItemModel__isFavourite"}},[e._v(" Favourite ")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[e._v("Language")]),r("language-code-select",{model:{value:e.privateState.studyItemModel.languageCode,callback:function(t){e.$set(e.privateState.studyItemModel,"languageCode",t)},expression:"privateState.studyItemModel.languageCode"}})],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[e._v("Tags")]),r("tags-multiselect",{model:{value:e.privateState.studyItemModel.tags,callback:function(t){e.$set(e.privateState.studyItemModel,"tags",t)},expression:"privateState.studyItemModel.tags"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.STUDY_ITEM_CREATE]||e.sharedState.loading[e.privateState.storeTypes.STUDY_ITEM_UPDATE]}},[e._v("Save")])],1)])])])],1)])])},xt=[],kt=r("7f45"),Lt=r.n(kt),$t=function(){function e(){Object(x["a"])(this,e)}return Object(k["a"])(e,[{key:"formatToISO",value:function(e){var t="YYYY-MM-DDTHH:mm:ssZ";return Lt()(e).format(t)}},{key:"_getInUserTimeZoneOrUTC",value:function(e){return this.userTimeZoneId?(console.log(this.userTimeZoneId),Lt()(e).tz(this.userTimeZoneId)):Lt()(e).utcOffset(0)}},{key:"getInDateInUTC",value:function(e){return Lt()(e).utcOffset(0).format("YYYY-MM-DD")}},{key:"getInTimeInUTC",value:function(e){return Lt()(e).utcOffset(0).format("HH:mm")}},{key:"formatInUserTimeZone",value:function(e){return this._getInUserTimeZoneOrUTC(e).format()}},{key:"formatToUserDisplayTime",value:function(e){var t=((ye.userInfo||{}).formatSettings||{}).timeFormat||"HH:mm";return this._getInUserTimeZoneOrUTC(e).format(t)}},{key:"formatToUserDisplayDate",value:function(e){var t=((ye.userInfo||{}).formatSettings||{}).dateFormat||"YYYY-MM-DD";return this._getInUserTimeZoneOrUTC(e).format(t)}},{key:"formatToUserDisplayDateTime",value:function(e){var t=((ye.userInfo||{}).formatSettings||{}).dateTimeFormat||"YYYY-MM-DD HH:mm";return this._getInUserTimeZoneOrUTC(e).format(t)}},{key:"formatToDefaultDisplayShortDateTimeInWeek",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var t="ddd HH:mm";return this._getInUserTimeZoneOrUTC(e).format(t)}},{key:"formatToDefaultDisplayShortDateTimeInMonth",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];var t="MMM Do HH:mm";return this._getInUserTimeZoneOrUTC(e).format(t)}},{key:"formatAccordingToInterval",value:function(e,t,r){var a=Lt.a.duration(this._getInUserTimeZoneOrUTC(r).diff(this._getInUserTimeZoneOrUTC(t))),n=a.asHours(),s=a.asDays(),o=a.asMonths();return n<=24?this.formatToUserDisplayTime(e):s<=7?this.formatToDefaultDisplayShortDateTimeInWeek(e):o<=1?this.formatToDefaultDisplayShortDateTimeInMonth(e):this.formatToUserDisplayDateTime(e)}},{key:"userTimeZoneId",get:function(){return ye.state.userInfo&&ye.state.userInfo.timeZone&&ye.state.userInfo.timeZone.timeZoneId?ye.state.userInfo.timeZone.timeZoneId:null}}]),e}(),Ft=new $t,Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-pagination-wrapper"},[r("div",{attrs:{id:e.scrollTopElId}}),e.showGoToButtons?r("div",{staticClass:"scroll-to-button",on:{click:e.scrollBottom}},[r("i",{staticClass:"fas fa-angle-double-down"})]):e._e(),e._t("default"),e.showGoToButtons?r("div",{staticClass:"scroll-to-button",on:{click:e.scrollTop}},[r("i",{staticClass:"fas fa-angle-double-up"})]):e._e(),0!==e.pageCount?r("div",{staticClass:"d-flex justify-content-center mt-4"},[r("paginate",{attrs:{"page-count":e.pageCount,"page-range":3,"margin-pages":2,"click-handler":e.pageChangeCallback,"prev-text":"Prev","next-text":"Next","container-class":"app-pagination","page-class":"page-item","page-link-class":"page-item-link","prev-class":"page-item","prev-link-class":"page-item-link","next-class":"page-item","next-link-class":"page-item-link","break-view-class":"break-view","break-view-link-class":"break-view-link","active-class":"page-item-active","disabled-class":"page-item-disabled","first-last-button":!0,"first-button-text":"First","last-button-text":"Last","hide-prev-next":!1},model:{value:e.privateState.currentPage,callback:function(t){e.$set(e.privateState,"currentPage",t)},expression:"privateState.currentPage"}})],1):e._e(),r("div",{attrs:{id:e.scrollBottomElId}})],2)},Vt=[],Gt={name:"pagination-wrapper",props:{paginationResult:Object,loadItemsF:Function,onPageChanged:Function,showGoToButtons:{type:Boolean,required:!1,default:!1}},components:{},data:function(){return{privateState:{currentPage:1,scrollRequired:!1}}},computed:{scrollTopElId:function(){return"paginationTop_".concat(this._uid||+new Date)},scrollBottomElId:function(){return"paginationBottom_".concat(this._uid||+new Date)},pageCount:function(){return this.paginationResult?Math.ceil(this.paginationResult.pagination.totalCount/this.pageSize):0},pageSize:function(){return this.paginationResult?this.paginationResult.pagination.limit:100}},created:function(){},mounted:function(){},updated:function(){this.$nextTick((function(){}))},destroyed:function(){},methods:{pageChangeCallback:function(e){console.log(this.$el.sele),this.onPageChanged&&this.onPageChanged(e);var t=this.pageSize,r=Math.max(this.privateState.currentPage-1,0)*t;this.scrollTo(),this.loadItemsF({offset:r,limit:t}).then((function(){}))},scrollTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top",t="#".concat("top"===e?this.scrollTopElId:this.scrollBottomElId);this.$scrollTo(t)},scrollBottom:function(){this.$scrollTo("#".concat(this.scrollBottomElId))},scrollTop:function(){this.$scrollTo("#".concat(this.scrollTopElId))}}},Ht=Gt,Zt=Object(T["a"])(Ht,Yt,Vt,!1,null,"429c99f0",null),qt=Zt.exports,zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("multiselect",{attrs:{options:e.languageList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,"custom-label":e.languageLabel,"track-by":"iso639_1_Code",placeholder:"Select language",loading:e.isLoading,disabled:!1},on:{input:e.onInput},model:{value:e.privateState.selectedLanguageOption,callback:function(t){e.$set(e.privateState,"selectedLanguageOption",t)},expression:"privateState.selectedLanguageOption"}})},Bt=[];function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Jt={name:"language-code-select",props:{value:{required:!0,default:null}},components:{},data:function(){return{privateState:{storeTypes:H,selectedLanguageOption:null}}},computed:Kt({},Object(U["b"])({sharedState:function(e){return e},isLoading:function(e){return e.loading[H.LANGUAGES_LOAD]},languageList:function(e){return e.languages||[]}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,null==t.sharedState.languageList&&t.$store.dispatch(H.LANGUAGES_LOAD,{}).then((function(){t.preselectLanguage()})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),t.preselectLanguage();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{preselectLanguage:function(){var e=this;this.value&&this.languageList&&(this.privateState.selectedLanguageOption=this.languageList.find((function(t){return t.iso639_1_Code===e.value}))||null)},languageLabel:function(e){return"".concat(e.iso639_1_Code," - ").concat(e.isoLanguageName," (").concat(e.nativeName,")")},onInput:function(e,t){e.isoLanguageName;var r=e.iso639_1_Code;this.$emit("input",r)}}},Qt=Jt,Xt=Object(T["a"])(Qt,zt,Bt,!1,null,"320565e7",null),er=Xt.exports,tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("multiselect",{attrs:{"tag-placeholder":"Add this as new tag",placeholder:"Search or add a tag",label:"name","track-by":"id",options:e.privateState.options,multiple:!0,searchable:!0,taggable:!0},on:{input:e.onInput,tag:e.addTag},model:{value:e.privateState.selectedTags,callback:function(t){e.$set(e.privateState,"selectedTags",t)},expression:"privateState.selectedTags"}})},rr=[],ar=r("2909");function nr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var or={name:"tags-multiselect",props:{value:{required:!0,default:[]}},components:{},data:function(){return{privateState:{storeTypes:H,options:[],selectedTags:[]}}},computed:sr({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this,this.value&&Array.isArray(this.value)&&(t=this.value.map((function(e){return{id:e.substring(0,2)+"_"+Math.floor(1e7*Math.random()),name:e}})),this.privateState.options=Object(ar["a"])(t),this.privateState.selectedTags=Object(ar["a"])(t));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{onInput:function(e,t){var r=e;this.$emit("input",r.map((function(e){return e.name})))},addTag:function(e){var t={id:e.substring(0,2)+"_"+Math.floor(1e7*Math.random()),name:e};this.privateState.options.push(t),this.privateState.selectedTags.push(t),this.onInput(Object(ar["a"])(this.privateState.selectedTags),null)}}},ir=or,cr=Object(T["a"])(ir,tr,rr,!1,null,"f1c4a11e",null),lr=cr.exports;function ur(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ur(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pr={title:null,description:null,exampleText:null,isFavourite:!1,languageCode:"en",tags:[]},mr={name:"study-items-browse",components:{RowLoader:Be,LoadingButton:et,PaginationWrapper:qt,LanguageCodeSelect:er,TagsMultiselect:lr},data:function(){return{privateState:{storeTypes:H,currentView:"list",studyItemModel:dr({},pr),modalMode:"create"}}},computed:dr({},Object(U["b"])({sharedState:function(e){return e},studyItems:function(e){return e.studyItemsPaginationResult?e.studyItemsPaginationResult.items:null}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadStudyItems();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadStudyItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offset,r=void 0===t?0:t,a=e.limit,n=void 0===a?50:a;return this.$store.dispatch(H.STUDY_ITEMS_LOAD,{offset:r,limit:n,search:null,isFavourite:null}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},toggleView:function(){this.privateState.currentView="list"===this.privateState.currentView?"cards":"list"},onCreateStudyItem:function(){this.privateState.modalMode="create",this.$modal.show("study-item-create-edit")},onUpdateStudyItem:function(e){this.privateState.modalMode="edit";var t=this.studyItems.find((function(t){return t.id===e}));this.privateState.studyItemModel=dr({id:t.id},t),this.$modal.show("study-item-create-edit")},onDeleteStudyItem:function(e){confirm("Are you sure?")&&this.deleteStudyItem(e)},onStudyItemFavoriteClick:function(e){e.isFavourite?this.deleteStudyItemFromFavourites(e.id):this.addStudyItemToFavourites(e.id)},createEditStudyItem:function(e){"create"===e?this.createStudyItem():"edit"===e&&this.updateStudyItem()},createStudyItem:function(){var e=this;this.$store.dispatch(H.STUDY_ITEM_CREATE,{data:dr({},this.privateState.studyItemModel)}).then((function(){e.$notify({group:"app",type:"success",title:"Item '".concat(e.privateState.studyItemModel.title,"' has been created!"),text:"",duration:5e3}),e.$modal.hide("study-item-create-edit"),e.privateState.studyItemModel=dr({},pr)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},updateStudyItem:function(){var e=this;this.$store.dispatch(H.STUDY_ITEM_UPDATE,{studyItemId:this.privateState.studyItemModel.id,data:dr({},this.privateState.studyItemModel)}).then((function(){e.$notify({group:"app",type:"success",title:"Item '".concat(e.privateState.studyItemModel.title,"' has been updated!"),text:"",duration:5e3}),e.$modal.hide("study-item-create-edit"),e.privateState.studyItemModel=dr({},pr)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteStudyItem:function(e){var t=this;this.$store.dispatch(H.STUDY_ITEM_DELETE,{studyItemId:e}).then((function(){t.$notify({group:"app",type:"success",title:"Item has been deleted!",text:"",duration:5e3});var e=3;t.studyItems.length<=e&&t.loadStudyItems()})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},addStudyItemToFavourites:function(e){this.$store.dispatch(H.STUDY_ITEM_ADD_TO_FAVOURITES,{studyItemId:e}).then((function(){})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteStudyItemFromFavourites:function(e){this.$store.dispatch(H.STUDY_ITEM_DELETE_FROM_FAVOURITES,{studyItemId:e}).then((function(){})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},fr=mr,vr=Object(T["a"])(fr,Ut,xt,!1,null,null,null),hr=vr.exports,br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.STUDY_ITEMS_LOAD]}}),e.studyItems?r("div",{staticClass:"study-items-wrapper"},[r("h5",{staticClass:"mb-3"},[e._v("Study items:")]),r("div",{staticClass:"btn-group mb-3",attrs:{role:"group","aria-label":"Basic example"}},[r("button",{staticClass:"btn",class:{"btn-primary":"list"===e.privateState.currentView,"btn-secondary":"list"!==e.privateState.currentView},attrs:{type:"button"},on:{click:e.toggleView}},[r("i",{staticClass:"fas fa-list"})]),r("button",{staticClass:"btn",class:{"btn-primary":"cards"===e.privateState.currentView,"btn-secondary":"cards"!==e.privateState.currentView},attrs:{type:"button"},on:{click:e.toggleView}},[r("i",{staticClass:"fas fa-th"})])]),r("div",[r("pagination-wrapper",{attrs:{paginationResult:e.sharedState.studyItemsPaginationResult,loadItemsF:e.loadStudyItems,showGoToButtons:!0}},["list"===e.privateState.currentView?r("div",{staticClass:"list-group study-items-list"},e._l(e.studyItems,(function(t){return r("a",{key:"list-"+t.id,staticClass:"list-group-item list-group-item-action flex-column align-items-start study-item",attrs:{href:"#"}},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("h6",{staticClass:"mb-1"},[e._v(e._s(t.title))]),r("div",[r("span",{staticClass:"badge badge-info mr-1"},[e._v(e._s(t.languageCode))]),e._l(t.tags,(function(t){return r("span",{key:t,staticClass:"badge badge-secondary mr-1"},[e._v(e._s(t))])})),r("span",[t.isFavourite?r("i",{staticClass:"fas fa-star text-warning mr-1"}):r("i",{staticClass:"far fa-star text-warning"})])],2)]),r("div",[r("small",[e._v(e._s(t.description))])]),r("div",{staticClass:"text-secondary"},[r("small",[r("em",[e._v(e._s(t.exampleText))])])])])})),0):e._e(),"cards"===e.privateState.currentView?r("div",{staticClass:"study-items-card-list"},e._l(e.studyItems,(function(t){return r("div",{key:"card-"+t.id,staticClass:"card bg-light study-item-card"},[t.image?r("img",{staticClass:"card-img-top",attrs:{src:t.image.url,alt:t.title}}):r("img",{staticClass:"card-img-top",attrs:{src:"/img/empty-image.png"}}),r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("span",[e._v(e._s(t.title))])])]),r("div",{staticClass:"card-text small mb-1"},[r("div",[e._v(e._s(t.description))])]),r("div",{staticClass:"card-text small text-secondary mb-1"},[r("em",[e._v(e._s(t.exampleText))])]),r("div",{staticClass:"card-text"},[r("span",{staticClass:"mr-1"},[t.isFavourite?r("i",{staticClass:"fas fa-star text-warning mr-1"}):r("i",{staticClass:"far fa-star text-warning"})]),r("span",{staticClass:"badge badge-info mr-1"},[e._v(e._s(t.languageCode))]),e._l(t.tags,(function(t){return r("span",{key:t,staticClass:"badge badge-secondary"},[e._v(e._s(t))])}))],2)])])})),0):e._e()])],1)]):e._e()],1)])])},gr=[];function yr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function _r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Sr={name:"study-items-learn-cards",components:{RowLoader:Be,PaginationWrapper:qt},data:function(){return{privateState:{storeTypes:H,currentView:"list"}}},computed:_r({},Object(U["b"])({sharedState:function(e){return e},studyItems:function(e){return e.studyItemsPaginationResult?e.studyItemsPaginationResult.items:null}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadStudyItems({offset:0,limit:100});case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadStudyItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offset,r=void 0===t?0:t,a=e.limit,n=void 0===a?100:a;return this.$store.dispatch(H.STUDY_ITEMS_LOAD,{offset:r,limit:n,search:null,isFavourite:null}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},toggleView:function(){this.privateState.currentView="list"===this.privateState.currentView?"cards":"list"}}},Or=Sr,Er=Object(T["a"])(Or,br,gr,!1,null,null,null),Cr=Er.exports,Ir=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"dashboard-wrapper"},[r("div",[r("current-company-control")],1),e.$store.getters.currentCompanyId?r("div",[r("ul",{staticClass:"nav nav-tabs app-nav-tabs",attrs:{id:"myTab",role:"tablist"}},[r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-home"===e.$router.currentRoute.name},attrs:{to:{name:"dashboard-home",params:{}}}},[e._v("Dashboard")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-gateways"===e.$router.currentRoute.name},attrs:{to:{name:"dashboard-gateways",params:{companyId:e.$store.getters.currentCompanyId}}}},[e._v("Gateways")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-sensors"===e.$router.currentRoute.name},attrs:{to:{name:"dashboard-sensors",params:{companyId:e.$store.getters.currentCompanyId}}}},[e._v("Sensors")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-departments"===e.$router.currentRoute.name},attrs:{to:{name:"dashboard-departments",params:{companyId:e.$store.getters.currentCompanyId}}}},[e._v("Departments")])],1),e.$store.getters.isUserHasPermissions(["CompanyUserRead"],e.$store.getters.currentCompanyId)?r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",class:{active:"dashboard-users"===e.$router.currentRoute.name},attrs:{to:{name:"dashboard-users",params:{companyId:e.$store.getters.currentCompanyId}}}},[e._v("Users")])],1):e._e()]),e.sharedState.userInfo?r("div",{staticClass:"tab-content app-tab-content",attrs:{id:"myTabContent"}},[r("div",{staticClass:"tab-pane fade show active",attrs:{id:"",role:"","aria-labelledby":""}},[r("router-view")],1)]):e._e()]):e._e()])},wr=[],Tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.sharedState.userInfo?r("div",{staticClass:"user-company-control-wrapper"},[e.sharedState.userInfo.companies?r("div",[r("h5",[e._v("Current company:")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col col-md-4"},[r("div",{staticClass:"d-flex justify-content-start align-items-start company-select-wrapper"},[r("multiselect",{attrs:{options:e.sharedState.userInfo.companies,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","track-by":"id",placeholder:"Select company",loading:e.isLoading,disabled:e.isLoading},on:{input:e.onCurrentCompanyChange},model:{value:e.privateState.selectedCompany,callback:function(t){e.$set(e.privateState,"selectedCompany",t)},expression:"privateState.selectedCompany"}}),e.$store.getters.isUserHasPermissions(["CompanyUpdate"],e.$store.getters.currentCompanyId)?r("button",{staticClass:"btn btn-outline-secondary ml-2",attrs:{type:"button"},on:{click:function(t){return e.onManageCompanyClick()}}},[r("i",{staticClass:"fas fa-cog"})]):e._e(),e.$store.getters.isUserHasPermissions(["CompanyCreate"],null)?r("button",{staticClass:"btn btn-outline-success ml-2",attrs:{type:"button"},on:{click:function(t){return e.onCreateCompanyClick(t)}}},[r("i",{staticClass:"fas fa-plus"})]):e._e(),e.$store.getters.currentCompanyId?r("loading-button",{staticClass:"btn btn-outline-danger ml-2",attrs:{type:"button",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_LEAVE]},nativeOn:{click:function(t){return e.leaveCurrentCompany()}}},[r("i",{staticClass:"fas fa-user-minus"})]):e._e()],1)])])]):e._e()]):e._e()},jr=[],Dr=function(){function e(){Object(x["a"])(this,e)}return Object(k["a"])(e,[{key:"handleUserConfirmationFlow",value:function(e){var t=e.actionF;return this._handleUserConfirmationFlow({actionF:t,userConfirmationRequest:null})}},{key:"_handleUserConfirmationFlow",value:function(e){var t=this,r=e.actionF,a=e.userConfirmationRequest,n=void 0===a?null:a,s=!!n||window.confirm("Are you sure?");return s?r({userConfirmation:n}).then((function(e){var r=e,a=(r.data,r.userConfirmation),n=a||{},s=n.isProcessed,o=n.confirmations,i=n.processedConfirmations,c=n.notifications;if(o&&0!==o.length){var l=o.map((function(e){var t=e.confirmationId,r=e.confirmationText,a=window.confirm(r);return{confirmationId:t,isConfirmed:a}})),u={confirmations:[].concat(Object(ar["a"])(i),Object(ar["a"])(l))};return{userConfirmationRequest:u,isProcessed:s}}return s?t._showNotifications(c,"success"):t._showNotifications(c,"information"),{userConfirmationRequest:null,isProcessed:s}})).then((function(e){var a=e.userConfirmationRequest,n=void 0===a?null:a,s=e.isProcessed,o=void 0!==s&&s;return n?t._handleUserConfirmationFlow({actionF:r,userConfirmationRequest:n}):{isProcessed:o}})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})):Promise.resolve({isProcessed:!1})}},{key:"_showNotifications",value:function(e,t){e&&0!==e.length&&t&&e.map((function(e){var r=e.title,a=e.text;n["default"].notify({group:"app-important",type:t,title:r,text:a})}))}}]),e}(),Ar=new Dr;function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mr={name:"current-company-control",props:{},components:{LoadingButton:et},data:function(){return{privateState:{storeTypes:H,selectedCompany:null}}},computed:Pr({},Object(U["b"])({sharedState:function(e){return e},isLoading:function(e){return e.loading[H.USER_INFO_LOAD]}})),created:function(){var e=this;this.setSelectedCompany(),this.$store.subscribe((function(t,r){var a=t.type;t.payload;a===H.USER_INFO_SET&&e.setSelectedCompany()}))},mounted:function(){},updated:function(){},destroyed:function(){},methods:{setSelectedCompany:function(){if(this.sharedState.userInfo){var e=this.sharedState.userInfo.companies.find((function(e){return e.isCurrent}));this.privateState.selectedCompany=e?Pr({},e):null}},onCurrentCompanyChange:function(e){var t=this,r=this.privateState.selectedCompany.id;this.$appFullscreenLoader({isVisible:!0,title:"Switching company..."}),this.$store.dispatch(H.USER_INFO_CURRENT_COMPANY_SET,{companyId:r}).then((function(){return ho.refreshTokens({withFullscreenLoader:!1})})).then((function(){t.$appFullscreenLoader({isVisible:!1})})).catch((function(e){t.$appFullscreenLoader({isVisible:!1}),console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onManageCompanyClick:function(){this.$router.push({name:"company-manage",params:{companyId:this.$store.getters.currentCompanyId}})},onCreateCompanyClick:function(e){this.$router.push({name:"company-create"})},leaveCurrentCompany:function(){var e=this;Ar.handleUserConfirmationFlow({actionF:function(t){var r=t.userConfirmation;return e.$store.dispatch(H.COMPANY_LEAVE,{companyId:e.$store.getters.currentCompanyId,userConfirmation:r})}}).then((function(t){var r=t.isProcessed;r&&e.$store.dispatch(H.USER_INFO_LOAD,{})})).catch((function(e){console.error(e)}))}}},Nr=Mr,Ur=Object(T["a"])(Nr,Tr,jr,!1,null,"2b8aada4",null),xr=Ur.exports;function kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $r={name:"dashboard",components:{CurrentCompanyControl:xr},data:function(){return{privateState:{storeTypes:H}}},computed:Lr({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Fr=$r,Yr=Object(T["a"])(Fr,Ir,wr,!1,null,null,null),Vr=Yr.exports,Gr=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Hr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{attrs:{src:"img/logo.png",alt:""}})])}];r("b20f");function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var zr={name:"dashboard-home",components:{},data:function(){return{privateState:{storeTypes:H}}},computed:qr({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){}},Br=zr,Wr=Object(T["a"])(Br,Gr,Hr,!1,null,null,null),Kr=Wr.exports,Jr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("row-loader",{staticClass:"mb-3",attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.GATEWAYS_LOAD]}}),e.sharedState.gatewaysData?r("div",[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},e._l(e.sharedState.gatewaysData.data,(function(t){return r("div",{key:t.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center"},[r("h6",{staticClass:"card-title"},[e._v(" "+e._s(t.name)+" ")]),t.isOnline?r("span",{staticClass:"badge badge-success align-self-start ml-1"},[e._v("Online")]):e._e(),t.isOnline?e._e():r("span",{staticClass:"badge badge-danger align-self-start ml-1"},[e._v("Offline")])]),r("div",{staticClass:"card-text small"},[r("div",[e._v("Serial: "+e._s(t.serial))]),r("div",[e._v("Last IP: "+e._s(t.lastIP))]),r("div",[e._v("Sensors: "+e._s(t.sensors?t.sensors.length:0))])])])])})),0)]):e._e()],1)},Qr=[];function Xr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ta={name:"dashboard-gateways",components:{RowLoader:Be},props:{companyId:String},data:function(){return{privateState:{storeTypes:H}}},computed:ea({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.companyId&&this.$store.dispatch(H.GATEWAYS_LOAD,{companyId:this.companyId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){}},ra=ta,aa=Object(T["a"])(ra,Jr,Qr,!1,null,null,null),na=aa.exports,sa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("row-loader",{staticClass:"mb-3",attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.SENSORS_LOAD]}}),e.sharedState.sensors?r("div",[r("div",{staticClass:"row mb-3"},[r("div",{staticClass:"col-md-3 col-sm-12"},[r("div",{staticClass:"d-flex"},[r("multiselect",{attrs:{id:"selectedDepartment",options:e.departmentList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","track-by":"id",placeholder:"Select department",loading:e.isDepartmentsLoading,disabled:e.isDepartmentsLoading},on:{input:e.onDepartmentChange},model:{value:e.privateState.selectedDepartment,callback:function(t){e.$set(e.privateState,"selectedDepartment",t)},expression:"privateState.selectedDepartment"}})],1)])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col"},[r("pagination-wrapper",{attrs:{paginationResult:e.sharedState.sensors,loadItemsF:e.loadSensors}},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},e._l(e.sharedState.sensors.data,(function(t){return r("div",{key:t.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("router-link",{attrs:{to:{name:"sensor-telemetry",params:{sensorId:t.id}}}},[e._v(e._s(t.name))])],1),r("div",{},[t.isOnline?r("span",{staticClass:"badge badge-success align-self-start ml-1"},[e._v("Online")]):e._e(),t.isOnline?e._e():r("span",{staticClass:"badge badge-danger align-self-start ml-1"},[e._v("Offline")]),r("router-link",{staticClass:"badge badge-secondary align-self-start ml-1",attrs:{to:{name:"sensor-manage",params:{companyId:e.$store.getters.currentCompanyId,sensorId:t.id}}}},[r("i",{staticClass:"fas fa-cog"})])],1)]),r("div",{staticClass:"card-text small"},[r("div",[e._v("Serial: "+e._s(t.serial))]),r("div",[e._v("Type: "+e._s(t.type))]),r("div",[e._v("Last IP: "+e._s(t.lastIP))])])])])})),0)])],1)])]):e._e()],1)},oa=[];function ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var la={name:"dashboard-sensors",components:{RowLoader:Be,PaginationWrapper:qt},props:{companyId:String},data:function(){return{privateState:{storeTypes:H,selectedDepartment:null}}},computed:ca({},Object(U["b"])({sharedState:function(e){return e},isDepartmentsLoading:function(e){return e.loading[H.COMPANY_DEPARTMENTS_LOAD]},departmentList:function(e){var t=e.companyDepartments[this.companyId]||[];return[{id:null,name:"All departments"}].concat(Object(ar["a"])(t))}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.companyId&&this.$store.dispatch(H.COMPANY_DEPARTMENTS_LOAD,{companyId:this.companyId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.loadSensors();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadSensors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offset,r=void 0===t?0:t,a=e.limit,n=void 0===a?100:a;this.companyId&&this.$store.dispatch(H.SENSORS_LOAD,{companyId:this.companyId,departmentId:(this.privateState.selectedDepartment||{}).id||null,offset:r,limit:n}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onDepartmentChange:function(e){this.loadSensors()}}},ua=la,da=Object(T["a"])(ua,sa,oa,!1,null,null,null),pa=da.exports,ma=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("row-loader",{staticClass:"mb-3",attrs:{visible:e.isLoading}}),e.departments?r("div",[r("div",{staticClass:"mb-3"},[e.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],e.$store.getters.currentCompanyId)?r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:e.onCreateDepartment}},[r("i",{staticClass:"fas fa-building"}),e._m(0)]):e._e()]),r("div",{class:{"block-disabled":e.isLoading}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},e._l(e.departments,(function(t){return r("div",{key:t.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[e.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],e.$store.getters.currentCompanyId)?r("router-link",{attrs:{to:{name:"company-department",params:{companyId:e.companyId,departmentId:t.id}}}},[e._v(e._s(t.name))]):e._e(),e.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],e.$store.getters.currentCompanyId)?e._e():r("span",[e._v(e._s(t.name))])],1),r("div",{staticClass:"ml-2"},[e.$store.getters.isUserHasPermissions(["CompanyDepartmentManage"],e.$store.getters.currentCompanyId)?r("span",{staticClass:"text-secondary cursor-pointer",on:{click:function(r){return e.deleteDepartment(t.id)}}},[r("i",{staticClass:"fas fa-times"})]):e._e()])]),r("div",{staticClass:"card-text small"})])])})),0)])])]),r("modal",{attrs:{name:"create-department",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[e._v("Create department")]),r("div",{staticClass:"app-modal-close",on:{click:function(t){return e.$modal.hide("create-department")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.createDepartment()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"departmentModel__name"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.departmentModel.name,expression:"privateState.departmentModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"departmentModel__name",placeholder:"Name"},domProps:{value:e.privateState.departmentModel.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.departmentModel,"name",t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:""}},[e._v("Department name must be unique across the company.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[e._v("Manager user")]),r("company-user-select",{attrs:{companyId:this.companyId,departmentId:null},model:{value:e.privateState.departmentModel.managerId,callback:function(t){e.$set(e.privateState.departmentModel,"managerId",t)},expression:"privateState.departmentModel.managerId"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_DEPARTMENT_CREATE]}},[e._v("Create")])],1)])])])],1):e._e()],1)},fa=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("small",[r("i",{staticClass:"fas fa-plus"})])}],va=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("multiselect",{attrs:{options:e.companyUserList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":e.userLabel,"track-by":"id",placeholder:"Select user",loading:e.isLoading,disabled:!1},on:{input:e.onInput,"search-change":e.onSearchChange},model:{value:e.privateState.selectedUserOption,callback:function(t){e.$set(e.privateState,"selectedUserOption",t)},expression:"privateState.selectedUserOption"}})},ha=[];function ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ya={name:"company-user-select",props:{value:{required:!0,default:null},companyId:{type:String,required:!0,default:null},departmentId:{type:String,required:!1,default:null},excludedDepartmentIds:{type:Array,required:!1,default:function(){return[]}}},components:{},data:function(){return{privateState:{storeTypes:H,selectedUserOption:null}}},computed:ga({},Object(U["b"])({sharedState:function(e){return e},isLoading:function(e){return e.loading[H.COMPANY_USERS_LOAD]},companyUserList:function(e){return(e.companyUsers[this.companyId]||{}).data||[]}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,t.$store.subscribe((function(e,r){var a=e.type;e.payload;if(a===H.COMPANY_USER_SET&&!t.privateState.selectedUserOption&&t.value){var n=r.companyUser[t.companyId][t.value];n&&(t.privateState.selectedUserOption=n)}})),t.value&&t.$store.dispatch(H.COMPANY_USER_LOAD,{companyId:t.companyId,userId:t.value}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),t.companyId&&t.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:t.companyId,offset:0,limit:20,search:null,excludedDepartmentIds:t.excludedDepartmentIds}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{userLabel:function(e){return"".concat(e.name||"No name"," (").concat(e.email,")")},onInput:function(e,t){this.$emit("input",e.id)},onSearchChange:function(e,t){this.loadCompanyUsers({search:e})},loadCompanyUsers:G.a.debounce((function(e){var t=e.search,r=void 0===t?null:t;this.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:this.companyId,offset:0,limit:20,search:r,excludedDepartmentIds:this.excludedDepartmentIds}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}),1500)}},_a=ya,Sa=Object(T["a"])(_a,va,ha,!1,null,"6ff7d29c",null),Oa=Sa.exports;function Ea(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ca(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ea(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ia={name:null,managerId:null},wa={name:"dashboard-departments",components:{RowLoader:Be,LoadingButton:et,CompanyUserSelect:Oa},props:{companyId:String},data:function(){return{privateState:{storeTypes:H,departmentModel:Ca({},Ia)}}},computed:Ca({},Object(U["b"])({sharedState:function(e){return e},isLoading:function(e){return e.loading[H.COMPANY_DEPARTMENTS_LOAD]||e.loading[H.COMPANY_DEPARTMENT_CREATE]||e.loading[H.COMPANY_DEPARTMENT_UPDATE]||e.loading[H.COMPANY_DEPARTMENT_DELETE]},departments:function(e){return e.userInfo&&e.userInfo.currentCompany&&e.companyDepartments[e.userInfo.currentCompany.id]||null}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadData:function(){this.companyId&&this.$store.dispatch(H.COMPANY_DEPARTMENTS_LOAD,{companyId:this.companyId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onCreateDepartment:function(){this.$modal.show("create-department")},createDepartment:function(){var e=this;this.$store.dispatch(H.COMPANY_DEPARTMENT_CREATE,{companyId:this.companyId,data:{name:this.privateState.departmentModel.name,managerId:this.privateState.departmentModel.managerId}}).then((function(){e.$notify({group:"app",type:"success",title:"Department '".concat(e.privateState.departmentModel.name,"' has been created!"),text:"",duration:5e3}),e.$modal.hide("create-department"),e.privateState.departmentModel=Ca({},Ia)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteDepartment:function(e){var t=this;window.confirm("Delete department?")&&this.$store.dispatch(H.COMPANY_DEPARTMENT_DELETE,{companyId:this.companyId,departmentId:e}).then((function(){t.$notify({group:"app",type:"information",title:"Department has been deleted!",text:"",duration:5e3})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},Ta=wa,ja=Object(T["a"])(Ta,ma,fa,!1,null,null,null),Da=ja.exports,Aa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("row-loader",{attrs:{visible:e.isLoading}}),e.companyUsers?r("div",[r("div",{staticClass:"mb-3"},[e.$store.getters.isUserHasPermissions(["CompanyUserInvite"],e.$store.getters.currentCompanyId)?r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(t){return e.onInviteUserShowClick(t)}}},[r("i",{staticClass:"fas fa-user-plus"})]):e._e()]),r("div",{class:{"block-disabled":e.isLoading}},[r("pagination-wrapper",{attrs:{paginationResult:e.companyUsers,loadItemsF:e.loadData}},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},e._l(e.companyUsers.data,(function(t){return r("div",{key:t.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("router-link",{attrs:{to:{name:"company-user-profile",params:{companyId:e.companyId,userId:t.id}}}},[e._v(" "+e._s(t.name)+" ")])],1),r("div",{staticClass:"ml-2"},[t.id===e.$store.getters.userId?r("small",{staticClass:"badge badge-info mr-1"},[e._v("(You)")]):e._e(),t.id!==e.$store.getters.userId&&e.$store.getters.isUserHasPermissions(["CompanyUserManage"],e.$store.getters.currentCompanyId)?r("span",{staticClass:"text-secondary cursor-pointer",on:{click:function(r){return e.deleteUserFromCompany(t.id)}}},[r("i",{staticClass:"fas fa-times"})]):e._e()])]),r("div",{staticClass:"card-text small"},[r("div",[e._v("Email: "+e._s(t.email))]),r("div",[e._v("Phone Number: "+e._s(t.phoneNumber))])])])])})),0)]),r("modal",{attrs:{name:"invite-company-user",height:"auto",width:"400px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[e._v("Invite user to the company")]),r("div",{staticClass:"app-modal-close",on:{click:function(t){return e.$modal.hide("invite-company-user")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.onInviteUser(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputEmail"}},[e._v("Email address")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.invitationModel.email,expression:"privateState.invitationModel.email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail","aria-describedby":"emailHelp",placeholder:"Enter email",autocomplete:"username"},domProps:{value:e.privateState.invitationModel.email},on:{input:function(t){t.target.composing||e.$set(e.privateState.invitationModel,"email",t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[e._v("Invitation email will be sent to specified address.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[e._v("Initial permissions")]),r("multiselect",{attrs:{options:e.permissionList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":e.permissionLabel,"track-by":"permission",placeholder:"Select permissions",loading:e.isPermissionsLoading,disabled:e.isPermissionsLoading},model:{value:e.privateState.invitationModel.permissions,callback:function(t){e.$set(e.privateState.invitationModel,"permissions",t)},expression:"privateState.invitationModel.permissions"}})],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[e._v("Initial roles")]),r("multiselect",{attrs:{options:e.roleList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":e.roleLabel,"track-by":"role",placeholder:"Select roles",loading:e.isPermissionsLoading,disabled:e.isPermissionsLoading},model:{value:e.privateState.invitationModel.roles,callback:function(t){e.$set(e.privateState.invitationModel,"roles",t)},expression:"privateState.invitationModel.roles"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_USER_INVITE]}},[e._v("Invite")])],1)])])])],1)]):e._e()],1)},Ra=[];function Pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ma(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Na={email:"",permissions:[],roles:[]},Ua={name:"dashboard-users",components:{RowLoader:Be,LoadingButton:et,PaginationWrapper:qt},props:{companyId:String},data:function(){return{privateState:{storeTypes:H,invitationModel:Ma({},Na)}}},computed:Ma({},Object(U["b"])({sharedState:function(e){return e},isLoading:function(e){return e.loading[H.COMPANY_USERS_LOAD]||e.loading[H.COMPANY_USER_DELETE]},companyUsers:function(e){return e.companyUsers[this.companyId]||null},isPermissionsLoading:function(e){return e.loading[H.AUTH_SCOPED_PERMISSIONS_LOAD]},permissionList:function(e){return e.auth.scopedPermissions.permissions||[]},roleList:function(e){return e.auth.scopedPermissions.roles||[]}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{permissionLabel:function(e){return"".concat(e.groupName," - ").concat(e.name)},roleLabel:function(e){return"".concat(e.name)},loadData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offset,r=void 0===t?0:t,a=e.limit,n=void 0===a?100:a;return this.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:this.companyId,offset:r,limit:n}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onInviteUserShowClick:function(e){0===this.permissionList.length&&this.$store.dispatch(H.AUTH_SCOPED_PERMISSIONS_LOAD,{scopeId:this.$store.getters.currentCompanyId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.$modal.show("invite-company-user")},onInviteUser:function(e){var t=this;this.$store.dispatch(H.COMPANY_USER_INVITE,{companyId:this.companyId,email:this.privateState.invitationModel.email,permissions:this.privateState.invitationModel.permissions.map((function(e){return e.permission})),roles:this.privateState.invitationModel.roles.map((function(e){return e.role}))}).then((function(){t.$notify({group:"app",type:"success",title:"Invite has been sent to ".concat(t.privateState.invitationModel.email,"!"),text:"",duration:5e3}),t.$modal.hide("invite-company-user"),t.privateState.invitationModel=Ma({},Na)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteUserFromCompany:function(e){var t=this;window.confirm("Delete user from company?")&&this.$store.dispatch(H.COMPANY_USER_DELETE,{companyId:this.companyId,userId:e}).then((function(){t.loadData()})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},xa=Ua,ka=Object(T["a"])(xa,Aa,Ra,!1,null,null,null),La=ka.exports,$a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.AUTH_MY_PERMISSIONS_LOAD]}}),e.myPermissions?r("div",[e.$store.getters.isUserHasPermissions(["ScopedPermissionManage"],this.$store.getters.currentCompanyId)?r("div",{staticClass:"mb-3"},[r("router-link",{attrs:{to:{name:"manage-company-permissions",params:{companyId:this.$store.getters.currentCompanyId}}}},[e._v("Manage company permissions")])],1):e._e(),r("div",[r("h5",{staticClass:"mb-3"},[e._v("My permissions")]),r("div",[e.myPermissions.global?r("div",{staticClass:"mb-3"},[r("div",[r("user-scoped-permissions",{attrs:{userId:e.$store.getters.userId,userPermissions:e.myPermissions.global}})],1)]):e._e(),e.myPermissions.scoped?r("div",{staticClass:"mb-1"},e._l(e.myPermissions.scoped,(function(t){return r("div",{key:t.scopeId},[r("div",[r("user-scoped-permissions",{attrs:{userId:e.$store.getters.userId,userPermissions:t}})],1)])})),0):e._e()])])]):e._e()],1)])])},Fa=[],Ya=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-scoped-permissions-wrapper"},[e.userPermissions?r("div",[r("div",[r("div",{staticClass:"mb-1"},[r("h6",[r("strong",[e._v(e._s(e.userPermissions.scopeName)+":")]),"global"===e.userPermissions.scopeId&&e.$store.getters.isUserHasPermissions(["GlobalPermissionManage"],e.userPermissions.scopeId)?r("small",{staticClass:"mb-3"}):e._e(),"global"!==e.userPermissions.scopeId&&e.$store.getters.isUserHasPermissions(["ScopedPermissionManage"],e.userPermissions.scopeId)?r("small",{staticClass:"mb-3"},[e._v(" ("),r("router-link",{attrs:{to:{name:"manage-company-user-permissions",params:{companyId:e.userPermissions.scopeId,userId:e.userId}}}},[e._v("Manage")]),e._v(") ")],1):e._e()]),r("div",{staticClass:"list-group mb-1"},[r("li",{staticClass:"list-group-item list-group-item-primary"},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[e._m(0),r("small",[e._v("("+e._s(e.userPermissions.permissions.length)+")")])]),e._l(e.userPermissions.permissions,(function(t){return r("p",{key:"scope-"+e.userPermissions.scopeId+"-"+t.permission,staticClass:"mb-0"},[r("small",[e._v(" "+e._s(t.name)+" / "+e._s(t.description)+" ")])])}))],2)]),r("div",{staticClass:"list-group"},e._l(e.userPermissions.roles,(function(t){return r("li",{key:"global-"+t.name,staticClass:"list-group-item list-group-item-info mb-1"},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("h5",{staticClass:"mb-1"},[e._v("'"+e._s(t.name)+"' role")]),r("small",[e._v("("+e._s(t.permissions.length)+")")])]),e._m(1,!0),e._l(t.permissions,(function(t){return r("p",{key:"global-"+t.permission,staticClass:"mb-0"},[r("small",[e._v(" "+e._s(t.name)+" / "+e._s(t.description)+" ")])])}))],2)})),0)])])]):e._e()])},Va=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"mb-1"},[r("small",[r("strong",[e._v("Permissions:")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",{staticClass:"mb-0"},[r("small",[r("strong",[e._v("Permissions:")])])])}];function Ga(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ha(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ga(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Za={name:"user-scoped-permissions",props:{userId:String,userPermissions:Object},components:{},data:function(){return{privateState:{}}},computed:Ha({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},qa=Za,za=Object(T["a"])(qa,Ya,Va,!1,null,"6f159881",null),Ba=za.exports;function Wa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ka(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ja={name:"my-permissions",components:{RowLoader:Be,UserScopedPermissions:Ba},data:function(){return{privateState:{storeTypes:H}}},computed:Ka({},Object(U["b"])({sharedState:function(e){return e},myPermissions:function(e){return e.auth.myPermissions}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},Qa=Ja,Xa=Object(T["a"])(Qa,$a,Fa,!1,null,null,null),en=Xa.exports,tn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"manage-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.COMPANY_USERS_LOAD]}}),e.companyUsers?r("div",[r("div",{staticClass:"mb-3"},[r("router-link",{attrs:{to:{name:"my-permissions"}}},[e._v("My permissions")])],1),r("div",[r("h5",{staticClass:"mb-3"},[e._v("Manage users' permissions")]),e.companyUsers?r("div",[r("div",{staticClass:"list-group"},e._l(e.companyUsers.data,(function(t){return r("router-link",{key:t.id,staticClass:"list-group-item list-group-item-action",attrs:{to:{name:"manage-company-user-permissions",params:{companyId:e.$store.getters.currentCompanyId,userId:t.id}}}},[r("p",{staticClass:"mb-1"},[e._v(" "+e._s(t.name)+" "),t.id===e.$store.getters.userId?r("small",{staticClass:"badge badge-info"},[e._v("(You)")]):e._e()]),r("p",{staticClass:"mb-0"},[r("small",[e._v(e._s(t.id))])]),r("p",{staticClass:"mb-0"},[r("small",[e._v(e._s(t.email))])])])})),1)]):e._e()])]):e._e()],1)])])},rn=[];function an(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?an(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var sn={name:"manage-permissions",components:{RowLoader:Be},data:function(){return{privateState:{storeTypes:H}}},computed:nn({},Object(U["b"])({sharedState:function(e){return e},companyUsers:function(e){return e.userInfo&&e.userInfo.currentCompany&&e.companyUsers[e.userInfo.currentCompany.id]||null}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.companyUsers||this.$store.dispatch(H.COMPANY_USERS_LOAD,{companyId:this.$store.getters.currentCompanyId,offset:0,limit:500}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{}},on=sn,cn=Object(T["a"])(on,tn,rn,!1,null,null,null),ln=cn.exports,un=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"manage-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"mb-3"},[r("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.$router.go(-1)}}},[r("i",{staticClass:"fas fa-long-arrow-alt-left"}),e._v(" Back")])]),r("div",[e.userPermissions?r("h5",{staticClass:"mb-3"},[e._v("Manage "+e._s(e.userPermissions.name)+" permissions")]):e._e(),r("div",{staticClass:"mb-2"},[e._m(0),r("multiselect",{attrs:{options:e.permissionList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":e.permissionLabel,"track-by":"permission",placeholder:"Select permissions",loading:e.isPermissionsLoading,disabled:e.isPermissionsLoading},on:{input:e.onScopedPermissionsChange},model:{value:e.privateState.selectedPermissions,callback:function(t){e.$set(e.privateState,"selectedPermissions",t)},expression:"privateState.selectedPermissions"}})],1),r("div",{staticClass:"mb-2"},[e._m(1),r("multiselect",{attrs:{options:e.roleList,multiple:!0,searchable:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,"show-labels":!0,"allow-empty":!0,"preselect-first":!1,label:"name","custom-label":e.roleLabel,"track-by":"role",placeholder:"Select roles",loading:e.isPermissionsLoading,disabled:e.isPermissionsLoading},on:{input:e.onScopedRolesChange},model:{value:e.privateState.selectedRoles,callback:function(t){e.$set(e.privateState,"selectedRoles",t)},expression:"privateState.selectedRoles"}})],1)])])])])},dn=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("strong",[e._v("Permissions:")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("strong",[e._v("Roles:")])])}];function pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fn={name:"manage-user-permissions",components:{},props:{companyId:String,userId:String},data:function(){return{privateState:{storeTypes:H,selectedPermissions:[],selectedRoles:[]}}},computed:mn({},Object(U["b"])({sharedState:function(e){return e},isPermissionsLoading:function(e){return e.loading[H.AUTH_SCOPED_PERMISSIONS_LOAD]||e.loading[H.AUTH_USER_SCOPED_PERMISSIONS_LOAD]||e.loading[H.AUTH_USER_SCOPED_PERMISSIONS_UPDATE]},permissionList:function(e){return e.auth.scopedPermissions.permissions||[]},roleList:function(e){return e.auth.scopedPermissions.roles||[]},userPermissions:function(e){return e.auth.userScopedPermissions[this.companyId]&&e.auth.userScopedPermissions[this.companyId][this.userId]?e.auth.userScopedPermissions[this.companyId][this.userId]:null}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadInitialData();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{permissionLabel:function(e){return"".concat(e.groupName," - ").concat(e.name)},roleLabel:function(e){return"".concat(e.name)},loadInitialData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0===this.permissionList.length&&this.$store.dispatch(H.AUTH_SCOPED_PERMISSIONS_LOAD,{scopeId:this.$store.getters.currentCompanyId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.$store.dispatch(H.AUTH_USER_SCOPED_PERMISSIONS_LOAD,{scopeId:this.$store.getters.currentCompanyId,userId:this.userId}).then((function(e){t.privateState.selectedPermissions=e.permissions,t.privateState.selectedRoles=e.roles})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updatePermissions:G.a.debounce((function(e){var t=this,r=e.permissions,a=void 0===r?[]:r,n=e.roles,s=void 0===n?[]:n;this.$store.dispatch(H.AUTH_USER_SCOPED_PERMISSIONS_UPDATE,{scopeId:this.$store.getters.currentCompanyId,userId:this.userId,permissions:a.map((function(e){return e.permission})),roles:s.map((function(e){return e.role}))}).then((function(e){})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e),t.loadInitialData()}))}),1500),onScopedPermissionsChange:function(e){this.updatePermissions({permissions:this.privateState.selectedPermissions,roles:this.privateState.selectedRoles})},onScopedRolesChange:function(e){this.updatePermissions({permissions:this.privateState.selectedPermissions,roles:this.privateState.selectedRoles})}}},vn=fn,hn=Object(T["a"])(vn,un,dn,!1,null,null,null),bn=hn.exports,gn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-profile-wrapper"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.AUTH_USER_ACCOUNT_LOAD]||e.sharedState.loading[e.privateState.storeTypes.USER_INFO_LOAD]}}),e.sharedState.auth.user&&e.sharedState.auth.user.profile?r("div",[r("h5",[e._v("Main info")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateUser(t)}}},[r("div",[r("div",{staticClass:"media"},[r("div",{staticClass:"media-body"},[r("div",[r("div",{staticClass:"form-group"},[e._m(0),r("div",[e._v(e._s(e.sharedState.auth.user.profile.sub))])]),r("div",{staticClass:"form-group"},[e._m(1),r("div",[e._v(e._s(e.sharedState.auth.user.profile.email))])]),r("div",{staticClass:"form-group"},[e._m(2),r("div",[e._v(e._s(e.sharedState.auth.user.profile.given_name))])]),r("div",{staticClass:"form-group"},[e._m(3),r("vue-tel-input",{attrs:{mode:"international",disabledFetchingCountry:!1,disabledFormatting:!1,enabledCountryCode:!0,inputClasses:[],enabledFlags:!0,required:!0},on:{validate:e.onPhoneNumberValidate},model:{value:e.privateState.userAccountModel.phoneNumber,callback:function(t){e.$set(e.privateState.userAccountModel,"phoneNumber",t)},expression:"privateState.userAccountModel.phoneNumber"}})],1),e.isPhoneChanged?r("div",{staticClass:"form-group"},[r("div",[e._m(4),r("loading-button",{staticClass:"btn btn-outline-secondary btn-sm ml-2",attrs:{type:"button",loading:e.sharedState.loading[e.privateState.storeTypes.AUTH_USER_ACCOUNT_PHONE_CHANGE_SMS_TOKEN_SEND]},nativeOn:{click:function(t){return e.sendSmsPhoneNumberChangeToken(t)}}},[e._v("Send confirmation code")])],1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.userAccountModel.phoneNumberConfirmationToken,expression:"privateState.userAccountModel.phoneNumberConfirmationToken"}],staticClass:"form-control",attrs:{id:"userInfoModel__phoneNumberConfirmationToken",type:"text"},domProps:{value:e.privateState.userAccountModel.phoneNumberConfirmationToken},on:{input:function(t){t.target.composing||e.$set(e.privateState.userAccountModel,"phoneNumberConfirmationToken",t.target.value)}}})]):e._e()])])])]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.AUTH_USER_ACCOUNT_UPDATE]}},[e._v("Save")])],1)])])])])])]),r("h5",[e._v("Additional info")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateUserInfo(t)}}},[r("div",{staticClass:"form-group"},[e._m(5),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.userInfoModel.name,expression:"privateState.userInfoModel.name"}],staticClass:"form-control",attrs:{id:"userInfoModel__name",type:"text"},domProps:{value:e.privateState.userInfoModel.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.userInfoModel,"name",t.target.value)}}})]),r("div",{staticClass:"form-group"},[e._m(6),r("multiselect",{attrs:{id:"userInfoModel__language",options:e.languageList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","custom-label":e.languageLabel,"track-by":"code",placeholder:"Select language",loading:e.isLanguagesLoading,disabled:e.isLanguagesLoading},on:{input:e.onLanguageChange},model:{value:e.privateState.userInfoModel.language,callback:function(t){e.$set(e.privateState.userInfoModel,"language",t)},expression:"privateState.userInfoModel.language"}})],1),r("div",{staticClass:"form-group"},[e._m(7),r("multiselect",{attrs:{id:"userInfoModel__country",options:e.countryList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"name","custom-label":e.countryLabel,"track-by":"code",placeholder:"Select country",loading:e.isCountriesLoading,disabled:e.isCountriesLoading},on:{input:e.onCountryChange},model:{value:e.privateState.userInfoModel.country,callback:function(t){e.$set(e.privateState.userInfoModel,"country",t)},expression:"privateState.userInfoModel.country"}})],1),r("div",{staticClass:"form-group"},[e._m(8),r("multiselect",{attrs:{id:"userInfoModel__timeZone",options:e.timeZoneList,multiple:!1,searchable:!0,"close-on-select":!0,"clear-on-select":!0,"preserve-search":!0,"show-labels":!0,"allow-empty":!1,"preselect-first":!1,label:"timeZoneId","custom-label":e.timeZoneLabel,"track-by":"timeZoneId",placeholder:"Select timezone",loading:e.isTimeZonesLoading,disabled:e.isTimeZonesLoading},on:{input:e.onTimeZoneChange},model:{value:e.privateState.userInfoModel.timeZone,callback:function(t){e.$set(e.privateState.userInfoModel,"timeZone",t)},expression:"privateState.userInfoModel.timeZone"}}),e._m(9)],1),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.USER_INFO_UPDATE]}},[e._v("Save")])],1)])])])])])]),r("h5",[e._v("Notifications")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateNotifications(t)}}},[r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.notificationsModel.isAlarmEnabled,expression:"privateState.notificationsModel.isAlarmEnabled"}],staticClass:"form-check-input",attrs:{id:"isAlarmEnabled",type:"checkbox"},domProps:{checked:Array.isArray(e.privateState.notificationsModel.isAlarmEnabled)?e._i(e.privateState.notificationsModel.isAlarmEnabled,null)>-1:e.privateState.notificationsModel.isAlarmEnabled},on:{change:function(t){var r=e.privateState.notificationsModel.isAlarmEnabled,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.notificationsModel,"isAlarmEnabled",r.concat([s])):o>-1&&e.$set(e.privateState.notificationsModel,"isAlarmEnabled",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.notificationsModel,"isAlarmEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"isAlarmEnabled"}},[e._v("Alarm enabled")])]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.notificationsModel.isAlarmSoundEnabled,expression:"privateState.notificationsModel.isAlarmSoundEnabled"}],staticClass:"form-check-input",attrs:{id:"isAlarmSoundEnabled",type:"checkbox"},domProps:{checked:Array.isArray(e.privateState.notificationsModel.isAlarmSoundEnabled)?e._i(e.privateState.notificationsModel.isAlarmSoundEnabled,null)>-1:e.privateState.notificationsModel.isAlarmSoundEnabled},on:{change:function(t){var r=e.privateState.notificationsModel.isAlarmSoundEnabled,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.notificationsModel,"isAlarmSoundEnabled",r.concat([s])):o>-1&&e.$set(e.privateState.notificationsModel,"isAlarmSoundEnabled",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.notificationsModel,"isAlarmSoundEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"isAlarmSoundEnabled"}},[e._v("Alarm sound")])]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.notificationsModel.isDoNotDisturbEnabled,expression:"privateState.notificationsModel.isDoNotDisturbEnabled"}],staticClass:"form-check-input",attrs:{id:"isDoNotDisturbEnabled",type:"checkbox"},domProps:{checked:Array.isArray(e.privateState.notificationsModel.isDoNotDisturbEnabled)?e._i(e.privateState.notificationsModel.isDoNotDisturbEnabled,null)>-1:e.privateState.notificationsModel.isDoNotDisturbEnabled},on:{change:function(t){var r=e.privateState.notificationsModel.isDoNotDisturbEnabled,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.notificationsModel,"isDoNotDisturbEnabled",r.concat([s])):o>-1&&e.$set(e.privateState.notificationsModel,"isDoNotDisturbEnabled",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.notificationsModel,"isDoNotDisturbEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"isDoNotDisturbEnabled"}},[e._v("Do not disturb")])]),e.privateState.notificationsModel.isDoNotDisturbEnabled?r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"doNotDisturbFrom"}},[e._v("From")]),r("time-input",{model:{value:e.privateState.notificationsModel.doNotDisturbFrom,callback:function(t){e.$set(e.privateState.notificationsModel,"doNotDisturbFrom",t)},expression:"privateState.notificationsModel.doNotDisturbFrom"}})],1)]),r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"doNotDisturbTo"}},[e._v("To")]),r("time-input",{model:{value:e.privateState.notificationsModel.doNotDisturbTo,callback:function(t){e.$set(e.privateState.notificationsModel,"doNotDisturbTo",t)},expression:"privateState.notificationsModel.doNotDisturbTo"}})],1)])])]):e._e(),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.USER_INFO_NOTIFICATIONS_UPDATE]}},[e._v("Save")])],1)])])])])])]),r("h5",[e._v("Security")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-gray"},[r("div",{staticClass:"d-flex w-100 justify-content-start align-items-center"},[r("div",{staticClass:"w-100"},[e._m(10),r("hr"),r("form",{on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPassword"}},[e._v("Old password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.passwordChangeModel.passwordOld,expression:"privateState.passwordChangeModel.passwordOld"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Old password",autocomplete:"new-password"},domProps:{value:e.privateState.passwordChangeModel.passwordOld},on:{input:function(t){t.target.composing||e.$set(e.privateState.passwordChangeModel,"passwordOld",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPassword"}},[e._v("New password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.passwordChangeModel.passwordNew,expression:"privateState.passwordChangeModel.passwordNew"}],staticClass:"form-control",attrs:{type:"password",placeholder:"New password",autocomplete:"new-password"},domProps:{value:e.privateState.passwordChangeModel.passwordNew},on:{input:function(t){t.target.composing||e.$set(e.privateState.passwordChangeModel,"passwordNew",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputPasswordConfirm"}},[e._v("Confirm new password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.passwordChangeModel.passwordNewConfirm,expression:"privateState.passwordChangeModel.passwordNewConfirm"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Confirm new password",autocomplete:"new-password"},domProps:{value:e.privateState.passwordChangeModel.passwordNewConfirm},on:{input:function(t){t.target.composing||e.$set(e.privateState.passwordChangeModel,"passwordNewConfirm",t.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.AUTH_USER_PASSWORD_CHANGE]}},[e._v("Change password")])],1)])])])])])]),r("h5",[e._v("Danger Zone")]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-5"},[r("div",{staticClass:"list-group"},[r("li",{staticClass:"list-group-item border-danger"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center"},[e._m(11),r("loading-button",{staticClass:"btn-danger",attrs:{type:"button",loading:e.sharedState.loading[e.privateState.storeTypes.AUTH_USER_ACCOUNT_DELETE]},nativeOn:{click:function(t){return e.deleteAccount()}}},[e._v("Delete")])],1)])])])])]):e._e()],1)},yn=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:""}},[r("strong",[e._v("#id")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:""}},[r("strong",[e._v("Email")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:""}},[r("strong",[e._v("Given name (username)")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"userInfoModel__phone"}},[r("strong",[e._v("Phone")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"userInfoModel__phoneNumberConfirmationToken"}},[r("strong",[e._v("Phone confirmation")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"userInfoModel__name"}},[r("strong",[e._v("Name")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"userInfoModel__language"}},[r("strong",[e._v("Language")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"userInfoModel__country"}},[r("strong",[e._v("Country")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"userInfoModel__timeZone"}},[r("strong",[e._v("Timezone")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("small",[e._v("UTC is used by default if timezone isn't set.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("strong",[e._v("Change password")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-danger"},[r("div",[r("strong",[e._v("Delete account")])]),r("div",[r("small",[e._v("You account and all related data will be deleted!")])]),r("div",[r("small",[e._v("NB: This action is irreversible!")])])])}],_n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("datetime",{attrs:{type:"time",placeholder:"To","input-class":"form-control app-datetime-input","value-zone":"UTC",zone:"local",format:"HH:mm"},on:{input:e.onChange},model:{value:e.privateState.selectedDateTime,callback:function(t){e.$set(e.privateState,"selectedDateTime",t)},expression:"privateState.selectedDateTime"}})},Sn=[],On=(r("1276"),r("c1df")),En=r.n(On);function Cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wn={name:"time-input",props:{value:{type:String,required:!0,default:null}},components:{},data:function(){return{privateState:{storeTypes:H,selectedDateTime:null}}},computed:In({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){if(this.value){var e=this.value.split(":"),t=parseInt(e[0]),r=parseInt(e[1]),a=parseInt(e[2]);this.privateState.selectedDateTime=En()().set("hour",t).set("minute",r).set("second",a).format(),console.log(e,this.privateState.selectedDateTime)}},mounted:function(){},updated:function(){},destroyed:function(){},methods:{onChange:function(e,t){var r=e,a=En()(r).format("HH:mm");this.$emit("input",a)}}},Tn=wn,jn=Object(T["a"])(Tn,_n,Sn,!1,null,"60eaab36",null),Dn=jn.exports;function An(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Rn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?An(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):An(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pn,Mn,Nn={phoneNumber:null,phoneNumberConfirmationToken:null},Un={name:null,language:null,country:null,timeZone:null},xn={isAlarmEnabled:!1,isAlarmSoundEnabled:!1,isDoNotDisturbEnabled:!1,doNotDisturbFrom:null,doNotDisturbTo:null},kn={passwordOld:"",passwordNew:"",passwordNewConfirm:""},Ln={name:"user-profile",components:{RowLoader:Be,LoadingButton:et,TimeInput:Dn},props:{},data:function(){return{privateState:{storeTypes:H,userAccountModel:Rn({},Nn),userInfoModel:Rn({},Un),notificationsModel:Rn({},xn),passwordChangeModel:Rn({},kn)}}},computed:Rn({},Object(U["b"])({sharedState:function(e){return e},isLanguagesLoading:function(e){return e.loading[H.LANGUAGES_LOAD]},isCountriesLoading:function(e){return e.loading[H.COUNTRIES_LOAD]},isTimeZonesLoading:function(e){return e.loading[H.TIMEZONES_LOAD]},languageList:function(e){return e.languages||[]},countryList:function(e){return e.countries||[]},timeZoneList:function(e){return e.timeZones||[]}}),{isPhoneChanged:function(){return this.privateState.userAccountModel.phoneNumber!==((this.sharedState.userAccount||{}).phoneNumber||null)}}),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.sharedState.userAccount||this.$store.dispatch(H.AUTH_USER_ACCOUNT_LOAD,{}),this.sharedState.userInfo||this.$store.dispatch(H.USER_INFO_LOAD,{}),this.sharedState.countries||this.$store.dispatch(H.COUNTRIES_LOAD,{}),this.sharedState.languages||this.$store.dispatch(H.LANGUAGES_LOAD,{}),this.sharedState.timeZones||this.$store.dispatch(H.TIMEZONES_LOAD,{}),this.privateState.userAccountModel=Rn({},Nn,{},this.sharedState.userAccount||{}),this.privateState.userInfoModel=Rn({},Un,{},this.sharedState.userInfo||{}),this.privateState.notificationsModel=Rn({},xn,{},(this.sharedState.userInfo||{}).notificationSettings||{}),this.$store.subscribe((function(e,r){var a=e.type;e.payload;a===H.AUTH_USER_ACCOUNT_SET&&(t.privateState.userAccountModel=Rn({},t.privateState.userAccountModel,{},r.userAccount)),a===H.USER_INFO_SET&&(t.privateState.userInfoModel=Rn({},t.privateState.userInfoModel,{},r.userInfo),t.privateState.notificationsModel=Rn({},t.privateState.notificationsModel,{},r.userInfo.notificationSettings))}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{onPhoneNumberValidate:function(e){var t=e.number,r=(e.isValid,e.country);t.e164,t.input,t.international,t.national,t.rfc3966,t.significant,r.areaCodes,r.dialCode,r.iso2,r.name,r.priority},languageLabel:function(e){return"".concat(e.name," / ").concat(e.nativeName)},countryLabel:function(e){return"".concat(e.name," (").concat(e.code,")")},timeZoneLabel:function(e){return"".concat(e.timeZoneId," (").concat(e.countryName," / ").concat(e.countryCode," ").concat(e.comment?"/ ".concat(e.comment):"",")")},onLanguageChange:function(e){},onCountryChange:function(e){},onTimeZoneChange:function(e){},sendSmsPhoneNumberChangeToken:function(){this.$store.dispatch(H.AUTH_USER_ACCOUNT_PHONE_CHANGE_SMS_TOKEN_SEND,{phoneNumber:this.privateState.userAccountModel.phoneNumber}).then((function(){})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},updateUser:function(){var e=this;this.$store.dispatch(H.AUTH_USER_ACCOUNT_UPDATE,{data:{phoneNumber:this.privateState.userAccountModel.phoneNumber,phoneNumberConfirmationToken:this.privateState.userAccountModel.phoneNumberConfirmationToken}}).then((function(){e.privateState.userAccountModel.phoneNumberConfirmationToken=null,ho.refreshTokens({withFullscreenLoader:!1})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},updateUserInfo:function(){this.$store.dispatch(H.USER_INFO_UPDATE,{data:{name:this.privateState.userInfoModel.name,language:this.privateState.userInfoModel.language,country:this.privateState.userInfoModel.country,timeZone:this.privateState.userInfoModel.timeZone}}).then((function(){ho.refreshTokens({withFullscreenLoader:!1})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},updateNotifications:function(){this.$store.dispatch(H.USER_INFO_NOTIFICATIONS_UPDATE,{data:Rn({},this.privateState.notificationsModel)}).then((function(){ho.refreshTokens({withFullscreenLoader:!1})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},changePassword:function(){var e=this;this.$store.dispatch(H.AUTH_USER_PASSWORD_CHANGE,Rn({},this.privateState.passwordChangeModel)).then((function(){e.$notify({group:"app-important",type:"success",title:"You account password has been changed.",text:""}),e.privateState.passwordChangeModel=Rn({},kn),ho.refreshTokens({withFullscreenLoader:!1})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteAccount:function(){var e=this;Ar.handleUserConfirmationFlow({actionF:function(t){var r=t.userConfirmation;return e.$store.dispatch(H.AUTH_USER_ACCOUNT_DELETE,{userConfirmation:r})}}).then((function(t){var r=t.isProcessed;r&&ho.logoutWithoutRedirect().then((function(){e.$router.push({name:"home"})})).catch((function(e){console.error(e),window.alert("Something went wrong. Try to refresh the page.")}))})).catch((function(e){console.error(e)}))}}},$n=Ln,Fn=Object(T["a"])($n,gn,yn,!1,null,null,null),Yn=Fn.exports,Vn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"sensorTelemetry"}},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.SENSOR_TELEMETRY_LOAD]}}),e.sharedState.sensorTelemetries?r("div",{class:{"block-disabled":e.sharedState.loading[e.privateState.storeTypes.SENSOR_TELEMETRY_LOAD]}},[r("div",{staticClass:"mb-5"},[r("div",{staticClass:"row justify-content-between"},[r("div",{staticClass:"col-3"},[r("div",{staticClass:"d-flex"},[r("div",[r("datetime",{attrs:{type:"date",placeholder:"Date from","input-class":"form-control app-datetime-input","value-zone":"UTC",zone:"local",format:"yyyy-MM-dd"},on:{input:e.onDateFromChange},model:{value:e.privateState.dateFrom,callback:function(t){e.$set(e.privateState,"dateFrom",t)},expression:"privateState.dateFrom"}})],1),r("div",{staticClass:"ml-1"},[r("datetime",{attrs:{type:"date",placeholder:"Date to","input-class":"form-control app-datetime-input","value-zone":"UTC",zone:"local",format:"yyyy-MM-dd"},on:{input:e.onDateToChange},model:{value:e.privateState.dateTo,callback:function(t){e.$set(e.privateState,"dateTo",t)},expression:"privateState.dateTo"}})],1)])]),r("div",{staticClass:"col-3 no-print"},[r("div",{staticClass:"d-flex justify-content-end"},[r("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:e.exportPDF}},[r("i",{staticClass:"fas fa-file-pdf mr-1"}),e._v("Export PDF")]),r("button",{staticClass:"btn btn-sm btn-outline-secondary ml-1",attrs:{type:"button"},on:{click:e.exportCSV}},[r("i",{staticClass:"fas fa-file-csv mr-1"}),e._v("Export CSV")]),r("loading-button",{staticClass:"btn btn-sm btn-outline-secondary ml-1",attrs:{type:"button",loading:e.privateState.isExportPrintLoading},nativeOn:{click:function(t){return e.exportPrint(t)}}},[r("i",{staticClass:"fas fa-print mr-1"}),e._v("Print ")])],1)])]),r("sensor-telementry-chart",{attrs:{chartData:e.telemetryChartData,options:{responsive:!0,maintainAspectRatio:!1}}})],1),r("table",{staticClass:"table table-sm table-hover"},[e._m(0),r("tbody",e._l(e.sharedState.sensorTelemetries.data,(function(t){return r("tr",{key:t.id,class:{"table-success":!t.isLimitExceeded,"table-danger":t.isLimitExceeded}},[r("th",{attrs:{scope:"row"}},[e._v(e._s(t.id))]),r("td",[e._v(e._s(t.isLimitExceeded))]),r("td",[e._v(e._s(t.createdAt))]),r("td",[e._v(e._s(t.channel))]),r("td",[e._v(e._s(t.value))]),r("td",[e._v(e._s(t.metric))]),r("td",[e._v(e._s(t.isforced))]),r("td",[e._v(e._s(t.comment))])])})),0)])]):e._e()],1)},Gn=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",{staticClass:"thead-dark"},[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("#")]),r("th",{attrs:{scope:"col"}},[e._v("IsLimitExceeded")]),r("th",{attrs:{scope:"col"}},[e._v("CreatedAt")]),r("th",{attrs:{scope:"col"}},[e._v("Channel")]),r("th",{attrs:{scope:"col"}},[e._v("Value")]),r("th",{attrs:{scope:"col"}},[e._v("Metric")]),r("th",{attrs:{scope:"col"}},[e._v("Isforced")]),r("th",{attrs:{scope:"col"}},[e._v("Comment")])])])}],Hn=(r("b680"),r("add5"),r("1fca")),Zn=Hn["b"].reactiveProp,qn={extends:Hn["a"],mixins:[Zn],props:{chartData:{type:Object,default:null},options:{type:Object,default:null}},data:function(){return{}},mounted:function(){this.renderChart(this.chartData,this.options)}},zn=qn,Bn=Object(T["a"])(zn,Pn,Mn,!1,null,null,null),Wn=Bn.exports;function Kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Jn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Qn=En()().utcOffset(0).subtract(1,"days").startOf("day").format(),Xn=En()().utcOffset(0).endOf("day").format(),es={name:"sensor-telemetry",components:{RowLoader:Be,LoadingButton:et,"sensor-telementry-chart":Wn},data:function(){return{privateState:{storeTypes:H,dateFrom:Qn,dateTo:Xn,isExportPrintLoading:!1}}},computed:Jn({},Object(U["b"])({sharedState:function(e){return e}}),{telemetryChartData:function(){var e=this,t=this.sharedState.sensorTelemetries.data.map((function(t){return Ft.formatAccordingToInterval(Ft.formatInUserTimeZone(t.createdAt),e.privateState.dateFrom,e.privateState.dateTo)}));return{labels:Object(ar["a"])(t),datasets:[{label:"Temperature (Celsius)",backgroundColor:"#13B1E8",borderColor:"#13B1E8",data:this.sharedState.sensorTelemetries.data.map((function(e){return parseFloat(e.value.toFixed(2))})),fill:!1}]}}}),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){this.$store.commit(H.SENSOR_TELEMETRY_SET,{sensorTelemetries:null})},methods:{loadData:function(){this.$store.dispatch(H.SENSOR_TELEMETRY_LOAD,{companyId:this.$store.getters.currentCompanyId,sensorId:this.$route.params.sensorId,offset:0,limit:1e3,dateFrom:this.privateState.dateFrom,dateTo:this.privateState.dateTo}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onDateFromChange:function(e){this.loadData()},onDateToChange:function(e){this.loadData()},exportPDF:function(){alert("Will be available soon.")},exportCSV:function(){alert("Will be available soon.")},exportPrint:function(){var e=this;this.privateState.isExportPrintLoading=!0,setTimeout((function(){var t="",r=["css/print.css"];printJS({printable:"sensorTelemetry",type:"html",header:null,maxWidth:800,css:r,style:t,scanStyles:!0,targetStyles:["*"],onLoadingStart:function(){e.privateState.isExportPrintLoading=!0},onLoadingEnd:function(){e.privateState.isExportPrintLoading=!1}})}),10)}}},ts=es,rs=Object(T["a"])(ts,Vn,Gn,!1,null,null,null),as=rs.exports,ns=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-profile-wrapper company-user-profile-wrapper"},[r("row-loader",{staticClass:"mb-3",attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.SENSOR_LOAD]}}),r("div",[r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12 col-md-5"},[r("h5",{staticClass:"mt-0"},[e._v("Sensor")]),e.sensor?r("div",{class:{"block-disabled":e.sharedState.loading[e.privateState.storeTypes.SENSOR_LOAD]}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateSensor(t)}}},[r("div",[r("div",{staticClass:"form-group"},[e._m(0),r("div",[e._v(e._s(e.sensor.id))])]),r("div",{staticClass:"form-group"},[e._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.sensorModel.name,expression:"privateState.sensorModel.name"}],staticClass:"form-control",attrs:{id:"sensorModel__name",type:"text"},domProps:{value:e.privateState.sensorModel.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.sensorModel,"name",t.target.value)}}})]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.sensorModel.isIgnoranceIntervalEnabled,expression:"privateState.sensorModel.isIgnoranceIntervalEnabled"}],staticClass:"form-check-input",attrs:{id:"sensorModel__isIgnoranceIntervalEnabled",type:"checkbox"},domProps:{checked:Array.isArray(e.privateState.sensorModel.isIgnoranceIntervalEnabled)?e._i(e.privateState.sensorModel.isIgnoranceIntervalEnabled,null)>-1:e.privateState.sensorModel.isIgnoranceIntervalEnabled},on:{change:function(t){var r=e.privateState.sensorModel.isIgnoranceIntervalEnabled,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.sensorModel,"isIgnoranceIntervalEnabled",r.concat([s])):o>-1&&e.$set(e.privateState.sensorModel,"isIgnoranceIntervalEnabled",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.sensorModel,"isIgnoranceIntervalEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"sensorModel__isIgnoranceIntervalEnabled"}},[e._v("Enable ignorance interval")]),e._m(2)]),e.privateState.sensorModel.isIgnoranceIntervalEnabled?r("div",{staticClass:"form-group"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[e._m(3),r("time-input",{model:{value:e.privateState.sensorModel.ignoranceIntervalFrom,callback:function(t){e.$set(e.privateState.sensorModel,"ignoranceIntervalFrom",t)},expression:"privateState.sensorModel.ignoranceIntervalFrom"}})],1)]),r("div",{staticClass:"col"},[r("div",{staticClass:"form-group"},[e._m(4),r("time-input",{model:{value:e.privateState.sensorModel.ignoranceIntervalTo,callback:function(t){e.$set(e.privateState.sensorModel,"ignoranceIntervalTo",t)},expression:"privateState.sensorModel.ignoranceIntervalTo"}})],1)])])]):e._e(),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.sensorModel.notificationSettings.isAlarmEnabled,expression:"privateState.sensorModel.notificationSettings.isAlarmEnabled"}],staticClass:"form-check-input",attrs:{id:"sensorModel__notificationSettings__isAlarmEnabled",type:"checkbox"},domProps:{checked:Array.isArray(e.privateState.sensorModel.notificationSettings.isAlarmEnabled)?e._i(e.privateState.sensorModel.notificationSettings.isAlarmEnabled,null)>-1:e.privateState.sensorModel.notificationSettings.isAlarmEnabled},on:{change:function(t){var r=e.privateState.sensorModel.notificationSettings.isAlarmEnabled,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.sensorModel.notificationSettings,"isAlarmEnabled",r.concat([s])):o>-1&&e.$set(e.privateState.sensorModel.notificationSettings,"isAlarmEnabled",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.sensorModel.notificationSettings,"isAlarmEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"sensorModel__notificationSettings__isAlarmEnabled"}},[e._v("Enable alrams")]),e._m(5)])]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.SENSOR_UPDATE]}},[e._v("Save")])],1)])])]):e._e()])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12 col-md-12"},[r("h5",{staticClass:"mt-0"},[e._v("Calibrations")]),e.sensor&&e.sensor.calibrations?r("div",[r("div",{staticClass:"mb-3"},[r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:e.onCreateCalibration}},[r("i",{staticClass:"fas fa-plus"})])]),r("div",{class:{"block-disabled":e.isCalibrationLoading}},[r("table",{staticClass:"table table-hover"},[e._m(6),r("tbody",e._l(e.sensor.calibrations,(function(t){return r("tr",{key:t.id,class:{}},[r("th",{attrs:{scope:"row"}},[e._v(" "+e._s(t.id)+" ")]),r("td",[e._v(" "+e._s(t.name)+" ")]),r("td",[e._v(" "+e._s(t.channel)+" ")]),r("td",[e._v(" "+e._s(t.metrics)+" ")]),r("td",[e._v(" "+e._s(t.originalValue)+" ")]),r("td",[e._v(" "+e._s(t.calibratedValue)+" ")]),r("td",[r("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(r){return e.onEditCalibration(t.id)}}},[r("i",{staticClass:"far fa-edit"})]),r("button",{staticClass:"btn btn-outline-danger btn-sm ml-1",on:{click:function(r){return e.deleteCalibration(t.id)}}},[r("i",{staticClass:"fas fa-minus"})])])])})),0)])]),r("modal",{attrs:{name:"calibration-create-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[e.privateState.calibrationCreateModel.isEdit?e._e():r("span",[e._v("Create")]),e.privateState.calibrationCreateModel.isEdit?r("span",[e._v("Edit")]):e._e(),e._v(" calibration ")]),r("div",{staticClass:"app-modal-close",on:{click:function(t){return e.$modal.hide("calibration-create-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(t){t.preventDefault(),e.privateState.calibrationCreateModel.isEdit?e.editCalibration():e.createCalibration()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__name"}},[r("strong",[e._v("Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.calibrationCreateModel.name,expression:"privateState.calibrationCreateModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"calibrationCreateModel__name",placeholder:"Name"},domProps:{value:e.privateState.calibrationCreateModel.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.calibrationCreateModel,"name",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__channel"}},[r("strong",[e._v("Channel")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.privateState.calibrationCreateModel.channel,expression:"privateState.calibrationCreateModel.channel"}],staticClass:"form-control",attrs:{id:"calibrationCreateModel__channel"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.privateState.calibrationCreateModel,"channel",t.target.multiple?r:r[0])}}},e._l(e.telemetryChannels,(function(t){return r("option",{key:t,domProps:{value:t,selected:t===e.privateState.calibrationCreateModel.channel}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__metrics"}},[r("strong",[e._v("Measurement unit")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.privateState.calibrationCreateModel.metrics,expression:"privateState.calibrationCreateModel.metrics"}],staticClass:"form-control",attrs:{id:"calibrationCreateModel__metrics"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.privateState.calibrationCreateModel,"metrics",t.target.multiple?r:r[0])}}},e._l(e.measurementUnits,(function(t){return r("option",{key:t,domProps:{value:t,selected:t===e.privateState.calibrationCreateModel.metrics}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__originalValue"}},[r("strong",[e._v("Original Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.calibrationCreateModel.originalValue,expression:"privateState.calibrationCreateModel.originalValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"calibrationCreateModel__originalValue",placeholder:"Original"},domProps:{value:e.privateState.calibrationCreateModel.originalValue},on:{input:function(t){t.target.composing||e.$set(e.privateState.calibrationCreateModel,"originalValue",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"calibrationCreateModel__calibratedValue"}},[r("strong",[e._v("Calibrated Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.calibrationCreateModel.calibratedValue,expression:"privateState.calibrationCreateModel.calibratedValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"calibrationCreateModel__calibratedValue",placeholder:"Calibrated"},domProps:{value:e.privateState.calibrationCreateModel.calibratedValue},on:{input:function(t){t.target.composing||e.$set(e.privateState.calibrationCreateModel,"calibratedValue",t.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.SENSOR_CALIBRATION_CREATE]||e.sharedState.loading[e.privateState.storeTypes.SENSOR_CALIBRATION_UPDATE]}},[e.privateState.calibrationCreateModel.isEdit?e._e():r("span",[e._v("Create")]),e.privateState.calibrationCreateModel.isEdit?r("span",[e._v("Save")]):e._e()])],1)])])])],1):e._e()])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col"},[r("h5",{staticClass:"mt-0"},[e._v("Telemetry rules")]),e.sensor&&e.sensor.telemetryRules?r("div",[r("div",{staticClass:"mb-3"},[r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:e.onCreateTelemetryRule}},[r("i",{staticClass:"fas fa-plus"})])]),r("div",{class:{"block-disabled":e.isTelemetryRuleLoading}},[r("table",{staticClass:"table table-hover"},[e._m(7),r("tbody",e._l(e.sensor.telemetryRules,(function(t){return r("tr",{key:t.id,class:{}},[r("th",{attrs:{scope:"row"}},[e._v(" "+e._s(t.id)+" ")]),r("td",[e._v(" "+e._s(t.name)+" ")]),r("td",[e._v(" "+e._s(t.channel)+" ")]),r("td",[e._v(" "+e._s(t.metrics)+" ")]),r("td",[e._v(" "+e._s(t.isAlarmEnabled)+" ")]),r("td",[e._v(" "+e._s(t.minAllowedValue)+" ")]),r("td",[e._v(" "+e._s(t.maxAllowedValue)+" ")]),r("td",[r("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(r){return e.onEditTelemetryRule(t.id)}}},[r("i",{staticClass:"far fa-edit"})]),r("button",{staticClass:"btn btn-outline-danger btn-sm ml-1",on:{click:function(r){return e.deleteTelemetryRule(t.id)}}},[r("i",{staticClass:"fas fa-minus"})])])])})),0)])]),r("modal",{attrs:{name:"telemetry-rule-create-edit",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[e.privateState.telemetryRuleCreateModel.isEdit?e._e():r("span",[e._v("Create")]),e.privateState.telemetryRuleCreateModel.isEdit?r("span",[e._v("Edit")]):e._e(),e._v(" telemetry rule ")]),r("div",{staticClass:"app-modal-close",on:{click:function(t){return e.$modal.hide("telemetry-rule-create-edit")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(t){t.preventDefault(),e.privateState.telemetryRuleCreateModel.isEdit?e.editTelemetryRule():e.createTelemetryRule()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__name"}},[r("strong",[e._v("Name")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.telemetryRuleCreateModel.name,expression:"privateState.telemetryRuleCreateModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"telemetryRuleCreateModel__name",placeholder:"Name"},domProps:{value:e.privateState.telemetryRuleCreateModel.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.telemetryRuleCreateModel,"name",t.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:""}},[e._v("Name must be unique.")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__channel"}},[r("strong",[e._v("Channel")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.privateState.telemetryRuleCreateModel.channel,expression:"privateState.telemetryRuleCreateModel.channel"}],staticClass:"form-control",attrs:{id:"telemetryRuleCreateModel__channel"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.privateState.telemetryRuleCreateModel,"channel",t.target.multiple?r:r[0])}}},e._l(e.telemetryChannels,(function(t){return r("option",{key:t,domProps:{value:t,selected:t===e.privateState.telemetryRuleCreateModel.channel}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__metrics"}},[r("strong",[e._v("Measurement unit")])]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.privateState.telemetryRuleCreateModel.metrics,expression:"privateState.telemetryRuleCreateModel.metrics"}],staticClass:"form-control",attrs:{id:"telemetryRuleCreateModel__metrics"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.privateState.telemetryRuleCreateModel,"metrics",t.target.multiple?r:r[0])}}},e._l(e.measurementUnits,(function(t){return r("option",{key:t,domProps:{value:t,selected:t===e.privateState.telemetryRuleCreateModel.metrics}},[e._v(" "+e._s(t)+" ")])})),0)]),r("div",{staticClass:"form-group form-check"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.telemetryRuleCreateModel.isAlarmEnabled,expression:"privateState.telemetryRuleCreateModel.isAlarmEnabled"}],staticClass:"form-check-input",attrs:{id:"telemetryRuleCreateModel__isAlarmEnabled",type:"checkbox"},domProps:{checked:Array.isArray(e.privateState.telemetryRuleCreateModel.isAlarmEnabled)?e._i(e.privateState.telemetryRuleCreateModel.isAlarmEnabled,null)>-1:e.privateState.telemetryRuleCreateModel.isAlarmEnabled},on:{change:function(t){var r=e.privateState.telemetryRuleCreateModel.isAlarmEnabled,a=t.target,n=!!a.checked;if(Array.isArray(r)){var s=null,o=e._i(r,s);a.checked?o<0&&e.$set(e.privateState.telemetryRuleCreateModel,"isAlarmEnabled",r.concat([s])):o>-1&&e.$set(e.privateState.telemetryRuleCreateModel,"isAlarmEnabled",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.privateState.telemetryRuleCreateModel,"isAlarmEnabled",n)}}}),r("label",{staticClass:"form-check-label",attrs:{for:"telemetryRuleCreateModel__isAlarmEnabled"}},[e._v("Enable alarms")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__minAllowedValue"}},[r("strong",[e._v("Min Allowed Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.telemetryRuleCreateModel.minAllowedValue,expression:"privateState.telemetryRuleCreateModel.minAllowedValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"telemetryRuleCreateModel__minAllowedValue",placeholder:"Min"},domProps:{value:e.privateState.telemetryRuleCreateModel.minAllowedValue},on:{input:function(t){t.target.composing||e.$set(e.privateState.telemetryRuleCreateModel,"minAllowedValue",t.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"telemetryRuleCreateModel__maxAllowedValue"}},[r("strong",[e._v("Max Allowed Value")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.telemetryRuleCreateModel.maxAllowedValue,expression:"privateState.telemetryRuleCreateModel.maxAllowedValue"}],staticClass:"form-control",attrs:{type:"number",step:"any",required:"",id:"telemetryRuleCreateModel__maxAllowedValue",placeholder:"Max"},domProps:{value:e.privateState.telemetryRuleCreateModel.maxAllowedValue},on:{input:function(t){t.target.composing||e.$set(e.privateState.telemetryRuleCreateModel,"maxAllowedValue",t.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.SENSOR_TELEMETRY_RULE_CREATE]||e.sharedState.loading[e.privateState.storeTypes.SENSOR_TELEMETRY_RULE_UPDATE]}},[e.privateState.telemetryRuleCreateModel.isEdit?e._e():r("span",[e._v("Create")]),e.privateState.telemetryRuleCreateModel.isEdit?r("span",[e._v("Save")]):e._e()])],1)])])])],1):e._e()])])])],1)},ss=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:""}},[r("strong",[e._v("#id")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"sensorModel__name"}},[r("strong",[e._v("Name")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("small",[e._v("Ingorance interval - the interval when all sensor telemetry is ignored.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"sensorModel__ignoranceIntervalFrom"}},[r("strong",[e._v("From")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"sensorModel__ignoranceIntervalTo"}},[r("strong",[e._v("To")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("small",[e._v("If alarms are disabled you won't get notified about emergencies.")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",{},[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("#")]),r("th",{attrs:{scope:"col"}},[e._v("Name")]),r("th",{attrs:{scope:"col"}},[e._v("Channel")]),r("th",{attrs:{scope:"col"}},[e._v("Metrics")]),r("th",{attrs:{scope:"col"}},[e._v("OriginalValue")]),r("th",{attrs:{scope:"col"}},[e._v("Calibrated Value")]),r("th",{attrs:{scope:"col"}})])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",{},[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("#")]),r("th",{attrs:{scope:"col"}},[e._v("Name")]),r("th",{attrs:{scope:"col"}},[e._v("Channel")]),r("th",{attrs:{scope:"col"}},[e._v("Metrics")]),r("th",{attrs:{scope:"col"}},[e._v("Alarm Enabled")]),r("th",{attrs:{scope:"col"}},[e._v("Min Allowed Value")]),r("th",{attrs:{scope:"col"}},[e._v("Max Allowed Value")]),r("th",{attrs:{scope:"col"}})])])}];function os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?os(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):os(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var cs={name:null,isIgnoranceIntervalEnabled:!1,ignoranceIntervalFrom:null,ignoranceIntervalTo:null,notificationSettings:{isAlarmEnabled:!1}},ls={isEdit:!1,id:null,originalValue:0,calibratedValue:0},us={isEdit:!1,id:null,isAlarmEnabled:!0,minAllowedValue:0,maxAllowedValue:0},ds={name:"sensor-manage",components:{RowLoader:Be,LoadingButton:et,TimeInput:Dn},props:{companyId:String,sensorId:String},data:function(){return{privateState:{storeTypes:H,sensorModel:is({},cs),calibrationCreateModel:is({},ls),telemetryRuleCreateModel:is({},us)}}},computed:is({},Object(U["b"])({sharedState:function(e){return e},isCalibrationLoading:function(e){return e.loading[H.SENSOR_LOAD]||e.loading[H.SENSOR_CALIBRATION_CREATE]||e.loading[H.SENSOR_CALIBRATION_UPDATE]||e.loading[H.SENSOR_CALIBRATION_DELETE]},isTelemetryRuleLoading:function(e){return e.loading[H.SENSOR_LOAD]||e.loading[H.SENSOR_TELEMETRY_RULE_CREATE]||e.loading[H.SENSOR_TELEMETRY_RULE_UPDATE]||e.loading[H.SENSOR_TELEMETRY_RULE_DELETE]},sensor:function(e){return e.sensor[this.companyId]&&e.sensor[this.companyId][this.sensorId]?e.sensor[this.companyId][this.sensorId]:null},telemetryChannels:function(e){return e.enums&&e.enums["telemetryChannel"]||[]},measurementUnits:function(e){return e.enums&&e.enums["measurementUnit"]||[]}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch(H.SENSOR_LOAD,{companyId:this.companyId,sensorId:this.sensorId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.sharedState.enums||this.$store.dispatch(H.ENUMS_LOAD,{}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.privateState.sensorModel=is({},cs,{},this.sensor||{}),this.$store.subscribe((function(e,r){var a=e.type;e.payload;a===H.SENSOR_SET&&(t.privateState.sensorModel=is({},t.privateState.sensorModelDefault,{},t.sensor||{}))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{updateSensor:function(){this.$store.dispatch(H.SENSOR_UPDATE,{companyId:this.companyId,sensorId:this.sensorId,data:{name:this.privateState.sensorModel.name,isIgnoranceIntervalEnabled:this.privateState.sensorModel.isIgnoranceIntervalEnabled,ignoranceIntervalFrom:this.privateState.sensorModel.ignoranceIntervalFrom,ignoranceIntervalTo:this.privateState.sensorModel.ignoranceIntervalTo,notificationSettings:{isAlarmEnabled:this.privateState.sensorModel.notificationSettings.isAlarmEnabled}}}).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onCreateCalibration:function(){this.privateState.calibrationCreateModel=is({},ls),this.$modal.show("calibration-create-edit")},onEditCalibration:function(e){this.privateState.calibrationCreateModel=is({isEdit:!0,id:e},this.sensor.calibrations.find((function(t){return t.id===e}))),this.$modal.show("calibration-create-edit")},createCalibration:function(){var e=this;this.$store.dispatch(H.SENSOR_CALIBRATION_CREATE,{companyId:this.companyId,sensorId:this.sensorId,data:{name:this.privateState.calibrationCreateModel.name,channel:this.privateState.calibrationCreateModel.channel,metrics:this.privateState.calibrationCreateModel.metrics,originalValue:this.privateState.calibrationCreateModel.originalValue,calibratedValue:this.privateState.calibrationCreateModel.calibratedValue}}).then((function(){e.$notify({group:"app",type:"success",title:"Calibration has been created!",text:"",duration:5e3}),e.$modal.hide("calibration-create-edit"),e.privateState.calibrationCreateModel=is({},ls)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},editCalibration:function(){var e=this;this.$store.dispatch(H.SENSOR_CALIBRATION_UPDATE,{companyId:this.companyId,sensorId:this.sensorId,calibrationId:this.privateState.calibrationCreateModel.id,data:{name:this.privateState.calibrationCreateModel.name,channel:this.privateState.calibrationCreateModel.channel,metrics:this.privateState.calibrationCreateModel.metrics,originalValue:this.privateState.calibrationCreateModel.originalValue,calibratedValue:this.privateState.calibrationCreateModel.calibratedValue}}).then((function(){e.$notify({group:"app",type:"success",title:"Calibration has been updated!",text:"",duration:5e3}),e.$modal.hide("calibration-create-edit"),e.privateState.calibrationCreateModel=is({},ls)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteCalibration:function(e){var t=this;window.confirm("Are you sure?")&&this.$store.dispatch(H.SENSOR_CALIBRATION_DELETE,{companyId:this.companyId,sensorId:this.sensorId,calibrationId:e}).then((function(){t.$notify({group:"app",type:"information",title:"Calibration has been deleted!",text:"",duration:5e3})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onCreateTelemetryRule:function(){this.privateState.telemetryRuleCreateModel=is({},us),this.$modal.show("telemetry-rule-create-edit")},onEditTelemetryRule:function(e){this.privateState.telemetryRuleCreateModel=is({isEdit:!0,id:e},this.sensor.telemetryRules.find((function(t){return t.id===e}))),this.$modal.show("telemetry-rule-create-edit")},createTelemetryRule:function(){var e=this;this.$store.dispatch(H.SENSOR_TELEMETRY_RULE_CREATE,{companyId:this.companyId,sensorId:this.sensorId,data:{name:this.privateState.telemetryRuleCreateModel.name,channel:this.privateState.telemetryRuleCreateModel.channel,metrics:this.privateState.telemetryRuleCreateModel.metrics,isAlarmEnabled:this.privateState.telemetryRuleCreateModel.isAlarmEnabled,minAllowedValue:this.privateState.telemetryRuleCreateModel.minAllowedValue,maxAllowedValue:this.privateState.telemetryRuleCreateModel.maxAllowedValue}}).then((function(){e.$notify({group:"app",type:"success",title:"Telemetry rule '".concat(e.privateState.telemetryRuleCreateModel.name,"' has been created!"),text:"",duration:5e3}),e.$modal.hide("telemetry-rule-create-edit"),e.privateState.telemetryRuleCreateModel=is({},us)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},editTelemetryRule:function(){var e=this;this.$store.dispatch(H.SENSOR_TELEMETRY_RULE_UPDATE,{companyId:this.companyId,sensorId:this.sensorId,telemetryRuleId:this.privateState.telemetryRuleCreateModel.id,data:{name:this.privateState.telemetryRuleCreateModel.name,channel:this.privateState.telemetryRuleCreateModel.channel,metrics:this.privateState.telemetryRuleCreateModel.metrics,isAlarmEnabled:this.privateState.telemetryRuleCreateModel.isAlarmEnabled,minAllowedValue:this.privateState.telemetryRuleCreateModel.minAllowedValue,maxAllowedValue:this.privateState.telemetryRuleCreateModel.maxAllowedValue}}).then((function(){e.$notify({group:"app",type:"success",title:"Telemetry rule '".concat(e.privateState.telemetryRuleCreateModel.name,"' has been updated!"),text:"",duration:5e3}),e.$modal.hide("telemetry-rule-create-edit"),e.privateState.telemetryRuleCreateModel=is({},us)})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteTelemetryRule:function(e){var t=this;window.confirm("Are you sure?")&&this.$store.dispatch(H.SENSOR_TELEMETRY_RULE_DELETE,{companyId:this.companyId,sensorId:this.sensorId,telemetryRuleId:e}).then((function(){t.$notify({group:"app",type:"information",title:"Telemetry rule has been deleted!",text:"",duration:5e3})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},ps=ds,ms=Object(T["a"])(ps,ns,ss,!1,null,null,null),fs=ms.exports,vs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"company-create-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-md-4"},[r("h5",[e._v("Create new company")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputName"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.model.name,expression:"privateState.model.name"}],staticClass:"form-control",attrs:{type:"text",id:"inputName","aria-describedby":"nameHelp",placeholder:"Name"},domProps:{value:e.privateState.model.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.model,"name",t.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_CREATE]}},[e._v("Create")])],1)])])])},hs=[];function bs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function gs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ys={name:"company-create",components:{LoadingButton:et},data:function(){return{privateState:{storeTypes:H,model:{name:""}}}},computed:gs({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{onSubmit:function(e){var t=this,r=gs({},this.privateState.model);this.$store.dispatch(H.COMPANY_CREATE,{company:r}).then((function(e){t.$notify({group:"app",type:"success",title:"Company '".concat(e.name,"' has beed created!"),text:""}),t.$store.dispatch(H.USER_INFO_LOAD,{}),t.$store.dispatch(H.AUTH_MY_PERMISSIONS_LOAD,{}),ho.refreshTokens({withFullscreenLoader:!0}),t.$router.push({name:"dashboard"})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},_s=ys,Ss=Object(T["a"])(_s,vs,hs,!1,null,null,null),Os=Ss.exports,Es=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"company-manage-wrapper"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.COMPANY_LOAD]||e.sharedState.loading[e.privateState.storeTypes.COMPANY_UPDATE]}}),r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col col-md-5"},[r("h5",{staticClass:"mt-0"},[e._v("Manage company")]),e.sharedState.company?r("div",[r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateCompany(t)}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"inputName"}},[e._v("Name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.companyModel.name,expression:"privateState.companyModel.name"}],staticClass:"form-control",attrs:{type:"text",id:"inputName","aria-describedby":"nameHelp",placeholder:"Name"},domProps:{value:e.privateState.companyModel.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.companyModel,"name",t.target.value)}}})]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_UPDATE]}},[e._v("Save")])],1)])]),r("div",{staticClass:"card border-danger text-danger"},[r("div",{staticClass:"card-body"},[r("loading-button",{staticClass:"btn-danger",attrs:{type:"button",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_DELETE]},nativeOn:{click:function(t){return e.deleteCompany()}}},[e._v("Delete")])],1)])]):e._e()])])])],1)},Cs=[];function Is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Is(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ts={name:""},js={name:"company-manage",components:{RowLoader:Be,LoadingButton:et},props:{companyId:{type:String,required:!0,default:null}},data:function(){return{privateState:{storeTypes:H,companyModel:ws({},Ts)}}},computed:ws({},Object(U["b"])({sharedState:function(e){return e}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this,t.sharedState.company&&t.sharedState.company.id===t.companyId||t.$store.dispatch(H.COMPANY_LOAD,{companyId:t.companyId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),t.privateState.companyModel=ws({},Ts,{},t.sharedState.company||{}),t.$store.subscribe((function(e,r){var a=e.type;e.payload;a===H.COMPANY_SET&&(t.privateState.companyModel=ws({},t.privateState.companyModel,{},r.company))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{updateCompany:function(){var e=this;this.$store.dispatch(H.COMPANY_UPDATE,{companyId:this.companyId,data:{name:this.privateState.companyModel.name}}).then((function(t){e.$notify({group:"app",type:"success",title:"Company '".concat(e.privateState.companyModel.name,"' has beed updated!"),text:""}),e.$store.dispatch(H.USER_INFO_LOAD,{})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},deleteCompany:function(){var e=this;window.confirm("Are you sure?")&&this.$store.dispatch(H.COMPANY_DELETE,{companyId:this.companyId}).then((function(t){e.$notify({group:"app",type:"information",title:"Company '".concat(e.privateState.companyModel.name,"' has beed deleted!"),text:""}),e.$store.dispatch(H.USER_INFO_LOAD,{}),ho.refreshTokens({withFullscreenLoader:!1}),e.$router.push({name:"dashboard-home"})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},Ds=js,As=Object(T["a"])(Ds,Es,Cs,!1,null,null,null),Rs=As.exports,Ps=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-profile-wrapper company-user-profile-wrapper"},[r("row-loader",{staticClass:"mb-3",attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.COMPANY_DEPARTMENT_LOAD]||e.sharedState.loading[e.privateState.storeTypes.COMPANY_USERS_LOAD]}}),r("div",[r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12 col-md-5"},[r("h5",{staticClass:"mt-0"},[e._v("Department")]),e.department?r("div",{class:{"block-disabled":e.sharedState.loading[e.privateState.storeTypes.COMPANY_DEPARTMENT_LOAD]}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.updateDepartment(t)}}},[r("div",[r("div",{staticClass:"form-group"},[e._m(0),r("div",[e._v(e._s(e.department.id))])]),r("div",{staticClass:"form-group"},[e._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:e.privateState.departmentModel.name,expression:"privateState.departmentModel.name"}],staticClass:"form-control",attrs:{id:"departmentModel__name",type:"text"},domProps:{value:e.privateState.departmentModel.name},on:{input:function(t){t.target.composing||e.$set(e.privateState.departmentModel,"name",t.target.value)}}})]),r("div",{staticClass:"form-group"},[e._m(2),r("company-user-select",{attrs:{companyId:this.companyId,departmentId:null},model:{value:e.privateState.departmentModel.managerId,callback:function(t){e.$set(e.privateState.departmentModel,"managerId",t)},expression:"privateState.departmentModel.managerId"}})],1)]),r("loading-button",{staticClass:"btn btn-outline-success",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_DEPARTMENT_UPDATE]}},[e._v("Save")])],1)])])]):e._e()])]),r("div",{staticClass:"row mb-5"},[r("div",{staticClass:"col-12"},[r("h5",{staticClass:"mt-0 mb-3"},[e._v("Department users")]),e.departmentUsers?r("div",[r("div",{staticClass:"mb-3"},[r("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:function(t){return e.onAddUserToDepartmentClick(t)}}},[r("i",{staticClass:"fas fa-user-plus"})])]),r("div",{class:{"block-disabled":e.sharedState.loading[e.privateState.storeTypes.COMPANY_DEPARTMENT_USERS_LOAD]||e.sharedState.loading[e.privateState.storeTypes.COMPANY_DEPARTMENT_USER_DELETE]}},[r("div",{staticClass:"d-flex flex-row justify-content-start align-items-start flex-wrap"},e._l(e.departmentUsers.data,(function(t){return r("div",{key:t.id,staticClass:"card bg-light w-md-auto w-100 mr-md-2 mr-0 mb-2"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"d-flex w-100 justify-content-between align-items-center mb-1"},[r("h6",{staticClass:"card-title mb-0"},[r("router-link",{attrs:{to:{name:"company-user-profile",params:{companyId:e.companyId,userId:t.id}}}},[e._v(" "+e._s(t.name)+" ")])],1),r("div",{staticClass:"ml-2"},[t.id===e.$store.getters.userId?r("small",{staticClass:"badge badge-info mr-1"},[e._v("(You)")]):e._e(),t.id===e.department.managerId?r("small",{staticClass:"badge badge-primary mr-1"},[e._v("(Manager)")]):e._e(),t.id!==e.department.managerId?r("span",{staticClass:"text-secondary cursor-pointer",on:{click:function(r){return e.removeUserFromDepartment(t.id)}}},[r("i",{staticClass:"fas fa-times"})]):e._e()])]),r("div",{staticClass:"card-text small"},[r("div",[e._v("Email: "+e._s(t.email))]),r("div",[e._v("Phone Number: "+e._s(t.phoneNumber))])])])])})),0)]),r("modal",{attrs:{name:"add-department-user",height:"auto",width:"450px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[e._v("Add user to department")]),r("div",{staticClass:"app-modal-close",on:{click:function(t){return e.$modal.hide("add-department-user")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{on:{submit:function(t){return t.preventDefault(),e.addUserToDepartment()}}},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[e._v("User")]),r("company-user-select",{attrs:{companyId:this.companyId,departmentId:null,excludedDepartmentIds:[this.departmentId]},model:{value:e.privateState.addUserToDepartmentModel.userId,callback:function(t){e.$set(e.privateState.addUserToDepartmentModel,"userId",t)},expression:"privateState.addUserToDepartmentModel.userId"}})],1),r("loading-button",{staticClass:"btn btn-outline-success btn-block",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_DEPARTMENT_USER_ADD]}},[e._v("Add")])],1)])])])],1):e._e()])])])],1)},Ms=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:""}},[r("strong",[e._v("#id")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"departmentModel__name"}},[r("strong",[e._v("Name")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"departmentModel__managerId"}},[r("strong",[e._v("Manager user")])])}];function Ns(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Us(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ns(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xs={name:null,managerId:null},ks={userId:null},Ls={name:"company-department",components:{RowLoader:Be,LoadingButton:et,CompanyUserSelect:Oa},props:{companyId:String,departmentId:String},data:function(){return{privateState:{storeTypes:H,departmentModel:Us({},xs),addUserToDepartmentModel:Us({},ks)}}},computed:Us({},Object(U["b"])({sharedState:function(e){return e},department:function(e){return e.companyDepartment[this.companyId]&&e.companyDepartment[this.companyId][this.departmentId]?e.companyDepartment[this.companyId][this.departmentId]:null},departmentUsers:function(e){return e.departmentUsers[this.departmentId]||null}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch(H.COMPANY_DEPARTMENT_LOAD,{companyId:this.companyId,departmentId:this.departmentId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.loadDepartmentUsers(),this.privateState.departmentModel=Us({},xs,{},this.department||{}),this.$store.subscribe((function(e,r){var a=e.type;e.payload;a===H.COMPANY_DEPARTMENT_SET&&(t.privateState.departmentModel=Us({},t.privateState.departmentModel,{},t.department||{}))}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadDepartmentUsers:function(){this.$store.dispatch(H.COMPANY_DEPARTMENT_USERS_LOAD,{companyId:this.companyId,departmentId:this.departmentId,offset:0,limit:500}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},updateDepartment:function(){this.$store.dispatch(H.COMPANY_DEPARTMENT_UPDATE,{companyId:this.companyId,departmentId:this.departmentId,data:{name:this.privateState.departmentModel.name,managerId:this.privateState.departmentModel.managerId}}).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},onAddUserToDepartmentClick:function(){this.$modal.show("add-department-user")},addUserToDepartment:function(){var e=this;this.$store.dispatch(H.COMPANY_DEPARTMENT_USER_ADD,{companyId:this.companyId,data:{userId:this.privateState.addUserToDepartmentModel.userId,departmentId:this.departmentId}}).then((function(){e.$notify({group:"app",type:"success",title:"User has been added to the department!",text:"",duration:5e3}),e.$modal.hide("add-department-user"),e.privateState.addUserToDepartmentModel=Us({},ks),e.loadDepartmentUsers()})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},removeUserFromDepartment:function(e){var t=this;window.confirm("Delete user from department?")&&this.$store.dispatch(H.COMPANY_DEPARTMENT_USER_DELETE,{companyId:this.companyId,departmentId:this.departmentId,userId:e}).then((function(){t.loadDepartmentUsers()})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},$s=Ls,Fs=Object(T["a"])($s,Ps,Ms,!1,null,null,null),Ys=Fs.exports,Vs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-profile-wrapper company-user-profile-wrapper"},[r("row-loader",{staticClass:"mb-3",attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.COMPANY_USER_LOAD]||e.sharedState.loading[e.privateState.storeTypes.AUTH_USER_SCOPED_PERMISSIONS_LOAD]}}),e.user?r("div",[r("h5",{staticClass:"mt-0 mb-3"},[e._v("User info:")]),r("div",{staticClass:"media d-flex flex-wrap flex-md-nowrap"},[r("img",{staticClass:"align-self-start mr-3 mb-3",attrs:{src:"img/user.png"}}),r("div",{staticClass:"media-body"},[r("div",[r("dl",[r("dt",[e._v("#")]),r("dd",[e._v(e._s(e.user.id))]),r("dt",[e._v("Email")]),r("dd",[e._v(e._s(e.user.email))]),r("dt",[e._v("Phone number")]),r("dd",[e._v(e._s(e.user.phoneNumber))]),r("dt",[e._v("Name")]),r("dd",[e._v(e._s(e.user.name))])])]),r("h5",{staticClass:"mt-0"},[e._v("Permissions:")]),r("div",[r("user-scoped-permissions",{attrs:{userId:e.user.id,userPermissions:e.userPermissions}})],1)])])]):e._e()],1)},Gs=[];function Hs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Zs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qs={name:"company-user-rofile",components:{RowLoader:Be,UserScopedPermissions:Ba},props:{companyId:String,userId:String},data:function(){return{privateState:{storeTypes:H}}},computed:Zs({},Object(U["b"])({sharedState:function(e){return e},user:function(e){return e.companyUser[this.companyId]&&e.companyUser[this.companyId][this.userId]?e.companyUser[this.companyId][this.userId]:null},userPermissions:function(e){return e.auth.userScopedPermissions[this.companyId]&&e.auth.userScopedPermissions[this.companyId][this.userId]?e.auth.userScopedPermissions[this.companyId][this.userId]:null}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch(H.COMPANY_USER_LOAD,{companyId:this.companyId,userId:this.userId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})),this.$store.dispatch(H.AUTH_USER_SCOPED_PERMISSIONS_LOAD,{scopeId:this.companyId,userId:this.userId}).then().catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){}},zs=qs,Bs=Object(T["a"])(zs,Vs,Gs,!1,null,null,null),Ws=Bs.exports,Ks=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-permissions-wrapper"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("row-loader",{attrs:{visible:e.sharedState.loading[e.privateState.storeTypes.MY_COMPANY_INVITATIONS_LOAD]}}),e.myCompanyInvitations?r("div",[r("h5",[e._v("My invitations:")]),r("ul",{staticClass:"list-group",class:{"block-disabled":e.sharedState.loading[e.privateState.storeTypes.MY_COMPANY_INVITATIONS_LOAD]}},e._l(e.myCompanyInvitations,(function(t){return r("li",{key:t.id,staticClass:"list-group-item"},[r("div",{staticClass:"d-flex w-100 justify-content-between"},[r("div",[r("h5",{staticClass:"mb-1"},[e._v(e._s(t.companyName))]),r("div",{staticClass:"mb-1"},[r("div",[r("small",[r("strong",[e._v("Permissions ("+e._s(t.permissions.length)+"):")])])]),e._l(t.permissions,(function(t){return r("div",{key:"permission-"+t.permission,staticClass:"mb-0"},[r("small",[e._v(" "+e._s(t.name)+" / "+e._s(t.description)+" ")])])}))],2),r("div",[r("div",[r("small",[r("strong",[e._v("Roles ("+e._s(t.roles.length)+"):")])])]),e._l(t.roles,(function(t){return r("div",{key:"role-"+t.role,staticClass:"mb-0"},[r("small",[e._v(" "+e._s(t.name)+" ")])])}))],2)]),r("div",[r("loading-button",{staticClass:"btn btn-outline-success mr-2",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_USER_INVITATION_ACCEPT]},nativeOn:{click:function(r){return e.acceptInvitation(t.id)}}},[e._v("Accept")]),r("loading-button",{staticClass:"btn btn-outline-danger",attrs:{type:"submit",loading:e.sharedState.loading[e.privateState.storeTypes.COMPANY_USER_INVITATION_REJECT]},nativeOn:{click:function(r){return e.rejectInvitation(t.id)}}},[e._v("Reject")])],1)])])})),0)]):e._e()],1)])])},Js=[];function Qs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Xs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var eo={name:"my-company-invitations",components:{RowLoader:Be,LoadingButton:et},data:function(){return{privateState:{storeTypes:H}}},computed:Xs({},Object(U["b"])({sharedState:function(e){return e},myCompanyInvitations:function(e){return e.myCompanyInvitations}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadInitialData();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},methods:{loadInitialData:function(){this.$store.dispatch(H.MY_COMPANY_INVITATIONS_LOAD,{}).then((function(){})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},acceptInvitation:function(e){var t=this;this.$store.dispatch(H.COMPANY_USER_INVITATION_ACCEPT,{invitationId:e}).then((function(){t.loadInitialData(),t.$store.dispatch(H.USER_INFO_LOAD,{})})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))},rejectInvitation:function(e){var t=this;this.$store.dispatch(H.COMPANY_USER_INVITATION_REJECT,{invitationId:e}).then((function(){t.loadInitialData()})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)}))}}},to=eo,ro=Object(T["a"])(to,Ks,Js,!1,null,null,null),ao=ro.exports;function no(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?no(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):no(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oo(e){return so({},e.params,{query:so({},e.query)})}function io(e){return co.apply(this,arguments)}function co(){return co=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.to,t.from,t.next,a=5,n=.5,s=500,!ye.getters.isAnyLoading){e.next=16;break}o=0;case 6:if(!(o<a)){e.next=16;break}return console.log("Waiting app initialization before processing to route ".concat(r.name,": ").concat(r.path,". Wait time ms: ").concat(s)),e.next=10,Ve.waitAsync(s);case 10:if(ye.getters.isAnyLoading){e.next=12;break}return e.abrupt("break",16);case 12:s+=s*n;case 13:o++,e.next=6;break;case 16:console.log("App was initialized. Processing to route ".concat(r.name,": ").concat(r.path,"."));case 17:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}function lo(e){var t=e.to,r=(e.from,e.next);ye.state.auth.isAuthenticated?r():(console.error("Access denied to route ".concat(t.name,": ").concat(t.path,". Unauthenticated.")),n["default"].notify({group:"error",type:"error",title:"Access denied!",text:"Looks like you are not logged in, or session expired. Try to relogin."}),r({name:"home",query:{}}))}function uo(e){var t=e.to,r=(e.from,e.next),a=e.permisions,s=e.scopeId;ye.getters.isUserHasPermissions(a,s)?r():(console.error("Access denied to route ".concat(t.name,": ").concat(t.path,". Unauthorized - insufficient permissions.")),n["default"].notify({group:"error",type:"error",title:"Access denied!",text:"Insufficient permissions!"}),r(!1))}n["default"].use(_e["a"]);var po=new _e["a"]({routes:[{path:"/",name:"home",component:je,props:!0,meta:{layout:"default"}},{path:"/error",name:"error",component:xe,props:!0,meta:{layout:"default"}},{path:"/terms-of-use",name:"terms-of-use",component:ot,props:!0,meta:{layout:"no-sidebar"}},{path:"/study-items-dashboard",name:"study-items-dashboard",component:Nt,props:!0,meta:{layout:"default"},beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/study-items/browse",name:"study-items-browse",component:hr,props:!0,meta:{layout:"default"},beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/study-items/learn/cards",name:"study-items-learn-cards",component:Cr,props:!0,meta:{layout:"default"},beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/dashboard",name:"dashboard",component:Vr,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}(),children:[{path:"/",name:"dashboard-home",component:Kr,props:!0},{path:"companies/:companyId/gateways",name:"dashboard-gateways",component:na,props:!0},{path:"companies/:companyId/sensors",name:"dashboard-sensors",component:pa,props:!0},{path:"companies/:companyId/departments",name:"dashboard-departments",component:Da,props:!0},{path:"companies/:companyId/users",name:"dashboard-users",component:La,props:!0,beforeEnter:function(e,t,r){uo({to:e,from:t,next:r,permisions:["CompanyUserRead"],scopeId:e.params.companyId})}}]},{path:"/permissions/my",name:"my-permissions",component:en,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/permissions/:companyId/manage",name:"manage-company-permissions",component:ln,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a}),uo({to:t,from:r,next:a,permisions:["ScopedPermissionManage"],scopeId:t.params.companyId});case 4:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/permissions/:companyId/user/:userId/manage",name:"manage-company-user-permissions",component:bn,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a}),uo({to:t,from:r,next:a,permisions:["ScopedPermissionManage"],scopeId:t.params.companyId});case 4:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/companies/invitations",name:"my-company-invitations",component:ao,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/about",name:"about",component:function(){return r.e("about").then(r.bind(null,"f820"))},props:!0},{path:"/login",name:"login",component:pt,props:!0},{path:"/register",name:"register",component:_t,props:oo},{path:"/logout",name:"logout",component:wt,props:!0},{path:"/profile",name:"user-profile",component:Yn,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/sensors/:sensorId/telemetries",name:"sensor-telemetry",component:as,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/companies/:companyId/sensors/:sensorId/manage",name:"sensor-manage",component:fs,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a});case 3:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/companies/create",name:"company-create",component:Os,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a}),uo({to:t,from:r,next:a,permisions:["CompanyCreate"],scopeId:null});case 4:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/companies/:companyId/manage",name:"company-manage",component:Rs,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a}),uo({to:t,from:r,next:a,permisions:["CompanyUpdate"],scopeId:t.params.companyId});case 4:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/companies/:companyId/departments/:departmentId",name:"company-department",component:Ys,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a}),uo({to:t,from:r,next:a,permisions:["CompanyDepartmentManage"],scopeId:t.params.companyId});case 4:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{path:"/companies/:companyId/users/:userId/profile",name:"company-user-profile",component:Ws,props:!0,beforeEnter:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,io({to:t,from:r,next:a});case 2:lo({to:t,from:r,next:a}),uo({to:t,from:r,next:a,permisions:["CompanyUserRead"],scopeId:t.params.companyId});case 4:case"end":return e.stop()}}),e)})));function t(t,r,a){return e.apply(this,arguments)}return t}()}]});function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var vo=function(){function e(){Object(x["a"])(this,e),this.config=null}return Object(k["a"])(e,[{key:"init",value:function(e){var t=this;this.config=e,this.userManager=new $.a.UserManager({authority:this.config.authority,client_id:this.config.clientId,redirect_uri:this.config.redirectUri,response_type:this.config.responseType,scope:this.config.scopes.join(" "),post_logout_redirect_uri:this.config.postLogoutRedirectUri,automaticSilentRenew:!0,silentRequestTimeout:1e4,accessTokenExpiringNotificationTime:180,loadUserInfo:!0}),this.userInfoService=new F["a"](this.userManager.settings),$.a.Log.logger=console,$.a.Log.level=$.a.Log.INFO,this.userManager.events.addUserLoaded((function(){console.log("AuthService: userLoaded")})),this.userManager.events.addUserUnloaded((function(){console.log("AuthService: userUnloaded"),ye.commit(H.AUTH_USER_RESET)})),this.userManager.events.addAccessTokenExpiring((function(){console.log("AuthService: access_token expiring...")})),this.userManager.events.addAccessTokenExpired((function(){console.log("AuthService: access_token expired"),t.logout()})),this.userManager.events.addSilentRenewError((function(e){console.error("AuthService: silentRenewError: ",e)})),this.userManager.events.addUserSignedOut(function(){console.error("AuthService: userSignedOut"),n["default"].notify({group:"app-important",type:"warn",title:"Warning",text:"Session expired. You have beed logged out."}),this.logoutWithoutRedirect().then((function(){po.push({name:"home"})})).catch((function(e){console.error(e)}))}.bind(this)),this.refreshTokensInterval=this.refreshTokensInterval||3e5,this.refreshTokensIntervalFunc=this.refreshTokensIntervalFunc||setInterval(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("AuthService: running refreshTokensInterval (every ".concat(this.refreshTokensInterval," ms)...")),e.next=3,this.refreshTokens({withFullscreenLoader:!1});case 3:case"end":return e.stop()}}),e,this)}))).bind(this),this.refreshTokensInterval)}},{key:"isAuthenticated",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.userManager.getUser();case 2:return t=e.sent,t&&t.profile&&"false"===t.profile.is_pre_registration,e.abrupt("return",!!t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUser",value:function(){return this.userManager.getUser().then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t?(console.log("AuthService: isAuthenticated: ",!0),ye.commit(H.AUTH_USER_SET,{user:t})):(console.log("AuthService: isAuthenticated: ",!1),ye.commit(H.AUTH_USER_RESET)),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e.message,e.stack;console.error("AuthService: getUser error: ",e),n["default"].notify({group:"error",type:"error",title:"Error",text:"Something went wrong. Can't read user info!"})}))}},{key:"login",value:function(){console.log("AuthService: Login requested."),this.userManager.signinRedirect().then((function(){console.log("AuthService: Redirecting to login...")})).catch((function(e){e.message,e.stack;console.log("AuthService: Login error - ",e),ye.commit(H.ERROR_PAGE_DATA_SET,{data:{title:"Error",text:"Something went wrong during login!"}}),po.push({name:"error"})}))}},{key:"logout",value:function(){console.log("AuthService: Logout requested."),this.userManager.signoutRedirect().then((function(){console.log("AuthService: Redirecting to logout...")})).catch((function(e){e.message,e.stack;console.log("AuthService: Logout error - ",e),ye.commit(H.ERROR_PAGE_DATA_SET,{data:{title:"Error",text:"Something went wrong during logout!"}}),po.push({name:"error"})}))}},{key:"logoutWithoutRedirect",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("AuthService: Logout without redirect requested."),e.next=3,this.userManager.removeUser();case 3:return console.log("AuthService: user removed"),e.next=6,this.userManager.clearStaleState();case 6:return console.log("AuthService: stale state cleared"),e.next=9,this.getUser();case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"refreshTokens",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,a,s,o,i,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},r=t.withFullscreenLoader,a=void 0!==r&&r,s=this,a&&n["default"].appFullscreenLoader({isVisible:!0,title:"Updating your profile info..."}),e.next=5,this.isAuthenticated();case 5:if(o=e.sent,!o){e.next=32;break}return e.prev=7,e.next=10,this.userManager.signinSilent();case 10:return i=e.sent,console.log("AuthService:.refreshTokens: Silent token renewal successful. ",i),e.next=14,s.userInfoService.getClaims(i.access_token);case 14:return c=e.sent,console.log("AuthService:.refreshTokens: user.profile",i.profile),console.log("AuthService:.refreshTokens: nextClaims",c),i.profile=fo({},i.profile,{},c,{test:"test"}),s.userManager.storeUser(i),e.next=21,s.getUser();case 21:a&&n["default"].appFullscreenLoader({isVisible:!1}),e.next=30;break;case 24:throw e.prev=24,e.t0=e["catch"](7),console.error("AuthService:.refreshTokens: Error from signinSilent:",e.t0),this.userManager.events._raiseSilentRenewError(e.t0),a&&n["default"].appFullscreenLoader({isVisible:!1}),e.t0;case 30:e.next=36;break;case 32:throw l="AuthService:.refreshTokens: Can't refresh token. User isn't authenticated.",console.error(l),a&&n["default"].appFullscreenLoader({isVisible:!1}),new Error(l);case 36:case"end":return e.stop()}}),e,this,[[7,24]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),ho=new vo;function bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yo={name:"sidebar",components:{},data:function(){return{privateState:{}}},methods:{},computed:go({},Object(U["b"])({sharedState:function(e){return e},currentRouteName:function(){return console.log(this.$route),this.$route.name}})),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){},toggleSidebar:function(){var e=document.getElementById("sidebar");e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")}},_o=yo,So=_o,Oo=(r("f203"),Object(T["a"])(So,M,N,!1,null,null,null)),Eo=Oo.exports,Co={name:"default-layout",components:{Sidebar:Eo},methods:{toggleSidebar:function(){Eo.toggleSidebar()}}},Io=Co,wo=Object(T["a"])(Io,R,P,!1,null,null,null),To=wo.exports,jo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-fluid app-wrapper"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-10"},[e._t("default")],2)])])},Do=[],Ao={name:"no-sidebar-layout",components:{}},Ro=Ao,Po=Object(T["a"])(Ro,jo,Do,!1,null,null,null),Mo=Po.exports,No=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",[r("transition",[r(e.layout,{tag:"component"},[r("router-view")],1)],1)],1),r("time-zone-auto-detect"),r("notifications",{attrs:{group:"error",position:"top center",duration:7e3}}),r("notifications",{attrs:{group:"app",position:"top right"}}),r("notifications",{attrs:{group:"app-important",position:"top center",duration:5e3}}),r("app-fullscreen-loader",{attrs:{defaultTitle:"Loading...",defaultText:""}})],1)},Uo=[],xo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("modal",{attrs:{name:"user-timezone-confirm",height:"auto",width:"400px",classes:["v--modal","v--modal-box","v--modal-box--overflow-visible","v--modal-box--sm-fullwidth"],clickToClose:!1}},[r("div",{staticClass:"app-modal"},[r("div",{staticClass:"app-modal-header"},[r("div",{staticClass:"app-modal-title"},[e._v("Confirm your timezone")]),r("div",{staticClass:"app-modal-close",on:{click:function(t){return e.$modal.hide("user-timezone-confirm")}}},[r("i",{staticClass:"fas fa-times"})])]),r("div",{staticClass:"app-modal-content"},[r("form",{ref:"confirmForm",on:{submit:function(e){e.preventDefault()}}},[r("div",{staticClass:"form-group"},[r("h6",[e._v("Your timezone is "+e._s(e.timezoneDetected)+"?")])]),r("loading-button",{staticClass:"btn btn-outline-success mr-1",attrs:{type:"button",loading:e.isLoading,name:"isConfirmed",value:"yes"},nativeOn:{click:function(t){return e.confirmUserTimeZone(!0)}}},[e._v("Yes")]),r("loading-button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",loading:!1,name:"isConfirmed",value:"no"},nativeOn:{click:function(t){return e.confirmUserTimeZone(!1)}}},[e._v("No")])],1)])])])],1)},ko=[];function Lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function $o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fo={name:"time-zone-auto-detect",props:{},components:{LoadingButton:et},data:function(){return{privateState:{storeTypes:H,showModalAfterMs:5e3}}},computed:$o({timezoneDetected:function(){var e=Lt.a.tz.guess();return e}},Object(U["b"])({sharedState:function(e){return e},isLoading:function(e){return e.loading[H.USER_INFO_TIMEZONE_SET]}})),created:function(){var e=this;this.$store.watch((function(e,t){return e.userInfo}),(function(t,r){t&&!e.isUserTimeZoneSet(t)&&(console.log("Auto detected timezone: ",e.timezoneDetected),e.timezoneDetected&&setTimeout((function(){e.showModal()}),e.privateState.showModalAfterMs))}))},mounted:function(){},updated:function(){},destroyed:function(){},methods:{isUserTimeZoneSet:function(e){return e.timeZone&&e.timeZone.timeZoneId},showModal:function(){this.$modal.show("user-timezone-confirm")},confirmUserTimeZone:function(e){var t=this;e?this.$store.dispatch(H.USER_INFO_TIMEZONE_SET,{timeZoneId:this.timezoneDetected}).then((function(){t.$notify({group:"app",type:"success",title:"Timezone is set to ".concat(t.timezoneDetected,"."),text:"",duration:5e3}),t.$modal.hide("user-timezone-confirm")})).catch((function(e){console.error(e),Fe.showErrorIfServerErrorResponseOrDefaultError(e)})):(this.$modal.hide("user-timezone-confirm"),this.$notify({group:"app-important",type:"warn",title:"Note:",text:"Go to settings and set your timezone to see date and time in your timezone. Until then, UTC will be used.",duration:1e4}))}}},Yo=Fo,Vo=Object(T["a"])(Yo,xo,ko,!1,null,"113a344c",null),Go=Vo.exports;function Ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(r),!0).forEach((function(t){Object(_["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ho(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qo="default",zo={name:"app",components:{TimeZoneAutoDetect:Go},data:function(){return{privateState:{}}},computed:Zo({},Object(U["b"])({sharedState:function(e){return e}}),{layout:function(){return"".concat(this.$route.meta.layout||qo,"-layout")}}),created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){},updated:function(){},destroyed:function(){}},Bo=zo,Wo=(r("60bc"),r("5ca7"),Object(T["a"])(Bo,No,Uo,!1,null,null,null)),Ko=Wo.exports,Jo=r("9483");function Qo(){ye.dispatch(H.CONFIG_LOAD).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.urls,a=t.clientAuth,ho.init(a),he.init(r),e.next=5,ho.getUser().then((function(e){return e&&("true"===e.profile.is_pre_registration?(console.log("User logged in using external provider and must complete registration flow."),po.push({name:"register",params:{},query:{preRegistrationUserId:e.profile.sub}})):console.log("User logged in and completed registration.")),e}));case 5:"error"===po.history.current.name&&po.push({path:"/"}),Xo();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),ye.commit(H.ERROR_PAGE_DATA_SET,{data:{title:"App configuration load error!",text:""}}),po.push({path:"error"}),Xo()}))}function Xo(){new n["default"]({router:po,store:ye,render:function(e){return console.log("Vue render"),e(Ko)}}).$mount("#app")}Object(Jo["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["default"].config.productionTip=!1,console.log("BASE_URL: ",""),document.addEventListener("DOMContentLoaded",(function(){console.log("DOMContentLoaded"),console.log("process.env: ",Object({NODE_ENV:"production",VUE_APP_ASPNETCORE_ENVIRONMENT:"DevelopmentHeroku",VUE_APP_VERSION:"0.1.0",BASE_URL:""})),console.log("process.env.VUE_APP_ASPNETCORE_ENVIRONMENT: ","DevelopmentHeroku")})),n["default"].use(o.a),n["default"].component("multiselect",c.a),n["default"].use(u.a,{componentName:"modal",dialog:!0}),n["default"].use(d["a"]),n["default"].component("datetime",p["Datetime"]),n["default"].component("paginate",f.a),n["default"].use(h.a,{container:"body",duration:500,easing:"ease",offset:-60,force:!0,cancelable:!0,onStart:!1,onDone:!1,onCancel:!1,x:!1,y:!0}),n["default"].use(A),n["default"].component("default-layout",To),n["default"].component("no-sidebar-layout",Mo),Qo()},9741:function(e,t,r){},b20f:function(e,t,r){},f203:function(e,t,r){"use strict";var a=r("9741"),n=r.n(a);n.a}});
//# sourceMappingURL=index.54b5aeda.js.map